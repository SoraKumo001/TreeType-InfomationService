{"version":3,"sources":["webpack://JWF/webpack/bootstrap","webpack://JWF/C:/work/www/@jswf/core/src/BaseView.ts","webpack://JWF/C:/work/www/@jswf/core/node_modules/css-loader/dist/runtime/api.js","webpack://JWF/C:/work/www/@jswf/core/node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://JWF/C:/work/www/@jswf/core/src/Libs.ts","webpack://JWF/C:/work/www/@jswf/core/src/FrameWindow.ts","webpack://JWF/C:/work/www/@jswf/core/src/Button.ts","webpack://JWF/C:/work/www/@jswf/core/node_modules/css-loader/dist/runtime/getUrl.js","webpack://JWF/C:/work/www/@jswf/core/src/WindowManager.ts","webpack://JWF/C:/work/www/@jswf/core/src/CalendarView.ts","webpack://JWF/C:/work/www/@jswf/core/src/Label.ts","webpack://JWF/C:/work/www/@jswf/core/src/Splitter.ts","webpack://JWF/C:/work/www/@jswf/core/src/TextBox.ts","webpack://JWF/C:/work/www/@jswf/core/src/TextArea.ts","webpack://JWF/C:/work/www/@jswf/core/src/ColorPickerView.ts","webpack://JWF/C:/work/www/@jswf/core/src/TextEditor/PanelControl.ts","webpack://JWF/C:/work/www/@jswf/core/node_modules/es6-promise/auto.js","webpack://JWF/config/versionTemplate.txt","webpack://JWF/lib/es6-promise/utils.js","webpack://JWF/lib/es6-promise/asap.js","webpack://JWF/lib/es6-promise/then.js","webpack://JWF/lib/es6-promise/promise/resolve.js","webpack://JWF/lib/es6-promise/-internal.js","webpack://JWF/lib/es6-promise/enumerator.js","webpack://JWF/lib/es6-promise/promise.js","webpack://JWF/lib/es6-promise/promise/all.js","webpack://JWF/lib/es6-promise/promise/race.js","webpack://JWF/lib/es6-promise/promise/reject.js","webpack://JWF/lib/es6-promise.js","webpack://JWF/lib/es6-promise/polyfill.js","webpack://JWF/C:/work/www/@jswf/core/node_modules/process/browser.js","webpack://JWF/(webpack)/buildin/global.js","webpack://JWF/C:/work/www/@jswf/core/src/index.ts","webpack://JWF/C:/work/www/@jswf/core/src/Adapter.ts","webpack://JWF/C:/work/www/@jswf/core/scss/Window.scss?0129","webpack://JWF/C:/work/www/@jswf/core/scss/Window.scss","webpack://JWF/C:/work/www/@jswf/core/scss/images/min.svg","webpack://JWF/C:/work/www/@jswf/core/scss/images/max.svg","webpack://JWF/C:/work/www/@jswf/core/scss/images/close.svg","webpack://JWF/C:/work/www/@jswf/core/scss/images/normal.svg","webpack://JWF/C:/work/www/@jswf/core/scss/Button.scss?0acf","webpack://JWF/C:/work/www/@jswf/core/scss/Button.scss","webpack://JWF/C:/work/www/@jswf/core/scss/CalendarView.scss?b92a","webpack://JWF/C:/work/www/@jswf/core/scss/CalendarView.scss","webpack://JWF/C:/work/www/@jswf/core/src/CheckBox.ts","webpack://JWF/C:/work/www/@jswf/core/scss/CheckBox.scss?8af9","webpack://JWF/C:/work/www/@jswf/core/scss/CheckBox.scss","webpack://JWF/C:/work/www/@jswf/core/scss/Label.scss?cccb","webpack://JWF/C:/work/www/@jswf/core/scss/Label.scss","webpack://JWF/C:/work/www/@jswf/core/src/ListView.ts","webpack://JWF/C:/work/www/@jswf/core/scss/ListView.scss?d247","webpack://JWF/C:/work/www/@jswf/core/scss/ListView.scss","webpack://JWF/C:/work/www/@jswf/core/src/MessageBox.ts","webpack://JWF/C:/work/www/@jswf/core/scss/MessageBox.scss?1344","webpack://JWF/C:/work/www/@jswf/core/scss/MessageBox.scss","webpack://JWF/C:/work/www/@jswf/core/src/Panel.ts","webpack://JWF/C:/work/www/@jswf/core/scss/Panel.scss?8bc7","webpack://JWF/C:/work/www/@jswf/core/scss/Panel.scss","webpack://JWF/C:/work/www/@jswf/core/src/SelectBox.ts","webpack://JWF/C:/work/www/@jswf/core/scss/SelectBox.scss?6881","webpack://JWF/C:/work/www/@jswf/core/scss/SelectBox.scss","webpack://JWF/C:/work/www/@jswf/core/scss/Splitter.scss?863c","webpack://JWF/C:/work/www/@jswf/core/scss/Splitter.scss","webpack://JWF/C:/work/www/@jswf/core/scss/images/menu.svg","webpack://JWF/C:/work/www/@jswf/core/src/TableFormView.ts","webpack://JWF/C:/work/www/@jswf/core/scss/TableFormView.scss?86a5","webpack://JWF/C:/work/www/@jswf/core/scss/TableFormView.scss","webpack://JWF/C:/work/www/@jswf/core/scss/TextBox.scss?f472","webpack://JWF/C:/work/www/@jswf/core/scss/TextBox.scss","webpack://JWF/C:/work/www/@jswf/core/scss/TextArea.scss?37fe","webpack://JWF/C:/work/www/@jswf/core/scss/TextArea.scss","webpack://JWF/C:/work/www/@jswf/core/src/TreeView.ts","webpack://JWF/C:/work/www/@jswf/core/scss/TreeView.scss?40ee","webpack://JWF/C:/work/www/@jswf/core/scss/TreeView.scss","webpack://JWF/C:/work/www/@jswf/core/scss/images/tclose.svg","webpack://JWF/C:/work/www/@jswf/core/scss/images/topen.svg","webpack://JWF/C:/work/www/@jswf/core/scss/images/talone.svg","webpack://JWF/C:/work/www/@jswf/core/scss/ColorPickerView.scss?b5fd","webpack://JWF/C:/work/www/@jswf/core/scss/ColorPickerView.scss","webpack://JWF/C:/work/www/@jswf/core/src/TextEditor/TextEditWindow.ts","webpack://JWF/C:/work/www/@jswf/core/scss/TextEditWindow.scss?d9ea","webpack://JWF/C:/work/www/@jswf/core/scss/TextEditWindow.scss","webpack://JWF/C:/work/www/@jswf/core/src/TextEditor/EditableView.ts","webpack://JWF/C:/work/www/@jswf/core/src/TextEditor/TextInputWindow.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","params","removers","listeners","JData","x","y","width","height","frameSize","titleSize","redraw","parent","orderTop","orderLayer","layoutFlag","clientArea","style","visible","minimize","normalX","normalY","normalWidth","normalHeight","margin","x1","y1","x2","y2","padding","moveable","reshow","noActive","animation","animationEnable","autoSizeNode","instructionSize","hNode","document","createElement","Jwf","this","dataset","jwf","jwfWindowName","constructor","zIndex","position","visibility","client","jwfType","appendChild","frame","addFrame","title","layer","setOrderLayer","overlap","setOverlap","addEventListener","layout","onMouseDown","passive","onMouseMove","close","setMaximize","setMinimize","body","show","foreground","flag","isOverlap","setJwfStyle","getClient","jwfStyle","getJwfStyle","getNode","setWindowId","id","jwfId","findWindow","windowName","windows","findWindows","length","elements","querySelectorAll","views","node","push","titleFlag","jwfClient","minHeight","frameStyles","onFrame","WindowManager","index","parseInt","cssText","replace","toString","top","childNodes","titleText","icons","icon","jwfKind","callEvent","e","moveNode","getPos","baseX","baseY","nodeX","getPosX","nodeY","getPosY","nodeWidth","getWidth","nodeHeight","getHeight","stopPropagation","preventDefault","frameIndex","nodePoint","nowPoint","basePoint","setPos","setSize","event","selection","window","getSelection","removeAllRanges","addRemover","remover","indexOf","proc","listener","removeEventListener","splice","movePos","setNoActive","parentWidth","getParentWidth2","getParent","parentHeight","getParentHeight2","getNearFrame","win","setPosX","setPosY","setMoveable","setWidth","setHeight","setPadding","p1","p2","p3","p4","setMargin","isVisible","setVisible","parentNode","display","nodes","count","setOrderTop","level","active","jwfActive","getParentWidth","innerWidth","offsetWidth","getParentHeight","innerHeight","offsetHeight","onMeasure","jdata","isAutoSize","removeProperty","child","getComputedStyle","Math","max","offsetLeft","marginRight","offsetTop","marginBottom","clientWidth","getClientWidth","clientHeight","getClientHeight","setClientSize","onLayout","pwidth","pheight","jwfStat","left","sort","anode","bnode","priority","bottom","right","a","px1","py1","px2","py2","orderSort","b","aIndex","bIndex","order","activeNodes","Set","add","activeWindows","w","has","setScroll","overflow","isScroll","that","animationEnd","removeChild","remove","setAnimation","getAbsX","px","getClientX","getAbsY","py","getClientY","setClientWidth","setClientHeight","addFrameChild","addChild","setChildStyle","removeChildAll","childList","scale","setAutoSize","setTitle","textContent","getTitle","minWidth","querySelector","BaseView","useSourceMap","list","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","base64","unescape","encodeURIComponent","JSON","stringify","data","concat","sourceURLs","sources","source","sourceRoot","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","_i","memo","stylesInDom","isOldIE","Boolean","all","atob","getTarget","target","styleTarget","HTMLIFrameElement","contentDocument","head","listToStyles","options","styles","newStyles","base","part","css","media","parts","addStylesToDom","domStyle","j","refs","addStyle","insertStyleElement","attributes","nonce","keys","forEach","setAttribute","insert","Error","textStore","replaceText","replacement","filter","applyToSingletonTag","obj","styleSheet","cssNode","createTextNode","insertBefore","singleton","singletonCounter","update","styleIndex","firstChild","removeStyleElement","newObj","newList","mayRemove","_domStyle","timeout","Promise","resolv","setTimeout","handle","clearTimeout","TimerProc","format","args","paramIndex","dest","charAt","flagZero","num","work","len","String","param","assign","FrameWindow","button","tabIndex","nodeText","setText","nodeValue","label","keyCode","text","getText","setAlign","justifyContent","getValue","Button","image","alt","nodeImg","src","ImageButton","url","needQuotes","default","test","slice","targetTouches","touch","pageX","pageY","clientX","clientY","enableMove","mouseDown","ename","dispatchEvent","createEvent","CustomEvent","initCustomEvent","tagName","tag","index2","layoutForced","layoutHandler","deactive","mouseUp","mouseMove","nodeSize","calendarDate","Date","startDate","endDate","holidays","selects","table","titleLine","insertRow","prev","insertCell","innerText","moveMonth","titleCell","colSpan","next","dateCells","line","cell","innerHTML","substr","onCellClick","day","dayText","select","month","date","getFullYear","getMonth","Libs","sprintf","setDate","getDate","getDay","dateStart","getTime","toDateString","holiday","setHoliday","setSelect","CalendarView","setFontSize","size","fontSize","getTextNode","Label","splitPos","splitType","drawerMode","drawerModeNow","splitterMoving","splitterThick","splitterPos","splitterType","drawerWidth","pos","type","menuIcon","kind","child0","splitter","child1","dsize","ssize","arrgement","setSplitterPos","setOverlay","getChild","Splitter","img","textArea","nodeLabel","setLabel","getLabel","focus","TextBox","TextArea","trianglePoinst","targetSize","triangleSize","color","g","color2","triangleCanvas","buttons","setTriangleColor","canvasTarget","canvasLevel","HTMLCanvasElement","rect","getBoundingClientRect","mouseY","getColorLevel","setTarget","drawTriangle","setLevel","floor","mouseX","getColor","ctx","getContext","fillStyle","fillRect","undefined","ctxLevel","grad","createLinearGradient","addColorStop","cx","cy","sqrt","pow","clearRect","triangle","min","globalCompositeOperation","i0","i1","i2","beginPath","moveTo","lineTo","closePath","fill","ColorView","colorView","colorValues","parse","localStorage","getItem","getStrageName","colorSelector","inputArea","input","inputs","colorsArea","backgroundColor","getRGB","selectCell","setItem","location","hostname","pathname","ColorPickerWindow","setControlValue","HTMLInputElement","checked","getControlValue","createControl","area","editControl","check","userSelect","border","background","colorPicker","option","PanelControl","polyfill","isFunction","isArray","Array","vertxNext","customSchedulerFn","asap","callback","arg","queue","flush","scheduleFlush","browserWindow","browserGlobal","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","isNode","self","process","isWorker","Uint8ClampedArray","importScripts","MessageChannel","useSetTimeout","globalSetTimeout","channel","iterations","observer","then","onFulfillment","onRejection","noop","PROMISE_ID","makePromise","_state","arguments","invokeCallback","_result","subscribe","resolve","promise","_resolve","nextTick","observe","characterData","port1","onmessage","port2","postMessage","vertx","Function","require","runOnLoop","runOnContext","attemptVertx","random","substring","PENDING","FULFILLED","REJECTED","handleMaybeThenable","maybeThenable","originalThen","originalResolve","thenable","fulfill","reject","reason","handleOwnThenable","sealed","error","fulfillmentHandler","rejectionHandler","tryThen","_label","handleForeignThenable","TypeError","publishRejection","_onerror","publish","_subscribers","subscribers","settled","detail","hasCallback","succeeded","Enumerator","Constructor","_instanceConstructor","_remaining","_enumerate","_eachEntry","entry","_then","didError","_settledAt","_willSettleAt","state","enumerator","resolver","needsResolver","initializePromise","needsNew","catch","finally","entries","race","_","Resolve","_reject","_setScheduler","scheduleFn","_setAsap","asapFn","_asap","local","global","P","promiseToString","cast","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","run","marker","runClearTimeout","Item","array","apply","browser","env","argv","version","versions","on","addListener","once","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","scriptUrl","keyName","functionSet","getKeyName","execAlone","funcName","functions","send","execBinary","exec","v1","func","v2","callSend","binary","globalHash","sessionHash","sessionStorage","funcs","function","Adapter","sendJsonAsync","res","console","results","values","result","headers","sendJsonToBinary","sendJson","req","XMLHttpRequest","jsonFlag","responseType","open","responseText","onreadystatechange","readyState","response","setRequestHeader","upload","buffer","adapterFormat","sendFile","urlParam","alert","locals","getUrl","___CSS_LOADER_URL___0___","___CSS_LOADER_URL___1___","___CSS_LOADER_URL___2___","___CSS_LOADER_URL___3___","nodeCheck","isCheck","setCheck","CheckBox","overIndex","lastIndex","selectIndexes","sortIndex","sortVector","columnWidth","columnAutoIndex","areaWidth","headerBack","headerArea","resizers","itemArea","scrollLeft","childElementCount","marginLeft","itemIndex","subItemIndex","setColumnWidth","children","resize","setColumnStyle","col","setColumnStyles","columns","vector","addHeader","labels","header","column","sortItem","h","clientLeft","clearSelectItem","className","items","sortList","keyValue","selectItem","addSelectItem","itemSelect","indexes","delSelectItem","newIndexes","getItemCount","isSelectItem","getIndexOfNode","clearItem","getCell","row","setItemValue","getItemValue","getItemValues","getItemText","getSelectItem","getSelectValues","getLineCells","cells","addItem","itemValue","center","draggable","ListView","itemHover","node2","drag","ctrlKey","shiftKey","setSortKey","setSortKeys","HTMLElement","lmitWidth","autoIndex","msg","buttonData","MessageBox","Panel","opNode","SelectBox","footer","events","type2","readOnly","toLocaleDateString","value2","calendar","image_width","setProperty","link","href","getParams","v","HTMLSelectElement","vnode","HTMLImageElement","HTMLTextAreaElement","setParams","TableFormView","opened","treeItem","row1","treeView","getTreeView","user","dataTransfer","setData","getData","srcValue","openItem","row2","childNode","isOpened","getBody","setKey","getKey","TreeItem","childs","removeItem","getRootItem","moveItem","getParentItem","getChildCount","setItemText","getChildItem","getTreeLevel","treeNode","findItemFromValue","f","anime","stat","scroll","parentElement","mSelectItem","mRootItem","scrollIntoView","behavior","scrollTop","scrollTo","selectItemFromValue","getSelectItemValue","getTreeStat","treeStat","getStat","setTreeStat","TreeView","editableView","EditableView","htmlTimer","textTimer","getHtml","setHtml","getEditableView","insertNode","setRange","TextEditWindow","addPanel","htmlArea","contentEditable","clipboardData","files","fileList","enter","insertImage","ch","execCommand","keepRange","getRangeAt","ondragover","file","FileReader","readAsDataURL","onload","outerHTML","panel","createLink","setPGCode","plain","range","deleteContents","createContextualFragment","TextInputWindow","message","addRange","anchorNode","okButton","cancelButton","setMessage"],"mappings":"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","file":"jwf.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 15);\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\n/* eslint-disable no-dupe-class-members */\r\nimport \"../scss/Window.scss\";\r\nimport { WindowManager } from \"./WindowManager\";\r\nimport { FrameWindow } from \"./FrameWindow\";\r\n\r\n//\r\nconst FRAME_SIZE = 10; //\r\nconst TITLE_SIZE = 24; //\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @interface Point\r\n */\r\nexport interface Point {\r\n  x: number;\r\n  y: number;\r\n}\r\n/**\r\n * \r\n */\r\nexport interface Size {\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @interface JWFEvent\r\n * @extends {Event}\r\n */\r\nexport interface JWFEvent extends Event {\r\n  params: unknown;\r\n}\r\n\r\n/**\r\n * \r\n *\r\n * @export\r\n * @interface MovePoint\r\n * @param {Point} basePoint \r\n * @param {Point} nowPoint \r\n * @param {Point} nodePoint \r\n * @param {Size} nodeSize \r\n */\r\nexport interface MovePoint {\r\n  event: MouseEvent | TouchEvent;\r\n  basePoint: Point;\r\n  nowPoint: Point;\r\n  nodePoint: Point;\r\n  nodeSize: Size;\r\n}\r\nexport declare class MoveElement extends HTMLDivElement {\r\n  public addEventListener<K extends keyof HTMLElementEventMap>(\r\n    type: K,\r\n    listener: (this: HTMLElement, ev: HTMLElementEventMap[K]) => unknown,\r\n    options?: boolean | AddEventListenerOptions\r\n  ): void;\r\n  public addEventListener(\r\n    type: string,\r\n    listener: (e: JWFEvent) => unknown\r\n  ): void;\r\n}\r\n/**\r\n *Window\r\n *\r\n * @interface JNode\r\n * @extends {HTMLElement}\r\n */\r\nexport declare interface JNode extends MoveElement {\r\n  Jwf: BaseView; //Window\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @interface JDATA\r\n */\r\nexport interface JDATA {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  frameSize: number;\r\n  titleSize: number;\r\n  redraw: boolean;\r\n  parent: BaseView | null;\r\n  orderTop: boolean;\r\n  orderLayer: number;\r\n  layoutFlag: boolean;\r\n  clientArea: HTMLElement | null;\r\n  style: string | null;\r\n  visible: boolean;\r\n  minimize: boolean;\r\n  normalX: number;\r\n  normalY: number;\r\n  normalWidth: number;\r\n  normalHeight: number;\r\n  margin: { x1: number; y1: number; x2: number; y2: number };\r\n  padding: { x1: number; y1: number; x2: number; y2: number };\r\n  moveable: boolean;\r\n  reshow: boolean;\r\n  animation: { [key: string]: string };\r\n  animationEnable: boolean;\r\n  noActive: boolean;\r\n  autoSizeNode: HTMLElement | null;\r\n  instructionSize: { width: number; height: number };\r\n}\r\n\r\nexport interface WINDOW_EVENT_MAP {\r\n  [key: string]: unknown[];\r\n  active: [{ active: boolean }];\r\n  measure: [];\r\n  closed: [];\r\n  layout: [];\r\n  layouted: [];\r\n  visibled: [{ visible: boolean }];\r\n}\r\n\r\n/**\r\n *\r\n * frame Frame\r\n * title \r\n * layer \r\n * overlap \r\n * @export\r\n * @interface WINDOW_PARAMS\r\n */\r\nexport interface WINDOW_PARAMS {\r\n  frame?: boolean;\r\n  title?: boolean;\r\n  layer?: number;\r\n  overlap?: boolean;\r\n  visible?: boolean;\r\n}\r\nexport interface WindowRemover {\r\n  remove: () => void;\r\n}\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class Window\r\n */\r\nexport class BaseView<T extends WINDOW_EVENT_MAP = WINDOW_EVENT_MAP> {\r\n  private removers: WindowRemover[] = [];\r\n  private listeners: {\r\n    [key: string]: unknown[];\r\n  } = {};\r\n  private hNode: JNode;\r\n  private JData: JDATA = {\r\n    x: 0,\r\n    y: 0,\r\n    width: 400,\r\n    height: 300,\r\n    frameSize: 0,\r\n    titleSize: 0,\r\n    redraw: true,\r\n    parent: null,\r\n    orderTop: false,\r\n    orderLayer: 0,\r\n    layoutFlag: false,\r\n    clientArea: null,\r\n    style: null,\r\n    visible: true,\r\n    minimize: false,\r\n    normalX: 0,\r\n    normalY: 0,\r\n    normalWidth: 0,\r\n    normalHeight: 0,\r\n    margin: { x1: 0, y1: 0, x2: 0, y2: 0 },\r\n    padding: { x1: 0, y1: 0, x2: 0, y2: 0 },\r\n    moveable: false,\r\n    reshow: true,\r\n    noActive: false,\r\n    animation: {},\r\n    animationEnable: true,\r\n    autoSizeNode: null,\r\n    instructionSize: { width: -1, height: -1 }\r\n  };\r\n  /**\r\n   * Creates an instance of Window.\r\n   * @param {{ frame?: boolean, title?: boolean, layer?: number}} [params] \r\n   * {\tframe?:boolean,\r\n   * \t\ttitle?:boolean,\r\n   * \t\tlayer?:number\r\n   * }\r\n   * @memberof Window\r\n   */\r\n  public constructor(params?: WINDOW_PARAMS) {\r\n    //\r\n    let hNode = document.createElement(\"DIV\") as JNode;\r\n    hNode.Jwf = this;\r\n    this.hNode = hNode;\r\n    hNode.dataset.jwf = \"Window\";\r\n    hNode.dataset.jwfWindowName = this.constructor.name;\r\n    //\r\n    hNode.style.zIndex = \"10000\";\r\n    hNode.style.position = \"absolute\";\r\n    hNode.style.visibility = \"hidden\";\r\n    //\r\n    var client = document.createElement(\"div\");\r\n    this.JData.clientArea = client;\r\n    client.dataset.jwfType = \"client\";\r\n    hNode.appendChild(client);\r\n    //\r\n    if (params) {\r\n      if (params.frame) {\r\n        this.addFrame(params.title == null ? true : params.title);\r\n        if (params.layer == null) this.setOrderLayer(10);\r\n        if (params.overlap == null) this.setOverlap(true);\r\n        this.JData.animation[\"show\"] = \"JWFFrameShow 0.5s ease 0s 1 normal\";\r\n        this.JData.animation[\"close\"] = \"JWFclose 0.2s ease 0s 1 forwards\";\r\n        this.JData.animation[\"maximize\"] =\r\n          \"JWFmaximize 0.2s ease 0s 1 forwards\";\r\n        this.JData.animation[\"minimize\"] =\r\n          \"JWFminimize 0.2s ease 0s 1 forwards\";\r\n        this.JData.animation[\"maxrestore\"] =\r\n          \"JWFmaxrestore 0.2s ease 0s 1 forwards\";\r\n        this.JData.animation[\"restore\"] = \"JWFrestore 0.2s ease 0s 1 forwards\";\r\n      }\r\n      if (params.layer) {\r\n        this.setOrderLayer(params.layer);\r\n      }\r\n      if (params.overlap) {\r\n        this.setOverlap(params.overlap);\r\n      }\r\n      if (params.visible === false) {\r\n        this.hNode.style.visibility = \"hidden\";\r\n        this.JData.visible = false;\r\n      }\r\n    }\r\n\r\n    hNode.addEventListener(\r\n      \"animationend\",\r\n      (): void => {\r\n        this.layout();\r\n      }\r\n    );\r\n\r\n    //\r\n    hNode.addEventListener(\"touchstart\", this.onMouseDown.bind(this), {\r\n      passive: false\r\n    });\r\n    hNode.addEventListener(\"mousedown\", this.onMouseDown.bind(this));\r\n    hNode.addEventListener(\"move\", this.onMouseMove.bind(this));\r\n    //\r\n    hNode.addEventListener(\"JWFclose\", this.close.bind(this));\r\n    hNode.addEventListener(\"JWFmax\", this.setMaximize.bind(this, true));\r\n    hNode.addEventListener(\"JWFnormal\", this.setMaximize.bind(this, false));\r\n    hNode.addEventListener(\"JWFmin\", this.setMinimize.bind(this, true));\r\n    hNode.addEventListener(\"JWFrestore\", this.setMinimize.bind(this, false));\r\n    //\r\n    document.body.appendChild(hNode);\r\n    //\r\n    this.show(true);\r\n    //\r\n    this.layout();\r\n    //\r\n    this.foreground(false);\r\n  }\r\n  public setOverlap(flag: boolean): void {\r\n    this.hNode.style.position = flag ? \"fixed\" : \"absolute\";\r\n  }\r\n  public isOverlap(): boolean {\r\n    return this.hNode.style.position === \"fixed\";\r\n  }\r\n  public setJwfStyle(style: string): void {\r\n    this.getClient().dataset.jwfStyle = style;\r\n  }\r\n  public getJwfStyle(): string | null {\r\n    return this.getNode().dataset.jwfStyle || null;\r\n  }\r\n  public setWindowId(id: string) {\r\n    this.getNode().dataset.jwfId = id;\r\n  }\r\n\r\n  // public static findWindow<T extends BaseView>(\r\n  //   win: {new ():T}\r\n  // ): T | undefined {\r\n  //   const windows = this.findWindows(win.name);\r\n  //   if (windows.length) return windows[0] as T;\r\n  //   return undefined;\r\n  // }\r\n\r\n\r\n  public static findWindow(windowName:string):BaseView|undefined{\r\n    const windows = this.findWindows(windowName);\r\n    if(windows.length)\r\n      return windows[0];\r\n    return undefined;\r\n  }\r\n  public static findWindows(windowName: string): BaseView[] {\r\n    const elements = document.querySelectorAll(\r\n      `[data-jwf=Window][data-jwf-window-name=${windowName}]`\r\n    ) as NodeListOf<JNode>;\r\n    const views: BaseView[] = [];\r\n    for (let length = elements.length, i = 0; i < length; i++) {\r\n      const node = elements[i];\r\n      views.push(node.Jwf);\r\n    }\r\n    return views;\r\n  }\r\n  //\r\n  private addFrame(titleFlag: boolean): void {\r\n    this.getClient().dataset.jwfClient = \"true\";\r\n    this.hNode.dataset.jwfType = \"Frame\";\r\n    //\r\n    this.JData.titleSize = titleFlag ? TITLE_SIZE : 0;\r\n    this.hNode.style.minHeight = this.JData.titleSize + \"px\";\r\n    //\r\n    let frameStyles = [\r\n      [\r\n        \"border\",\r\n        \"cursor:n-resize; left:0px;top:-{0}px;right:0px;height:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:e-resize; top:0px;right:-{0}px;bottom:0px;width:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:s-resize; left:0px;right:0px;height:{0}px;bottom:-{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:w-resize; top:0px;left:-{0}px;bottom:0px;width:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:nw-resize;left:-{0}px;top:-{0}px;width:{0}px;height:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:ne-resize;right:-{0}px;top:-{0}px;width:{0}px;height:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:sw-resize;left:-{0}px;bottom:-{0}px;width:{0}px;height:{0}px;\"\r\n      ], //\r\n      [\r\n        \"border\",\r\n        \"cursor:se-resize;right:-{0}px;bottom:-{0}px;width:{0}px;height:{0}px;\"\r\n      ], //\r\n      [\"title\", \"left:0px;top:0px;right:0px;height:{1}px\"] //\r\n    ];\r\n\r\n    //\r\n    function onFrame(this: HTMLElement): void {\r\n      if (WindowManager.frame == null)\r\n        WindowManager.frame =\r\n          this.dataset.index != null ? parseInt(this.dataset.index) : null;\r\n      //EDGE\r\n      //if (WindowManager.frame < 9)\r\n      //\tif (e.preventDefault) e.preventDefault(); else e.returnValue = false\r\n    }\r\n    //\r\n    for (let i = 0; i < frameStyles.length; i++) {\r\n      let frame = document.createElement(\"div\");\r\n      frame.style.cssText = frameStyles[i][1]\r\n        .replace(/\\{0\\}/g, FRAME_SIZE.toString())\r\n        .replace(/\\{1\\}/g, this.JData.titleSize.toString());\r\n      frame.dataset.index = i.toString();\r\n      frame.dataset.jwfType = frameStyles[i][0];\r\n      this.hNode.appendChild(frame);\r\n\r\n      frame.addEventListener(\"touchstart\", onFrame, { passive: false });\r\n      frame.addEventListener(\r\n        \"touchend\",\r\n        function(): void {\r\n          WindowManager.frame = null;\r\n        },\r\n        { passive: false }\r\n      );\r\n      frame.addEventListener(\"mousedown\", onFrame, false);\r\n      frame.addEventListener(\r\n        \"mouseup\",\r\n        function(): void {\r\n          WindowManager.frame = null;\r\n        },\r\n        false\r\n      );\r\n    }\r\n    this.JData.frameSize = 1;\r\n    this.getClient().style.top = this.JData.titleSize + \"px\";\r\n    let node = this.hNode;\r\n    //\r\n    let title = node.childNodes[9];\r\n    let titleText = WindowManager.createElement(\"div\", {\r\n      dataset: { jwfType: \"text\" }\r\n    });\r\n    title.appendChild(titleText);\r\n    //\r\n    let icons = [\"min\", \"max\", \"close\"];\r\n    for (let index in icons) {\r\n      let icon = WindowManager.createElement(\"div\", {\r\n        style: {\r\n          width: this.JData.titleSize + \"px\",\r\n          height: this.JData.titleSize + \"px\"\r\n        },\r\n        dataset: { jwfType: \"icon\", jwfKind: icons[index] }\r\n      });\r\n      title.appendChild(icon);\r\n      icon.addEventListener(\"click\", function(): void {\r\n        WindowManager.callEvent(node, \"JWF\" + this.dataset.jwfKind);\r\n      });\r\n    }\r\n  }\r\n\r\n  private onMouseDown(e: MouseEvent | TouchEvent): boolean | undefined {\r\n    if (WindowManager.moveNode == null) {\r\n      this.foreground();\r\n      WindowManager.moveNode = this.hNode;\r\n      let p = WindowManager.getPos(e);\r\n      WindowManager.baseX = p.x;\r\n      WindowManager.baseY = p.y;\r\n      WindowManager.nodeX = this.getPosX();\r\n      WindowManager.nodeY = this.getPosY();\r\n      WindowManager.nodeWidth = this.getWidth();\r\n      WindowManager.nodeHeight = this.getHeight();\r\n      e.stopPropagation();\r\n      return false;\r\n    } else {\r\n      e.preventDefault();\r\n    }\r\n  }\r\n  private onMouseMove(e: JWFEvent): void {\r\n    if (WindowManager.frame == null) return;\r\n\r\n    let p = e.params as MovePoint;\r\n    let x = this.getPosX();\r\n    let y = this.getPosY();\r\n\r\n    let width = this.getWidth();\r\n    let height = this.getHeight();\r\n\r\n    //\r\n    let frameIndex = WindowManager.frame;\r\n    switch (frameIndex) {\r\n      case 0: //\r\n        y = p.nodePoint.y + p.nowPoint.y - p.basePoint.y;\r\n        height = WindowManager.nodeHeight - (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 1: //\r\n        width = WindowManager.nodeWidth + (p.nowPoint.x - p.basePoint.x);\r\n        break;\r\n      case 2: //\r\n        height = WindowManager.nodeHeight + (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 3: //\r\n        x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n        width = WindowManager.nodeWidth - (p.nowPoint.x - p.basePoint.x);\r\n        break;\r\n      case 4: //\r\n        x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n        y = p.nodePoint.y + p.nowPoint.y - p.basePoint.y;\r\n        width = WindowManager.nodeWidth - (p.nowPoint.x - p.basePoint.x);\r\n        height = WindowManager.nodeHeight - (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 5: //\r\n        y = p.nodePoint.y + p.nowPoint.y - p.basePoint.y;\r\n        width = WindowManager.nodeWidth + (p.nowPoint.x - p.basePoint.x);\r\n        height = WindowManager.nodeHeight - (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 6: //\r\n        x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n        width = WindowManager.nodeWidth - (p.nowPoint.x - p.basePoint.x);\r\n        height = WindowManager.nodeHeight + (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 7: //\r\n        width = WindowManager.nodeWidth + (p.nowPoint.x - p.basePoint.x);\r\n        height = WindowManager.nodeHeight + (p.nowPoint.y - p.basePoint.y);\r\n        break;\r\n      case 8: //\r\n        x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n        y = p.nodePoint.y + p.nowPoint.y - p.basePoint.y;\r\n        break;\r\n      default:\r\n        //\r\n        if (!this.JData.moveable) break;\r\n    }\r\n    //\r\n    this.setPos(x, y);\r\n    this.setSize(width, height);\r\n    //\r\n    if (frameIndex < 9 || this.JData.moveable) {\r\n      p.event.preventDefault();\r\n      try {\r\n        const selection = window.getSelection();\r\n        if (selection) selection.removeAllRanges();\r\n      } catch (e) {\r\n        //\r\n      }\r\n    }\r\n  }\r\n  public addRemover(...remover: WindowRemover[]): void {\r\n    if (!remover) return;\r\n    const removers = this.removers;\r\n    for (const r of remover) {\r\n      if (removers.indexOf(r) === -1) removers.push(r);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} type \r\n   * @param {*} listener \r\n   * @memberof Window\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  addEventListener<K extends keyof T>(\r\n    name: K,\r\n    proc: (...params: T[K]) => void\r\n  ): void {\r\n    const listener = this.listeners[name as string];\r\n    if (!listener) {\r\n      this.listeners[name as string] = [proc];\r\n      return;\r\n    }\r\n    if (listener.indexOf(proc) >= 0) return;\r\n    listener.push(proc);\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @template K\r\n   * @param {(K | string)} type \r\n   * @param {(this: BaseView, ev: WINDOW_EVENT_MAP[K]) => unknown} listener \r\n   * @memberof Window\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  removeEventListener<K extends keyof T>(\r\n    name: K & string,\r\n    proc: (...params: T[K]) => void\r\n  ): void {\r\n    const listener = this.listeners[name];\r\n    if (!listener) {\r\n      this.listeners[name as string] = [proc];\r\n      return;\r\n    }\r\n    const index = listener.indexOf(proc);\r\n    if (index < 0) return;\r\n    listener.splice(index, 1);\r\n  }\r\n\r\n  //\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} type \r\n   * @param {*} params \r\n   * @memberof Window\r\n   */\r\n  public callEvent<K extends keyof T>(name: K, ...params: T[K]): void {\r\n    const listener = this.listeners[name as string];\r\n    if (listener) {\r\n      for (const proc of listener) {\r\n        (proc as ((...params: T[K]) => unknown))(...params);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {HTMLElement} \r\n   * @memberof Window\r\n   */\r\n  public getNode(): JNode {\r\n    return this.hNode;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} x\r\n   * @param {number} y\r\n   * @memberof Window\r\n   */\r\n  public movePos(x: number, y: number): void {\r\n    this.JData.x = this.JData.x + x;\r\n    this.JData.y = this.JData.y + y;\r\n    this.layout();\r\n  }\r\n  public setNoActive(flag: boolean): void {\r\n    this.JData.noActive = flag;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} [x]\r\n   * @param {number} [y]\r\n   * @memberof Window\r\n   */\r\n  public setPos(x?: number, y?: number): void {\r\n    if (x == null) {\r\n      let parentWidth = this.getParentWidth2();\r\n      let width = this.getWidth();\r\n      if (parentWidth < width) x = 0;\r\n      else x = (parentWidth - width) / 2;\r\n      const parent = this.getParent();\r\n      if (this.getNode().style.position === \"fixed\" && parent)\r\n        x += parent.getPosX();\r\n    }\r\n    if (y == null) {\r\n      let parentHeight = this.getParentHeight2();\r\n      let height = this.getHeight();\r\n      if (parentHeight < height) y = 0;\r\n      else y = (parentHeight - height) / 2;\r\n      const parent = this.getParent();\r\n      if (this.getNode().style.position === \"fixed\" && parent)\r\n        y += parent.getPosY();\r\n    }\r\n    if (this.JData.x === x && this.JData.y === y) return;\r\n    this.JData.x = x;\r\n    this.JData.y = y;\r\n    this.layout();\r\n  }\r\n  public getNearFrame(): FrameWindow | null {\r\n    let win: FrameWindow | null = this;\r\n    do {\r\n      if (win.hNode.dataset.jwfType === \"Frame\") return win;\r\n    } while ((win = win.getParent() as FrameWindow));\r\n    return null;\r\n  }\r\n  /**\r\n   *X\r\n   *\r\n   * @param {number} x\r\n   * @memberof Window\r\n   */\r\n  public setPosX(x: number): void {\r\n    if (this.JData.x === x) return;\r\n    this.JData.x = x;\r\n    this.layout();\r\n  }\r\n  /**\r\n   *Y\r\n   *\r\n   * @param {number} y\r\n   * @memberof Window\r\n   */\r\n  public setPosY(y: number): void {\r\n    if (this.JData.y === y) return;\r\n    this.JData.y = y;\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {BaseView} \r\n   * @memberof Window\r\n   */\r\n  public getParent(): BaseView | null {\r\n    return this.JData.parent;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} moveable true: false:\r\n   * @memberof Window\r\n   */\r\n  public setMoveable(moveable: boolean): void {\r\n    this.JData.moveable = moveable;\r\n  }\r\n\r\n  /**\r\n   *X\r\n   *\r\n   * @returns {number}\r\n   * @memberof Window\r\n   */\r\n  public getPosX(): number {\r\n    return this.JData.x;\r\n  }\r\n  /**\r\n   *Y\r\n   *\r\n   * @returns {number}\r\n   * @memberof Window\r\n   */\r\n  public getPosY(): number {\r\n    return this.JData.y;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getWidth(): number {\r\n    return this.JData.width;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getHeight(): number {\r\n    return this.JData.height;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} width\r\n   * @param {number} height\r\n   * @memberof Window\r\n   */\r\n  public setSize(width: number, height: number): void {\r\n    if (this.JData.width === width && this.JData.height === height) return;\r\n\r\n    const parent = this.getParent();\r\n    if (parent) {\r\n      parent.layout();\r\n    }\r\n    this.JData.width = width;\r\n    this.JData.height = height;\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} width\r\n   * @memberof Window\r\n   */\r\n  public setWidth(width: number): void {\r\n    if (this.JData.width === width) return;\r\n    this.JData.width = width;\r\n    this.layout();\r\n    const parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} height\r\n   * @memberof Window\r\n   */\r\n  public setHeight(height: number): void {\r\n    if (this.JData.height === height) return;\r\n    this.JData.height = height;\r\n    const parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n\r\n  /**\r\n   * padding\r\n   *\r\n   * @param {number} x1\r\n   * @param {number} y1\r\n   * @param {number} x2\r\n   * @param {number} y2\r\n   * @memberof Window\r\n   */\r\n\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setPadding(x1: number, y1: number, x2: number, y2: number): void;\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setPadding(all: number): void;\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setPadding(p1: number, p2?: number, p3?: number, p4?: number): void {\r\n    if (typeof p2 === \"undefined\") {\r\n      this.JData.padding.x1 = p1;\r\n      this.JData.padding.y1 = p1;\r\n      this.JData.padding.x2 = p1;\r\n      this.JData.padding.y2 = p1;\r\n    } else if (typeof p3 !== \"undefined\" && typeof p4 !== \"undefined\") {\r\n      this.JData.padding.x1 = p1;\r\n      this.JData.padding.y1 = p2;\r\n      this.JData.padding.x2 = p3;\r\n      this.JData.padding.y2 = p4;\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} x1\r\n   * @param {number} y1\r\n   * @param {number} x2\r\n   * @param {number} y2\r\n   * @memberof Window\r\n   */\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setMargin(x1: number, y1: number, x2: number, y2: number): void;\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setMargin(all: number): void;\r\n  // eslint-disable-next-line @typescript-eslint/explicit-member-accessibility\r\n  setMargin(p1: number, p2?: number, p3?: number, p4?: number): void {\r\n    if (typeof p2 === \"undefined\") {\r\n      this.JData.margin.x1 = p1;\r\n      this.JData.margin.y1 = p1;\r\n      this.JData.margin.x2 = p1;\r\n      this.JData.margin.y2 = p1;\r\n    } else if (typeof p3 !== \"undefined\" && typeof p4 !== \"undefined\") {\r\n      this.JData.margin.x1 = p1;\r\n      this.JData.margin.y1 = p2;\r\n      this.JData.margin.x2 = p3;\r\n      this.JData.margin.y2 = p4;\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {boolean}\r\n   * @memberof Window\r\n   */\r\n  public isVisible(): boolean {\r\n    if (!this.JData.visible) return false;\r\n    let parent = this.getParent();\r\n    if (!parent) return false;\r\n    while ((parent = parent.getParent())) {\r\n      if (!parent.isVisible()) return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof Window\r\n   */\r\n  public setVisible(flag: boolean): void {\r\n    const node = this.getNode();\r\n    if (!node.parentNode) {\r\n      document.body.appendChild(node);\r\n    } else if (this.JData.visible === flag) return;\r\n    if (flag) this.hNode.style.visibility = \"\";\r\n\r\n    if (flag) {\r\n      node.style.display = \"\";\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"show\"]\r\n        : \"\";\r\n      const animationEnd = (): void => {\r\n        this.callEvent(\"visibled\", { visible: true });\r\n        node.removeEventListener(\"animationend\", animationEnd);\r\n        node.style.animation = \"\";\r\n        node.style.display = \"\";\r\n      };\r\n      if (animation) {\r\n        node.addEventListener(\"animationend\", animationEnd);\r\n        node.style.animation = animation;\r\n      } else {\r\n        node.style.animation = \"\";\r\n        animationEnd.bind(node)();\r\n      }\r\n    } else {\r\n      const animationEnd = (): void => {\r\n        let nodes = (node.querySelectorAll(\r\n          '[data-jwf=\"Window\"]'\r\n        ) as unknown) as JNode[];\r\n        let count = nodes.length;\r\n        for (let i = 0; i < count; i++) {\r\n          nodes[i].Jwf.layout();\r\n        }\r\n        node.style.display = \"none\";\r\n        node.removeEventListener(\"animationend\", animationEnd);\r\n        node.style.animation = \"\";\r\n        this.callEvent(\"visibled\", { visible: false });\r\n      };\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"close\"]\r\n        : \"\";\r\n      const parent = this.getParent();\r\n      if (animation && parent && parent.isVisible()) {\r\n        node.addEventListener(\"animationend\", animationEnd);\r\n        node.style.animation = animation;\r\n      } else {\r\n        animationEnd.bind(node)();\r\n      }\r\n    }\r\n    this.JData.visible = flag;\r\n    const parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof Window\r\n   */\r\n  public setOrderTop(flag: boolean): void {\r\n    this.JData.orderTop = flag;\r\n    const parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} level :0 FrameWindow:10\r\n   * @memberof Window\r\n   */\r\n  public setOrderLayer(level: number): void {\r\n    this.JData.orderLayer = level;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof Window\r\n   */\r\n  public layout(): void {\r\n    if (this.JData.layoutFlag) return;\r\n    this.JData.layoutFlag = true;\r\n    this.JData.redraw = true;\r\n    WindowManager.layout(false);\r\n    this.JData.layoutFlag = false;\r\n  }\r\n  /**\r\n   *()\r\n   *\r\n   * @param {boolean} [flag]\r\n   * @memberof Window\r\n   */\r\n  public active(flag?: boolean): void {\r\n    if (!this.JData.noActive)\r\n      this.getNode().dataset.jwfActive =\r\n        flag || flag == null ? \"true\" : \"false\";\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getParentWidth(): number {\r\n    const node = this.hNode;\r\n    if (node.style.position === \"fixed\") return window.innerWidth;\r\n    let parent = node.parentNode as JNode;\r\n    if (parent.Jwf) return parent.Jwf.getWidth();\r\n    return parent.offsetWidth;\r\n  }\r\n  public getParentWidth2(): number {\r\n    let parent = this.getParent();\r\n    if (parent) return parent.getWidth();\r\n    return window.innerWidth;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getParentHeight(): number {\r\n    const node = this.hNode;\r\n    if (node.style.position === \"fixed\") return window.innerHeight;\r\n    let parent = node.parentNode as JNode;\r\n    if (parent.Jwf) return parent.Jwf.getHeight();\r\n    return parent.offsetHeight;\r\n  }\r\n  public getParentHeight2(): number {\r\n    let parent = this.getParent();\r\n    if (parent) return parent.getHeight();\r\n    return window.innerHeight;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag true: false:\r\n   * @returns {boolean} \r\n   * @memberof Window\r\n   */\r\n  public onMeasure(flag: boolean): boolean {\r\n    const jdata = this.JData;\r\n    //\r\n    if (jdata.reshow || flag) {\r\n      jdata.reshow = false;\r\n      if (jdata.visible) {\r\n        this.hNode.style.visibility = \"\";\r\n\r\n        const animation = jdata.animationEnable ? jdata.animation[\"show\"] : \"\";\r\n        if (animation) this.hNode.style.animation = animation;\r\n      }\r\n    }\r\n\r\n    let client = this.getClient();\r\n    // for (let i = 0, length = client.childNodes.length; i < length; i++) {\r\n    //   let node = client.childNodes[i] as JNode;\r\n    //   if (node.dataset && node.dataset.jwf === \"Window\")\r\n    //     flag = node.Jwf.onMeasure(flag) || flag;\r\n    // }\r\n    // if (!flag && !jdata.redraw) return false;\r\n\r\n    if (!this.isAutoSize()) return false;\r\n\r\n    this.callEvent(\"measure\");\r\n    //client.style.position = \"static\";\r\n    if (jdata.instructionSize.width >= 0)\r\n      client.style.width = jdata.instructionSize.width + \"px\";\r\n    else client.style.removeProperty(\"widht\");\r\n    if (jdata.instructionSize.height >= 0)\r\n      client.style.height = jdata.instructionSize.height + \"px\";\r\n    else client.style.removeProperty(\"height\");\r\n\r\n    let width = 0;\r\n    let height = 0;\r\n    const childNodes = client.childNodes;\r\n    for (let i = childNodes.length - 1; i >= 0; i--) {\r\n      const child = childNodes[i] as HTMLElement;\r\n      const style = window.getComputedStyle(child);\r\n      width = Math.max(\r\n        width,\r\n        child.offsetLeft +\r\n          child.offsetWidth +\r\n          parseInt(style.marginRight as string)\r\n      );\r\n      height = Math.max(\r\n        height,\r\n        child.offsetTop +\r\n          child.offsetHeight +\r\n          parseInt(style.marginBottom as string)\r\n      );\r\n    }\r\n\r\n    const clientWidth = this.getClientWidth();\r\n    const clientHeight = this.getClientHeight();\r\n\r\n    //client.style.position = \"absolute\";\r\n\r\n    if (\r\n      (jdata.instructionSize.width !== -1 && width > clientWidth) ||\r\n      (jdata.instructionSize.height !== -1 && height > clientHeight) ||\r\n      (jdata.instructionSize.width === -1 && width !== clientWidth) ||\r\n      (jdata.instructionSize.height === -1 && height !== clientHeight)\r\n    ) {\r\n      this.setClientSize(width, height);\r\n      // console.log(\"0 %d/%d %d/%d\", width, clientWidth, height, clientHeight);\r\n      // this.setClientSize(width, height);\r\n      // const clientWidth2 = this.getClientWidth();\r\n      // const clientHeight2 = this.getClientHeight();\r\n      //  console.log(\"1 %d/%d %d/%d\", width, clientWidth2, height, clientHeight2);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag true: false:\r\n   * @memberof Window\r\n   */\r\n  public onLayout(flag: boolean): void {\r\n    if (flag || this.JData.redraw) {\r\n      const JData = this.JData;\r\n      if (this.isOverlap()) {\r\n        const pwidth = window.innerWidth;\r\n        const pheight = window.innerHeight;\r\n        if (JData.width > pwidth) JData.width = pwidth;\r\n        if (JData.height > pheight) JData.height = pheight;\r\n\r\n        if (JData.x < 0) JData.x = 0;\r\n        if (JData.y < 0) JData.y = 0;\r\n        if (JData.x + JData.width > pwidth) JData.x = pwidth - JData.width;\r\n        if (JData.y + JData.height > pheight) JData.y = pheight - JData.height;\r\n      }\r\n\r\n      //this.onMeasure(false); //\r\n      if (this.hNode.dataset.jwfStat == \"maximize\") {\r\n        this.setPos(0, 0);\r\n        this.setSize(this.getParentWidth(), this.getParentHeight());\r\n      }\r\n\r\n      this.hNode.style.left = this.JData.x + \"px\";\r\n      this.hNode.style.top = this.JData.y + \"px\";\r\n      this.hNode.style.width = this.JData.width + \"px\";\r\n      this.hNode.style.height = this.JData.height + \"px\";\r\n      flag = true;\r\n      this.callEvent(\"layout\");\r\n    }\r\n\r\n    let client = this.getClient();\r\n    let nodes: JNode[] = [];\r\n    for (let i = 0; i < client.childNodes.length; i++) {\r\n      let node = client.childNodes[i] as HTMLElement | JNode;\r\n      if (\"Jwf\" in node && node.dataset && node.dataset.jwf === \"Window\")\r\n        nodes.push(node);\r\n    }\r\n    let count = nodes.length;\r\n\r\n    //\r\n    nodes.sort(function(anode: JNode, bnode: JNode): number {\r\n      const priority: { [key: string]: number } = {\r\n        top: 10,\r\n        bottom: 10,\r\n        left: 8,\r\n        right: 8,\r\n        client: 5\r\n      };\r\n      const a = anode.Jwf.JData.style as string;\r\n      const b = bnode.Jwf.JData.style as string;\r\n      return priority[b] - priority[a];\r\n    });\r\n    //let retry;\r\n    //do {\r\n    //retry = false;\r\n    const padding = this.JData.padding;\r\n    let width = this.getClientWidth();\r\n    let height = this.getClientHeight();\r\n    let x1 = padding.x1;\r\n    let y1 = padding.y1;\r\n    let x2 = x1 + width;\r\n    let y2 = y1 + height;\r\n\r\n    for (let i = 0; i < count; i++) {\r\n      let child: JNode = nodes[i];\r\n      let win = child.Jwf;\r\n      if (child.dataset.visible === \"false\") continue;\r\n\r\n      const jdata = win.JData;\r\n      const margin = jdata.margin;\r\n      let px1 = x1 + margin.x1;\r\n      let py1 = y1 + margin.y1;\r\n      let px2 = x2 - margin.x2;\r\n      let py2 = y2 - margin.y2;\r\n      let width = -1;\r\n      let height = -1;\r\n      switch (jdata.style) {\r\n        case \"top\":\r\n          width = px2 - px1;\r\n          win.setPos(px1, py1);\r\n          win.setWidth(width);\r\n          y1 += win.getHeight() + margin.y1 + margin.y2;\r\n          break;\r\n        case \"bottom\":\r\n          width = px2 - px1;\r\n          win.setPos(px1, py2 - win.getHeight());\r\n          win.setWidth(width);\r\n          y2 = py2 - win.getHeight() - margin.y1;\r\n          break;\r\n        case \"left\":\r\n          height = y2 - y1;\r\n          win.setPos(px1, py1);\r\n          win.setHeight(height);\r\n          x1 += win.getWidth() + margin.x1 + margin.x2;\r\n          break;\r\n        case \"right\":\r\n          height = py2 - py1;\r\n          win.setPos(px2 - win.getWidth(), py1);\r\n          win.setHeight(height);\r\n          x2 = px2 - win.getWidth() - margin.x2;\r\n          break;\r\n        case \"client\":\r\n          width = px2 - px1;\r\n          height = py2 - py1;\r\n          win.setPos(px1, py1);\r\n          win.setSize(width, height);\r\n          break;\r\n      }\r\n      jdata.instructionSize = { width, height };\r\n      win.onMeasure(false);\r\n      //if (win.onMeasure(false)) retry = true;\r\n      win.onLayout(flag);\r\n    }\r\n    //} while (retry);\r\n    this.orderSort(client);\r\n    if (this.JData.redraw || flag) this.callEvent(\"layouted\");\r\n    this.JData.redraw = false;\r\n  }\r\n  private orderSort(client: HTMLElement): boolean {\r\n    let nodes: JNode[] = [];\r\n    for (let i = 0; i < client.childNodes.length; i++) {\r\n      let node = client.childNodes[i] as HTMLElement | JNode;\r\n      if (\"Jwf\" in node && node.dataset && node.dataset.jwf === \"Window\")\r\n        nodes.push(node);\r\n    }\r\n    //\r\n    nodes.sort(function(anode: JNode, bnode: JNode): number {\r\n      const a = anode.Jwf.JData;\r\n      const b = bnode.Jwf.JData;\r\n      if (a.orderTop) return 1;\r\n      if (b.orderTop) return -1;\r\n      let layer = a.orderLayer - b.orderLayer;\r\n      if (layer) return layer;\r\n      const aIndex = anode.style.zIndex ? parseInt(anode.style.zIndex) : 0;\r\n      const bIndex = bnode.style.zIndex ? parseInt(bnode.style.zIndex) : 0;\r\n      const aOrder = anode.dataset.order === \"true\" ? 10000 : 0;\r\n      const bOrder = bnode.dataset.order === \"true\" ? 10000 : 0;\r\n      return aIndex + aOrder - (bIndex + bOrder);\r\n    });\r\n    let flag = false;\r\n    //Z\r\n    for (let i = 0; i < nodes.length; i++) {\r\n      const index = i.toString();\r\n      const node = nodes[i];\r\n      node.dataset.order = \"\";\r\n      if (node.style.zIndex !== index) {\r\n        flag = true;\r\n        node.style.zIndex = index;\r\n      }\r\n    }\r\n    //\r\n    if (flag) this.layout();\r\n    return flag;\r\n  }\r\n  /**\r\n   */\r\n   *\r\n   * @param {boolean} flag true: false:\r\n   * @memberof Window\r\n   */\r\n  public show(flag: boolean): void {\r\n    if (flag == null || flag) {\r\n      this.hNode.style.zIndex = \"10000\";\r\n      this.JData.reshow = true;\r\n    } else {\r\n      this.hNode.style.visibility = \"hidden\";\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} [flag] \r\n   * @memberof Window\r\n   */\r\n  public foreground(flag?: boolean): void {\r\n    if (this.JData.noActive) return;\r\n    //\r\n    let activeNodes = new Set<HTMLElement>();\r\n    let p = this.hNode;\r\n    do {\r\n      if ((flag || flag == null) && p.dataset) {\r\n        activeNodes.add(p);\r\n        p.dataset.jwfActive = \"true\";\r\n        p.dataset.order = \"true\";\r\n        if (p.Jwf) p.Jwf.callEvent(\"active\", { active: true });\r\n      }\r\n      this.orderSort(p);\r\n    } while ((p = p.parentNode as JNode));\r\n\r\n    if (flag || flag == null) {\r\n      var activeWindows = document.querySelectorAll(\r\n        '[data-jwf=\"Window\"][data-jwf-active=\"true\"]'\r\n      );\r\n      for (let i = 0, l = activeWindows.length; i < l; i++) {\r\n        let w = activeWindows[i] as JNode;\r\n        if (!activeNodes.has(w)) {\r\n          w.dataset.jwfActive = \"false\";\r\n          w.Jwf.callEvent(\"active\", { active: false });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof Window\r\n   */\r\n  public setScroll(flag: boolean): void {\r\n    this.getClient().style.overflow = flag ? \"auto\" : \"hidden\";\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {boolean}\r\n   * @memberof Window\r\n   */\r\n  public isScroll(): boolean {\r\n    return this.getClient().style.overflow === \"auto\";\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof Window\r\n   */\r\n  public close(): void {\r\n    const that = this;\r\n    function animationEnd(this: HTMLElement): void {\r\n      let nodes: NodeListOf<JNode> = this.querySelectorAll(\r\n        '[data-jwf=\"Window\"]'\r\n      );\r\n      let count = nodes.length;\r\n      for (let i = 0; i < count; i++) {\r\n        nodes[i].Jwf.layout();\r\n      }\r\n      if (this.parentNode) this.parentNode.removeChild(this);\r\n      this.removeEventListener(\"animationend\", animationEnd);\r\n      //\r\n      const remoers = that.removers;\r\n      for (const remover of remoers) {\r\n        remover.remove();\r\n      }\r\n      that.callEvent(\"closed\");\r\n    }\r\n    const animation = this.JData.animationEnable\r\n      ? this.JData.animation[\"close\"]\r\n      : null;\r\n    if (animation) {\r\n      this.hNode.addEventListener(\"animationend\", animationEnd);\r\n      this.hNode.style.animation = animation;\r\n    } else {\r\n      animationEnd.bind(this.hNode)();\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} name \r\n   * @param {string} value \r\n   * @memberof Window\r\n   */\r\n  public setAnimation(name: string, value: string): void {\r\n    this.JData.animation[name] = value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getAbsX(): number {\r\n    let px = this.JData.x;\r\n    let parent: BaseView | null = this;\r\n    while ((parent = parent.getParent())) {\r\n      px += this.getClient().offsetLeft + parent.getClientX() + parent.JData.x;\r\n    }\r\n    return px;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getAbsY(): number {\r\n    var py = this.JData.y;\r\n    var parent: BaseView | null = this;\r\n    while ((parent = parent.getParent())) {\r\n      py += this.getClient().offsetTop + parent.getClientX() + parent.JData.y;\r\n    }\r\n    return py;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {HTMLElement}\r\n   * @memberof Window\r\n   */\r\n  public getClient(): HTMLElement {\r\n    return this.JData.clientArea as HTMLElement;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getClientX(): number {\r\n    return this.JData.padding.x1;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public getClientY(): number {\r\n    return this.JData.padding.y1;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} width\r\n   * @param {number} height\r\n   * @memberof Window\r\n   */\r\n  public setClientSize(width: number, height: number): void {\r\n    this.setSize(\r\n      width +\r\n        this.JData.frameSize * 2 +\r\n        this.JData.padding.x1 +\r\n        this.JData.padding.x2,\r\n      height +\r\n        this.JData.frameSize * 2 +\r\n        this.JData.padding.y1 +\r\n        this.JData.padding.y2 +\r\n        this.JData.titleSize\r\n    );\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} width\r\n   * @memberof Window\r\n   */\r\n  public setClientWidth(width: number): void {\r\n    this.setWidth(\r\n      width +\r\n        this.JData.frameSize * 2 +\r\n        this.JData.padding.x1 +\r\n        this.JData.padding.x2\r\n    );\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} height\r\n   * @memberof Window\r\n   */\r\n  public setClientHeight(height: number): void {\r\n    this.setWidth(\r\n      height +\r\n        this.JData.frameSize * 2 +\r\n        this.JData.padding.y1 +\r\n        this.JData.padding.y2 +\r\n        this.JData.titleSize\r\n    );\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {number}\r\n   * @memberof Window\r\n   */\r\n  public getClientWidth(): number {\r\n    return (\r\n      this.getWidth() -\r\n      this.JData.frameSize * 2 -\r\n      this.JData.padding.x1 -\r\n      this.JData.padding.x2\r\n    );\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {number}\r\n   * @memberof Window\r\n   */\r\n  public getClientHeight(): number {\r\n    return (\r\n      this.getHeight() -\r\n      this.JData.frameSize * 2 -\r\n      this.JData.padding.y1 -\r\n      this.JData.padding.y2 -\r\n      this.JData.titleSize\r\n    );\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {BaseView} child \r\n   * @param {('left' | 'right' | 'top' | 'bottom' | 'client' | null)} [style] \r\n   * @memberof Window\r\n   */\r\n  public addFrameChild(\r\n    child: BaseView,\r\n    style?: \"left\" | \"right\" | \"top\" | \"bottom\" | \"client\" | null\r\n  ): void {\r\n    const frame = this.getNearFrame();\r\n    if (frame) frame.addChild(child, style);\r\n  }\r\n  public addChild(\r\n    child: BaseView,\r\n    style?: \"left\" | \"right\" | \"top\" | \"bottom\" | \"client\" | null\r\n  ): void {\r\n    if (style) child.setChildStyle(style);\r\n    child.JData.parent = this;\r\n    this.getClient().appendChild(child.hNode);\r\n    this.layout();\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {('left' | 'right' | 'top' | 'bottom' | 'client' | null)} style \r\n   * @memberof Window\r\n   */\r\n  public setChildStyle(\r\n    style: \"left\" | \"right\" | \"top\" | \"bottom\" | \"client\" | null\r\n  ): void {\r\n    this.JData.style = style;\r\n    let parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof Window\r\n   */\r\n  public removeChildAll(): void {\r\n    var client = this.getClient();\r\n    var childList = client.childNodes;\r\n    for (var i = childList.length - 1; i >= 0; i--) {\r\n      var child = childList[i] as JNode;\r\n      if (child.dataset.jwf === \"Window\") {\r\n        child.Jwf.JData.parent = null;\r\n        client.removeChild(child);\r\n      }\r\n    }\r\n    this.layout();\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {BaseView} child\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public removeChild(child: BaseView): void {\r\n    if (child.getParent() !== this) return;\r\n    child.JData.parent = null;\r\n    this.getClient().removeChild(child.hNode);\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof Window\r\n   */\r\n  public isAutoSize(): boolean {\r\n    return this.getClient().dataset.scale === \"auto\";\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} scale\r\n   * @memberof Window\r\n   */\r\n  public setAutoSize(scale: boolean): void {\r\n    this.getClient().dataset.scale = scale ? \"auto\" : \"\";\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} title\r\n   * @memberof Window\r\n   */\r\n  public setTitle(title: string): void {\r\n    if (this.hNode.childNodes[9]) {\r\n      this.hNode.childNodes[9].childNodes[0].textContent = title;\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {string}\r\n   * @memberof Window\r\n   */\r\n  public getTitle(): string {\r\n    if (this.hNode.childNodes[9]) {\r\n      return this.hNode.childNodes[9].childNodes[0].textContent || \"\";\r\n    }\r\n    return \"\";\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof Window\r\n   */\r\n  public setMaximize(flag: boolean): void {\r\n    let that = this;\r\n    function animationEnd(this: HTMLElement): void {\r\n      this.style.minWidth = null;\r\n      this.style.minHeight = that.JData.titleSize + \"px\";\r\n      this.removeEventListener(\"animationend\", animationEnd);\r\n    }\r\n    if (this.hNode.dataset.jwfStat != \"maximize\") {\r\n      this.JData.normalX = this.JData.x;\r\n      this.JData.normalY = this.JData.y;\r\n      this.JData.normalWidth = this.JData.width;\r\n      this.JData.normalHeight = this.JData.height;\r\n      this.hNode.dataset.jwfStat = \"maximize\";\r\n      this.hNode.style.minWidth = this.JData.width + \"px\";\r\n      this.hNode.style.minHeight = this.JData.height + \"px\";\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"maximize\"]\r\n        : \"\";\r\n      this.hNode.style.animation = animation;\r\n      if (animation) this.hNode.addEventListener(\"animationend\", animationEnd);\r\n      else animationEnd.bind(this.hNode)();\r\n    } else {\r\n      this.JData.x = this.JData.normalX;\r\n      this.JData.y = this.JData.normalY;\r\n      this.JData.width = this.JData.normalWidth;\r\n      this.JData.height = this.JData.normalHeight;\r\n      this.hNode.dataset.jwfStat = \"normal\";\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"maxrestore\"]\r\n        : \"\";\r\n      this.hNode.style.animation = animation;\r\n    }\r\n    if (flag) {\r\n      let icon = this.hNode.querySelector(\r\n        \"*>[data-jwf-type=title]>[data-jwf-type=icon][data-jwf-kind=max]\"\r\n      ) as HTMLElement;\r\n      if (icon) icon.dataset.jwfKind = \"normal\";\r\n    } else {\r\n      let icon = this.hNode.querySelector(\r\n        \"*>[data-jwf-type=title]>[data-jwf-type=icon][data-jwf-kind=normal]\"\r\n      ) as HTMLElement;\r\n      if (icon) icon.dataset.jwfKind = \"max\";\r\n    }\r\n\r\n    this.layout();\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof Window\r\n   */\r\n  public setMinimize(flag: boolean): void {\r\n    var that = this;\r\n    this.hNode.addEventListener(\"animationend\", function(): void {\r\n      that.layout();\r\n    });\r\n    if (this.hNode.dataset.jwfStat != \"minimize\") {\r\n      //client.style.animation=\"Jwfminimize 0.2s ease 0s 1 forwards\"\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"minimize\"]\r\n        : \"\";\r\n      this.hNode.style.animation = animation;\r\n      this.hNode.dataset.jwfStat = \"minimize\";\r\n    } else {\r\n      //client.style.animation=\"Jwfrestore 0.2s ease 0s 1 backwards\"\r\n      const animation = this.JData.animationEnable\r\n        ? this.JData.animation[\"restore\"]\r\n        : \"\";\r\n      this.hNode.style.animation = animation;\r\n      this.hNode.dataset.jwfStat = \"normal\";\r\n    }\r\n    if (flag) {\r\n      let icon = this.hNode.querySelector(\r\n        \"*>[data-jwf-type=title]>[data-jwf-type=icon][data-jwf-kind=min]\"\r\n      ) as HTMLElement;\r\n      icon.dataset.jwfKind = \"restore\";\r\n    } else {\r\n      let icon = this.hNode.querySelector(\r\n        \"*>[data-jwf-type=title]>[data-jwf-type=icon][data-jwf-kind=restore]\"\r\n      ) as HTMLElement;\r\n      icon.dataset.jwfKind = \"min\";\r\n    }\r\n    this.JData.minimize = flag;\r\n    this.layout();\r\n  }\r\n}\r\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (useSourceMap) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item, useSourceMap);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \"{\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join('');\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery) {\n    if (typeof modules === 'string') {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, '']];\n    }\n\n    var alreadyImportedModules = {};\n\n    for (var i = 0; i < this.length; i++) {\n      // eslint-disable-next-line prefer-destructuring\n      var id = this[i][0];\n\n      if (id != null) {\n        alreadyImportedModules[id] = true;\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = modules[_i]; // skip already imported module\n      // this implementation is not 100% perfect for weird media query combinations\n      // when a module is imported multiple times with different media queries.\n      // I hope this will never occur (Hey this way we have smaller bundles)\n\n      if (item[0] == null || !alreadyImportedModules[item[0]]) {\n        if (mediaQuery && !item[2]) {\n          item[2] = mediaQuery;\n        } else if (mediaQuery) {\n          item[2] = \"(\".concat(item[2], \") and (\").concat(mediaQuery, \")\");\n        }\n\n        list.push(item);\n      }\n    }\n  };\n\n  return list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n  var content = item[1] || ''; // eslint-disable-next-line prefer-destructuring\n\n  var cssMapping = item[3];\n\n  if (!cssMapping) {\n    return content;\n  }\n\n  if (useSourceMap && typeof btoa === 'function') {\n    var sourceMapping = toComment(cssMapping);\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot).concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n  }\n\n  return [content].join('\\n');\n} // Adapted from convert-source-map (MIT)\n\n\nfunction toComment(sourceMap) {\n  // eslint-disable-next-line no-undef\n  var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n  var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n  return \"/*# \".concat(data, \" */\");\n}","\"use strict\";\n\nvar stylesInDom = {};\n\nvar isOldIE = function isOldIE() {\n  var memo;\n  return function memorize() {\n    if (typeof memo === 'undefined') {\n      // Test for IE <= 9 as proposed by Browserhacks\n      // @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n      // Tests for existence of standard globals is to allow style-loader\n      // to operate correctly into non-standard environments\n      // @see https://github.com/webpack-contrib/style-loader/issues/177\n      memo = Boolean(window && document && document.all && !window.atob);\n    }\n\n    return memo;\n  };\n}();\n\nvar getTarget = function getTarget() {\n  var memo = {};\n  return function memorize(target) {\n    if (typeof memo[target] === 'undefined') {\n      var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n      if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n        try {\n          // This will throw an exception if access to iframe is blocked\n          // due to cross-origin restrictions\n          styleTarget = styleTarget.contentDocument.head;\n        } catch (e) {\n          // istanbul ignore next\n          styleTarget = null;\n        }\n      }\n\n      memo[target] = styleTarget;\n    }\n\n    return memo[target];\n  };\n}();\n\nfunction listToStyles(list, options) {\n  var styles = [];\n  var newStyles = {};\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var css = item[1];\n    var media = item[2];\n    var sourceMap = item[3];\n    var part = {\n      css: css,\n      media: media,\n      sourceMap: sourceMap\n    };\n\n    if (!newStyles[id]) {\n      styles.push(newStyles[id] = {\n        id: id,\n        parts: [part]\n      });\n    } else {\n      newStyles[id].parts.push(part);\n    }\n  }\n\n  return styles;\n}\n\nfunction addStylesToDom(styles, options) {\n  for (var i = 0; i < styles.length; i++) {\n    var item = styles[i];\n    var domStyle = stylesInDom[item.id];\n    var j = 0;\n\n    if (domStyle) {\n      domStyle.refs++;\n\n      for (; j < domStyle.parts.length; j++) {\n        domStyle.parts[j](item.parts[j]);\n      }\n\n      for (; j < item.parts.length; j++) {\n        domStyle.parts.push(addStyle(item.parts[j], options));\n      }\n    } else {\n      var parts = [];\n\n      for (; j < item.parts.length; j++) {\n        parts.push(addStyle(item.parts[j], options));\n      }\n\n      stylesInDom[item.id] = {\n        id: item.id,\n        refs: 1,\n        parts: parts\n      };\n    }\n  }\n}\n\nfunction insertStyleElement(options) {\n  var style = document.createElement('style');\n\n  if (typeof options.attributes.nonce === 'undefined') {\n    var nonce = typeof __webpack_nonce__ !== 'undefined' ? __webpack_nonce__ : null;\n\n    if (nonce) {\n      options.attributes.nonce = nonce;\n    }\n  }\n\n  Object.keys(options.attributes).forEach(function (key) {\n    style.setAttribute(key, options.attributes[key]);\n  });\n\n  if (typeof options.insert === 'function') {\n    options.insert(style);\n  } else {\n    var target = getTarget(options.insert || 'head');\n\n    if (!target) {\n      throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n    }\n\n    target.appendChild(style);\n  }\n\n  return style;\n}\n\nfunction removeStyleElement(style) {\n  // istanbul ignore if\n  if (style.parentNode === null) {\n    return false;\n  }\n\n  style.parentNode.removeChild(style);\n}\n/* istanbul ignore next  */\n\n\nvar replaceText = function replaceText() {\n  var textStore = [];\n  return function replace(index, replacement) {\n    textStore[index] = replacement;\n    return textStore.filter(Boolean).join('\\n');\n  };\n}();\n\nfunction applyToSingletonTag(style, index, remove, obj) {\n  var css = remove ? '' : obj.css; // For old IE\n\n  /* istanbul ignore if  */\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = replaceText(index, css);\n  } else {\n    var cssNode = document.createTextNode(css);\n    var childNodes = style.childNodes;\n\n    if (childNodes[index]) {\n      style.removeChild(childNodes[index]);\n    }\n\n    if (childNodes.length) {\n      style.insertBefore(cssNode, childNodes[index]);\n    } else {\n      style.appendChild(cssNode);\n    }\n  }\n}\n\nfunction applyToTag(style, options, obj) {\n  var css = obj.css;\n  var media = obj.media;\n  var sourceMap = obj.sourceMap;\n\n  if (media) {\n    style.setAttribute('media', media);\n  }\n\n  if (sourceMap && btoa) {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    while (style.firstChild) {\n      style.removeChild(style.firstChild);\n    }\n\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar singleton = null;\nvar singletonCounter = 0;\n\nfunction addStyle(obj, options) {\n  var style;\n  var update;\n  var remove;\n\n  if (options.singleton) {\n    var styleIndex = singletonCounter++;\n    style = singleton || (singleton = insertStyleElement(options));\n    update = applyToSingletonTag.bind(null, style, styleIndex, false);\n    remove = applyToSingletonTag.bind(null, style, styleIndex, true);\n  } else {\n    style = insertStyleElement(options);\n    update = applyToTag.bind(null, style, options);\n\n    remove = function remove() {\n      removeStyleElement(style);\n    };\n  }\n\n  update(obj);\n  return function updateStyle(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap) {\n        return;\n      }\n\n      update(obj = newObj);\n    } else {\n      remove();\n    }\n  };\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  options.attributes = typeof options.attributes === 'object' ? options.attributes : {}; // Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n  // tags it will allow on a page\n\n  if (!options.singleton && typeof options.singleton !== 'boolean') {\n    options.singleton = isOldIE();\n  }\n\n  var styles = listToStyles(list, options);\n  addStylesToDom(styles, options);\n  return function update(newList) {\n    var mayRemove = [];\n\n    for (var i = 0; i < styles.length; i++) {\n      var item = styles[i];\n      var domStyle = stylesInDom[item.id];\n\n      if (domStyle) {\n        domStyle.refs--;\n        mayRemove.push(domStyle);\n      }\n    }\n\n    if (newList) {\n      var newStyles = listToStyles(newList, options);\n      addStylesToDom(newStyles, options);\n    }\n\n    for (var _i = 0; _i < mayRemove.length; _i++) {\n      var _domStyle = mayRemove[_i];\n\n      if (_domStyle.refs === 0) {\n        for (var j = 0; j < _domStyle.parts.length; j++) {\n          _domStyle.parts[j]();\n        }\n\n        delete stylesInDom[_domStyle.id];\n      }\n    }\n  };\n};","export function Sleep(timeout: number): Promise<void> {\r\n  return new Promise((resolv): void => {\r\n    setTimeout((): void => {\r\n      resolv();\r\n    }, timeout);\r\n  });\r\n}\r\nexport class TimerProc {\r\n  private proc: () => void;\r\n  private handle?: number;\r\n  private timeout: number;\r\n  public constructor(proc: () => void, timeout: number) {\r\n    this.proc = proc;\r\n    this.timeout = timeout;\r\n  }\r\n  public call(timeout?: number): void {\r\n    if (this.handle) {\r\n      window.clearTimeout(this.handle);\r\n    }\r\n    this.handle = window.setTimeout((): void => {\r\n      this.handle = 0;\r\n      this.proc();\r\n    }, timeout || this.timeout);\r\n  }\r\n}\r\n//---------------------------------------\r\n//\r\n//\t\tformat,\r\n//\t\t\r\nexport function sprintf(format: string, ...args: unknown[]): string {\r\n  if (args[0] == null) return \"\";\r\n  let paramIndex = 0;\r\n  let dest = \"\";\r\n  for (let i = 0; format.charAt(i); i++) {\r\n    if (format.charAt(i) == \"%\") {\r\n      let flagZero = false;\r\n      let num = 0;\r\n      i++;\r\n      if (format.charAt(i) == \"0\") {\r\n        flagZero = true;\r\n        i++;\r\n      }\r\n      for (; format.charAt(i) >= \"0\" && format.charAt(i) <= \"9\"; i++) {\r\n        num *= 10;\r\n        num += parseInt(format.charAt(i));\r\n      }\r\n      let work;\r\n      let len;\r\n      switch (format.charAt(i)) {\r\n        case \"s\":\r\n          work = String(args[paramIndex++]);\r\n          len = num - work.length;\r\n          dest += work;\r\n          len = num - work.length;\r\n          if (len > 0) {\r\n            for (let j = 0; j < len; j++) dest += \" \";\r\n          }\r\n          break;\r\n        case \"d\":\r\n          work = String(args[paramIndex++]);\r\n          len = num - work.length;\r\n          if (len > 0) {\r\n            let j;\r\n            let c;\r\n            if (flagZero) c = \"0\";\r\n            else c = \" \";\r\n            for (j = 0; j < len; j++) dest += c;\r\n          }\r\n          dest += work;\r\n      }\r\n    } else dest += format.charAt(i);\r\n  }\r\n  return dest;\r\n}\r\n","import { WINDOW_PARAMS, BaseView, WINDOW_EVENT_MAP } from \"./BaseView\";\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class FrameWindow\r\n * @extends {BaseView}\r\n */\r\nexport class FrameWindow<\r\n  T extends WINDOW_EVENT_MAP = WINDOW_EVENT_MAP\r\n> extends BaseView<T> {\r\n  public constructor(param?: WINDOW_PARAMS) {\r\n    let p = { frame: true, title: true, layer: 10 };\r\n    if (param) Object.assign(p, param);\r\n    super(p);\r\n    this.setOverlap(true);\r\n  }\r\n}\r\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\nimport { BaseView, WINDOW_EVENT_MAP } from \"./BaseView\";\r\nimport \"../scss/Button.scss\";\r\n\r\nexport interface BUTTON_EVENT_ITEM_CLICK {\r\n  event: Event;\r\n  button: Button | ImageButton;\r\n}\r\nexport interface ButtonEventMap extends WINDOW_EVENT_MAP {\r\n  buttonClick: [BUTTON_EVENT_ITEM_CLICK];\r\n  buttonDblClick: [BUTTON_EVENT_ITEM_CLICK];\r\n}\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class Button\r\n * @extends {BaseView}\r\n */\r\nexport class Button extends BaseView<ButtonEventMap> {\r\n  private nodeText: HTMLElement;\r\n  private nodeValue: unknown;\r\n  /**\r\n   *Creates an instance of Button.\r\n   * @param {string} [text] \r\n   * @memberof Button\r\n   */\r\n  public constructor(\r\n    ...params:\r\n      | [string]\r\n      | [string, unknown]\r\n      | [{ label?: string; value?: unknown; event?: () => void }]\r\n  ) {\r\n    super();\r\n    this.setAutoSize(true);\r\n    this.setJwfStyle(\"Button\");\r\n\r\n    //this.setAlign('center')\r\n\r\n    const button = document.createElement(\"div\");\r\n    this.getClient().appendChild(button);\r\n    button.tabIndex = 0;\r\n\r\n    let nodeText = document.createElement(\"span\");\r\n    button.appendChild(nodeText);\r\n    this.nodeText = nodeText;\r\n\r\n    if (params) {\r\n      if (typeof params[0] === \"string\") {\r\n        this.setText(params[0] as string);\r\n        this.nodeValue = params[1];\r\n      } else {\r\n        const p = params[0];\r\n        if (p.label) {\r\n          this.setText(p.label);\r\n        }\r\n        this.nodeValue = p.value;\r\n        if (p.event) {\r\n          button.addEventListener(\"click\", p.event);\r\n        }\r\n      }\r\n    }\r\n\r\n    button.addEventListener(\"keypress\", (e): void => {\r\n      if (e.keyCode !== 13)\r\n        this.callEvent(\"submit\", {\r\n          event: e,\r\n          button: this\r\n        });\r\n    });\r\n    button.addEventListener(\"click\", (e): void => {\r\n      this.callEvent(\"buttonClick\", {\r\n        event: e,\r\n        button: this\r\n      });\r\n      this.callEvent(\"submit\", {\r\n        event: e,\r\n        button: this\r\n      });\r\n    });\r\n    button.addEventListener(\"dblclick\", (e): void => {\r\n      this.callEvent(\"buttonDblClick\", {\r\n        event: e,\r\n        button: this\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} text\r\n   * @memberof Button\r\n   */\r\n  public setText(text: string): void {\r\n    let nodeText = this.nodeText;\r\n    nodeText.textContent = text;\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {string}\r\n   * @memberof Button\r\n   */\r\n  public getText(): string | null {\r\n    return this.nodeText.textContent;\r\n  }\r\n  public setAlign(style: string): void {\r\n    let node = this.getClient();\r\n    node.style.justifyContent = style;\r\n  }\r\n  public getValue(): unknown {\r\n    return this.nodeValue;\r\n  }\r\n}\r\nexport class ImageButton extends BaseView<ButtonEventMap> {\r\n  private nodeImg: HTMLImageElement;\r\n  /**\r\n   *Creates an instance of Button.\r\n   * @param {string} [text] \r\n   * @memberof Button\r\n   */\r\n  public constructor(image: string, alt?: string) {\r\n    super();\r\n    this.setWidth(64);\r\n    //this.setAutoSize(true)\r\n    this.setJwfStyle(\"Button\");\r\n    //this.setAlign('center')\r\n\r\n    const button = document.createElement(\"div\");\r\n    this.getClient().appendChild(button);\r\n    button.tabIndex = 0;\r\n\r\n    let nodeImg = document.createElement(\"img\");\r\n    button.appendChild(nodeImg);\r\n    this.nodeImg = nodeImg;\r\n    if (alt) nodeImg.alt = alt;\r\n    nodeImg.addEventListener(\"load\", (): void => {\r\n      this.layout();\r\n    });\r\n    nodeImg.src = image;\r\n\r\n    button.addEventListener(\"keypress\", (e): void => {\r\n      if (e.keyCode !== 13) this.callEvent(\"submit\", { event: e });\r\n    });\r\n    button.addEventListener(\"click\", (e): void => {\r\n      this.callEvent(\"buttonClick\", { event: e, button: this });\r\n      this.callEvent(\"submit\", { event: e });\r\n    });\r\n    button.addEventListener(\"dblclick\", (e): void => {\r\n      this.callEvent(\"buttonDblClick\", {\r\n        event: e,\r\n        button: this\r\n      });\r\n    });\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} text\r\n   * @memberof Button\r\n   */\r\n  public setText(text: string): void {\r\n    this.nodeImg.alt = text;\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {string}\r\n   * @memberof Button\r\n   */\r\n  public getText(): string {\r\n    return this.nodeImg.alt;\r\n  }\r\n  public setAlign(style: string): void {\r\n    let node = this.getClient();\r\n    node.style.justifyContent = style;\r\n  }\r\n}\r\n","\"use strict\";\n\nmodule.exports = function (url, needQuotes) {\n  // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n  url = url.__esModule ? url.default : url;\n\n  if (typeof url !== 'string') {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n'), \"\\\"\");\n  }\n\n  return url;\n};","import { MovePoint, JNode, Point } from \"./BaseView\";\r\n\r\n/**\r\n * \r\n *\r\n * @export\r\n * @class Jwf\r\n */\r\nexport class WindowManager {\r\n  public static nodeX: number;\r\n  public static nodeY: number;\r\n  public static baseX: number;\r\n  public static baseY: number;\r\n  public static nodeWidth: number;\r\n  public static nodeHeight: number;\r\n  public static moveNode: HTMLElement | null = null;\r\n  public static frame: number | null = null;\r\n  private static layoutForced: boolean;\r\n  private static layoutHandler: number | null;\r\n\r\n  /**\r\n   * \r\n   * @param  {MouseEvent|TouchEvent} e\r\n   * @returns {Point} \r\n   */\r\n  public static getPos(e: MouseEvent | TouchEvent): Point {\r\n    let p: Point;\r\n    if (\r\n      (e as TouchEvent).targetTouches &&\r\n      (e as TouchEvent).targetTouches.length\r\n    ) {\r\n      let touch = (e as TouchEvent).targetTouches[0];\r\n      p = { x: touch.pageX, y: touch.pageY };\r\n    } else {\r\n      p = { x: (e as MouseEvent).clientX, y: (e as MouseEvent).clientY };\r\n    }\r\n    return p;\r\n  }\r\n  /**\r\n   * \r\n   *\r\n   * @static\r\n   * @param {HTMLElement} node\r\n   * @memberof Jwf\r\n   */\r\n  public static enableMove(node: HTMLElement): void {\r\n    function mouseDown(e: MouseEvent | TouchEvent): boolean {\r\n      if (WindowManager.moveNode == null) {\r\n        WindowManager.moveNode = node;\r\n        let p = WindowManager.getPos(e);\r\n        WindowManager.baseX = p.x;\r\n        WindowManager.baseY = p.y;\r\n        WindowManager.nodeX = node.offsetLeft;\r\n        WindowManager.nodeY = node.offsetTop;\r\n        WindowManager.nodeWidth = node.clientWidth;\r\n        WindowManager.nodeHeight = node.clientWidth;\r\n        e.preventDefault();\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n    node.addEventListener(\"touchstart\", mouseDown, { passive: false });\r\n    node.addEventListener(\"mousedown\", mouseDown);\r\n  }\r\n  /**\r\n   * \r\n   *\r\n   * @static\r\n   * @param {HTMLElement} node \r\n   * @param {string} ename \r\n   * @param {*} [params] event.params\r\n   * @memberof Jwf\r\n   */\r\n  public static callEvent(\r\n    node: HTMLElement,\r\n    ename: string,\r\n    params?: unknown\r\n  ): void {\r\n    node.dispatchEvent(WindowManager.createEvent(ename, params));\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @static\r\n   * @param {string} ename \r\n   * @param {*} [params] event.params\r\n   * @returns {Event} \r\n   * @memberof Jwf\r\n   */\r\n\r\n  private static createEvent(ename: string, params?: unknown): Event {\r\n    let event: CustomEvent & { params?: unknown };\r\n    try {\r\n      event = new CustomEvent(ename);\r\n    } catch (e) {\r\n      event = document.createEvent(\"CustomEvent\");\r\n      event.initCustomEvent(ename, false, false, null);\r\n    }\r\n    if (params) event.params = params;\r\n    return event;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @static\r\n   * @param {string} tagName \r\n   * @param {*} [params] \r\n   * @returns {HTMLElement} \r\n   * @memberof Jwf\r\n   */\r\n  public static createElement<K extends keyof HTMLElementTagNameMap>(\r\n    tagName: K,\r\n    params?: object\r\n  ): HTMLElementTagNameMap[K] {\r\n    let tag: HTMLElementTagNameMap[K] = document.createElement(tagName);\r\n    if (params) {\r\n      for (let index in params) {\r\n        let p = params[index as keyof object];\r\n        if (typeof p == \"object\" && p) {\r\n          for (let index2 of Object.keys(p))\r\n            tag[index as keyof typeof tag][index2 as keyof object] =\r\n              p[index2 as keyof object];\r\n        } else\r\n          tag[index as keyof typeof tag] = p as typeof tag[keyof typeof tag];\r\n      }\r\n    }\r\n    return tag;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @static\r\n   * @param {boolean} flag\ttrue:Window false:Window\r\n   * @memberof Jwf\r\n   */\r\n  public static layout(flag: boolean): void {\r\n    WindowManager.layoutForced = WindowManager.layoutForced || flag;\r\n    if (!WindowManager.layoutHandler) {\r\n      //\r\n      WindowManager.layoutHandler = window.setTimeout(function(): void {\r\n        WindowManager.layoutHandler = null;\r\n        let nodes = document.querySelectorAll(\"[data-jwf=Window]\");\r\n        let count = nodes.length;\r\n        for (let i = 0; i < count; i++) {\r\n          let node = nodes[i] as JNode;\r\n          if (!node.Jwf.getParent())\r\n            node.Jwf.onMeasure(WindowManager.layoutForced);\r\n          node.Jwf.onLayout(WindowManager.layoutForced);\r\n        }\r\n\r\n        WindowManager.layoutForced = false;\r\n      }, 0);\r\n    }\r\n  }\r\n}\r\nfunction deactive(): void {\r\n  let activeWindows = document.querySelectorAll(\r\n    '[data-jwf=\"Window\"][data-jwf-active=\"true\"]'\r\n  );\r\n  for (let i = 0, l = activeWindows.length; i < l; i++) {\r\n    let w = activeWindows[i] as JNode;\r\n    w.dataset.jwfActive = \"false\";\r\n    w.Jwf.callEvent(\"active\", { active: false });\r\n  }\r\n}\r\nfunction mouseDown(e: MouseEvent | TouchEvent): boolean {\r\n  let node = e.target as HTMLElement;\r\n  do {\r\n    if (node.dataset && node.dataset.jwf === \"Window\") {\r\n      return true;\r\n    }\r\n  } while ((node = node.parentNode as HTMLElement));\r\n  deactive();\r\n  return false;\r\n}\r\n\r\n//\r\nfunction mouseUp(): void {\r\n  WindowManager.moveNode = null;\r\n  WindowManager.frame = null;\r\n}\r\n//\r\nfunction mouseMove(e: MouseEvent | TouchEvent): void {\r\n  if (WindowManager.moveNode) {\r\n    let node = WindowManager.moveNode; //\r\n    let p = WindowManager.getPos(e); //\r\n    let params: MovePoint = {\r\n      event: e,\r\n      nodePoint: { x: WindowManager.nodeX, y: WindowManager.nodeY },\r\n      basePoint: { x: WindowManager.baseX, y: WindowManager.baseY },\r\n      nowPoint: { x: p.x, y: p.y },\r\n      nodeSize: { width: node.clientWidth, height: node.clientHeight }\r\n    };\r\n    WindowManager.callEvent(node, \"move\", params);\r\n  }\r\n}\r\n//\r\naddEventListener(\"resize\", function(): void {\r\n  WindowManager.layout(true);\r\n});\r\naddEventListener(\"mouseup\", mouseUp, false);\r\naddEventListener(\"touchend\", mouseUp, { passive: false });\r\naddEventListener(\"mousemove\", mouseMove, false);\r\naddEventListener(\"touchmove\", mouseMove, { passive: false });\r\naddEventListener(\"touchstart\", mouseDown, { passive: false });\r\naddEventListener(\"mousedown\", mouseDown, false);\r\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\nimport { BaseView, WINDOW_PARAMS, WINDOW_EVENT_MAP } from \"./BaseView\";\r\nimport \"../scss/CalendarView.scss\";\r\nimport * as Libs from \"./Libs\";\r\nexport interface CALENDARVIEW_EVENT_DATE_CLICK {\r\n  date: Date;\r\n}\r\nexport interface CalendarViewEventMap extends WINDOW_EVENT_MAP {\r\n  date: [CALENDARVIEW_EVENT_DATE_CLICK];\r\n}\r\nexport class CalendarView extends BaseView<CalendarViewEventMap> {\r\n  private titleCell: HTMLTableDataCellElement;\r\n  private dateCells: (HTMLTableDataCellElement & { date?: Date })[];\r\n  private calendarDate: Date = new Date();\r\n  private startDate: Date | null = null;\r\n  private endDate: Date | null = null;\r\n  private holidays: { [keys: string]: string } = {};\r\n  private selects: { [keys: string]: boolean } = {};\r\n  public constructor(p?: WINDOW_PARAMS) {\r\n    super(p);\r\n    this.setJwfStyle(\"CalendarView\");\r\n    const weekString = \"\";\r\n\r\n    const client = this.getClient();\r\n    const table = document.createElement(\"table\");\r\n    client.appendChild(table);\r\n\r\n    //\r\n    const titleLine = table.insertRow(-1);\r\n    const prev = titleLine.insertCell(-1);\r\n    prev.innerText = \"\";\r\n    prev.addEventListener(\"click\", (): void => {\r\n      this.moveMonth(-1);\r\n    });\r\n    const titleCell = titleLine.insertCell(-1);\r\n    this.titleCell = titleCell;\r\n    titleCell.colSpan = 5;\r\n\r\n    const next = titleLine.insertCell(-1);\r\n    next.innerText = \"\";\r\n    next.addEventListener(\"click\", (): void => {\r\n      this.moveMonth(1);\r\n    });\r\n    this.dateCells = [];\r\n\r\n    const that = this;\r\n    for (let j = 0; j < 7; j++) {\r\n      const line = table.insertRow(-1);\r\n      for (let i = 0; i < 7; i++) {\r\n        const cell = line.insertCell(-1);\r\n        if (j == 0) cell.innerHTML = weekString.substr(i, 1);\r\n        else {\r\n          cell.addEventListener(\"click\", function(): void {\r\n            that.onCellClick(this as HTMLDivElement);\r\n          });\r\n          this.dateCells.push(cell);\r\n\r\n          const day = document.createElement(\"div\");\r\n          cell.appendChild(day);\r\n          const dayText = document.createElement(\"div\");\r\n          cell.appendChild(dayText);\r\n          const select = document.createElement(\"div\");\r\n          cell.appendChild(select);\r\n        }\r\n      }\r\n    }\r\n    this.redraw();\r\n  }\r\n  public moveMonth(month: number): void {\r\n    var date = this.calendarDate;\r\n    this.calendarDate = new Date(date.getFullYear(), date.getMonth() + month);\r\n    this.redraw();\r\n  }\r\n\r\n  public redraw(): void {\r\n    const calendarDate = this.calendarDate;\r\n    const date = new Date(\r\n      calendarDate.getFullYear(),\r\n      calendarDate.getMonth(),\r\n      1\r\n    );\r\n    this.titleCell.innerText = Libs.sprintf(\r\n      \"%d%d\",\r\n      date.getFullYear(),\r\n      date.getMonth() + 1\r\n    );\r\n\r\n    date.setDate(date.getDate() - date.getDay());\r\n    const dateStart = new Date(date.getTime());\r\n    this.startDate = dateStart;\r\n    this.endDate = new Date(\r\n      dateStart.getFullYear(),\r\n      dateStart.getMonth(),\r\n      dateStart.getDate() + 42\r\n    );\r\n\r\n    const dateCells = this.dateCells;\r\n    for (let i = 0; i < 42; i++) {\r\n      const cell = dateCells[i];\r\n      const day = cell.childNodes[0] as HTMLDivElement;\r\n      const text = cell.childNodes[1] as HTMLDivElement;\r\n      day.innerText = date.getDate().toString();\r\n      cell.date = new Date(date);\r\n      cell.dataset.select = this.selects[date.toDateString()] ? \"true\" : \"\";\r\n\r\n      const holiday = this.holidays[date.toDateString()];\r\n      if (holiday) {\r\n        text.style.visibility = \"visible\";\r\n        text.innerText = holiday;\r\n      } else {\r\n        text.style.visibility = \"hidden\";\r\n        text.innerText = \"\";\r\n      }\r\n      date.setDate(date.getDate() + 1);\r\n    }\r\n    //getHoliday(dateStart);\r\n  }\r\n  public setHoliday(date: Date, text: string): void {\r\n    this.holidays[date.toDateString()] = text;\r\n  }\r\n  public setSelect(date: Date, value: boolean = true): void {\r\n    if (value) this.selects[date.toDateString()] = true;\r\n    else delete this.selects;\r\n    this.redraw();\r\n  }\r\n  private onCellClick(cell: HTMLDivElement & { date?: Date }): void {\r\n    if (cell.date) this.callEvent(\"date\", { date: cell.date });\r\n  }\r\n}\r\n","import { BaseView } from \"./BaseView\";\r\nimport \"../scss/Label.scss\";\r\nexport class Label extends BaseView {\r\n  private node:HTMLElement;\r\n  private nodeText: HTMLSpanElement;\r\n  public constructor(text?: string) {\r\n    super();\r\n    this.setJwfStyle(\"Label\");\r\n    const client = this.getClient();\r\n    const node = document.createElement(\"div\");\r\n    this.node = node;\r\n    client.appendChild(node);\r\n\r\n    let nodeText = document.createElement(\"span\");\r\n    node.appendChild(nodeText);\r\n    this.nodeText = nodeText;\r\n\r\n    if (text) this.setText(text);\r\n\r\n    this.setAutoSize(true);\r\n  }\r\n  public setFontSize(size: number): void {\r\n    let nodeText = this.nodeText;\r\n    nodeText.style.fontSize = size + \"px\";\r\n    this.layout();\r\n  }\r\n  public setText(text: string): void {\r\n    let nodeText = this.nodeText;\r\n    nodeText.innerText = text;\r\n  }\r\n  public getText(): string | null {\r\n    return this.nodeText.innerText;\r\n  }\r\n  public getTextNode(): HTMLSpanElement {\r\n    return this.nodeText;\r\n  }\r\n  public setAlign(style: string): void {\r\n    let node = this.node;\r\n    node.style.justifyContent = style;\r\n  }\r\n}\r\n","import { BaseView, MovePoint, JWFEvent } from \"./BaseView\";\r\nimport \"../scss/Splitter.scss\";\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class Splitter\r\n * @extends {BaseView}\r\n */\r\n\r\nexport declare var SPLIT_TYPE: \"ns\" | \"sn\" | \"ew\" | \"we\";\r\n\r\nexport class Splitter extends BaseView {\r\n  private drawerMode = false;\r\n  private drawerModeNow = false;\r\n  private splitterMoving = false;\r\n  private splitterThick = 10;\r\n  private splitterPos = 100;\r\n  private splitterType: string = \"we\";\r\n  private splitter: BaseView;\r\n  private childList: BaseView[] = [];\r\n  private drawerWidth = 0;\r\n  private pos = 0;\r\n  private type: typeof SPLIT_TYPE = \"we\";\r\n  private menuIcon: HTMLDivElement;\r\n\r\n  /**\r\n   *Creates an instance of Splitter.\r\n   * @param {number} [splitPos]\r\n   * @param {('ns'|'sn'|'ew'|'we')} [splitType] \r\n   * @memberof Splitter\r\n   */\r\n  public constructor(splitPos?: number, splitType?: typeof SPLIT_TYPE) {\r\n    super();\r\n    this.setJwfStyle(\"SplitterView\");\r\n    this.setSize(640, 480);\r\n    if (splitPos != null) this.splitterPos = splitPos;\r\n    if (splitType != null) {\r\n      this.splitterType = splitType;\r\n    }\r\n    const client = this.getClient();\r\n    client.dataset.splitterType = this.splitterType;\r\n    this.childList = [new BaseView(), new BaseView()];\r\n    super.addChild(this.childList[0]);\r\n    super.addChild(this.childList[1]);\r\n\r\n    const icon = document.createElement(\"div\");\r\n    this.menuIcon = icon;\r\n    icon.dataset.kind = \"SplitterMenu\";\r\n    icon.style.display = \"none\";\r\n    client.appendChild(icon);\r\n    icon.addEventListener(\"click\", (): void => {\r\n      const child0 = this.childList[0];\r\n      this.childList[0].addEventListener(\"visibled\", (e): void => {\r\n        if (e.visible) {\r\n          this.splitter.setVisible(true);\r\n        }\r\n      });\r\n\r\n      child0.setVisible(true);\r\n      child0.active(true);\r\n      icon.style.display = \"none\";\r\n    });\r\n\r\n    let splitter = new BaseView();\r\n    this.splitter = splitter;\r\n    splitter.setJwfStyle(\"Splitter\");\r\n    splitter.setOrderTop(true);\r\n    splitter.setNoActive(true);\r\n    super.addChild(splitter);\r\n\r\n    let handle: number | null = null;\r\n    splitter.getNode().addEventListener(\"move\", (e: JWFEvent): void => {\r\n      let p = e.params as MovePoint;\r\n      let width = this.getClientWidth();\r\n      let height = this.getClientHeight();\r\n      let splitterThick = this.splitterThick;\r\n      let x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n      let y = p.nodePoint.y + p.nowPoint.y - p.basePoint.y;\r\n      switch (this.getClient().dataset.splitterType) {\r\n        case \"ns\":\r\n          this.splitterPos = y;\r\n          break;\r\n        case \"sn\":\r\n          this.splitterPos = height - (y + splitterThick);\r\n          break;\r\n        case \"we\":\r\n          this.splitterPos = x;\r\n          break;\r\n        case \"ew\":\r\n          this.splitterPos = width - (x + splitterThick);\r\n          break;\r\n      }\r\n      this.splitterMoving = true;\r\n      if (handle) window.clearTimeout(handle);\r\n      handle = window.setTimeout((): void => {\r\n        handle = null;\r\n        this.splitterMoving = false;\r\n        this.layout();\r\n      }, 2000);\r\n      this.layout();\r\n    });\r\n    this.addEventListener(\"layout\", (): void => {\r\n      const child0 = this.childList[0];\r\n      const child1 = this.childList[1];\r\n\r\n      const active = (e: { active: boolean }): void => {\r\n        if (!e.active) {\r\n          splitter.setVisible(false);\r\n          child0.setVisible(false);\r\n          this.menuIcon.style.display = \"block\";\r\n        }\r\n      };\r\n\r\n      //\r\n      if (this.drawerMode && !this.splitterMoving) {\r\n        const type = this.splitterType;\r\n        const dsize = this.drawerWidth + this.splitterPos;\r\n        const ssize =\r\n          type === \"ew\" || type === \"we\" ? this.getWidth() : this.getHeight();\r\n        if (!this.drawerModeNow) {\r\n          if (dsize > 0 && ssize < dsize) {\r\n            this.drawerModeNow = true;\r\n            child1.setChildStyle(\"client\");\r\n            child0.setOrderTop(true);\r\n            this.splitter.setVisible(false);\r\n            child0.addEventListener(\"active\", active);\r\n            child0.setAnimation(\r\n              \"show\",\r\n              this.splitterType + \"DrawerShow 0.5s ease 0s normal\"\r\n            );\r\n            child0.setAnimation(\r\n              \"close\",\r\n              this.splitterType + \"DrawerClose 0.5s ease 0s normal\"\r\n            );\r\n            child0.active();\r\n            child0.setVisible(false);\r\n            this.menuIcon.style.display = \"block\";\r\n          }\r\n        } else {\r\n          if (dsize > 0 && ssize >= dsize) {\r\n            this.drawerModeNow = false;\r\n            child0.removeEventListener(\"active\", active);\r\n            child1.setChildStyle(null);\r\n            child0.setOrderTop(false);\r\n            child0.setVisible(true);\r\n            this.splitter.setVisible(true);\r\n            this.menuIcon.style.display = \"none\";\r\n          }\r\n        }\r\n      }\r\n\r\n      let width = this.getClientWidth();\r\n      let height = this.getClientHeight();\r\n      let splitterThick = this.splitterThick;\r\n      let splitterPos = this.splitterPos;\r\n      let p;\r\n\r\n      if (splitterPos < 0) splitterPos = 0;\r\n      switch (this.splitterType) {\r\n        case \"we\":\r\n          if (splitterPos >= width - splitterThick)\r\n            splitterPos = width - splitterThick - 1;\r\n          splitter.setSize(splitterThick, height);\r\n          splitter.setPos(splitterPos, 0);\r\n          child0.setPos(0, 0);\r\n          child0.setSize(splitter.getPosX(), height);\r\n          child1.setPos(splitterPos + splitterThick, 0);\r\n          child1.setSize(width - (splitterPos + splitterThick), height);\r\n          break;\r\n        case \"ew\":\r\n          if (splitterPos >= width - splitterThick)\r\n            splitterPos = width - splitterThick - 1;\r\n          p = width - splitterPos - splitterThick;\r\n          splitter.setSize(splitterThick, height);\r\n          splitter.setPos(p, 0);\r\n          child1.setPos(0, 0);\r\n          child1.setSize(p, height);\r\n          child0.setPos(p + splitterThick, 0);\r\n          child0.setSize(splitterPos, height);\r\n          break;\r\n        case \"ns\":\r\n          if (splitterPos >= height - splitterThick)\r\n            splitterPos = height - splitterThick - 1;\r\n          splitter.setSize(width, splitterThick);\r\n          splitter.setPos(0, splitterPos);\r\n          child0.setPos(0, 0);\r\n          child0.setSize(width, splitterPos);\r\n          child1.setPos(0, splitterPos + splitterThick);\r\n          child1.setSize(width, height - (splitterPos + splitterThick));\r\n          break;\r\n        case \"sn\":\r\n          if (splitterPos >= height - splitterThick)\r\n            splitterPos = height - splitterThick - 1;\r\n          splitter.setSize(width, splitterThick);\r\n          p = height - splitterPos - splitterThick;\r\n          splitter.setPos(0, p);\r\n          child1.setPos(0, 0);\r\n          child1.setSize(width, p);\r\n          child0.setPos(0, p + splitterThick);\r\n          child0.setSize(width, splitterPos);\r\n          break;\r\n      }\r\n      this.splitterPos = splitterPos;\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @param {BaseView} child \r\n   * @param {('left' | 'right' | 'top' | 'bottom' | 'client' | null)} [arrgement] \r\n   * @memberof Splitter\r\n   */\r\n  public addChild(\r\n    index: number | BaseView,\r\n    child: BaseView | unknown,\r\n    arrgement?: \"left\" | \"right\" | \"top\" | \"bottom\" | \"client\" | null\r\n  ): void {\r\n    if (child instanceof BaseView)\r\n      this.childList[index as number].addChild(child, arrgement);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @param {BaseView} [child] \r\n   * @memberof Splitter\r\n   */\r\n  public removeChild(index: number | BaseView, child?: BaseView): void {\r\n    if (child == null) return;\r\n    this.childList[index as number].removeChild(child);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} [index] \r\n   * @memberof Splitter\r\n   */\r\n  public removeChildAll(index?: number): void {\r\n    if (index == null) return;\r\n    this.childList[index].removeChildAll();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} pos\r\n   * @param {('ns'|'sn'|'ew'|'we')} [type]\r\n   * @memberof Splitter\r\n   */\r\n  public setSplitterPos(pos: number, type?: \"ns\" | \"sn\" | \"ew\" | \"we\"): void {\r\n    if (pos != null) this.pos = pos;\r\n    if (type) {\r\n      this.type = type;\r\n    }\r\n\r\n    this.splitterPos = this.pos;\r\n    if (this.type != null) {\r\n      this.getClient().dataset.splitterType = this.type;\r\n      this.splitterType = this.type;\r\n    }\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag true: false:\r\n   * @param {number} [size] \r\n   * @memberof Splitter\r\n   */\r\n  public setOverlay(flag: boolean, size?: number): void {\r\n    if (flag) {\r\n      this.drawerMode = true;\r\n      this.drawerWidth = size != null ? size : 0;\r\n    }\r\n    this.layout();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @returns {BaseView} \r\n   * @memberof Splitter\r\n   */\r\n  public getChild(index: number): BaseView {\r\n    return this.childList[index];\r\n  }\r\n}\r\n","import { BaseView } from \"./BaseView\";\r\nimport \"../scss/TextBox.scss\";\r\n/**\r\n *\r\n *\r\n * @class TextBox\r\n * @extends {JSW.Window}\r\n */\r\nexport class TextBox extends BaseView {\r\n  private nodeLabel: HTMLElement;\r\n  private nodeText: HTMLInputElement;\r\n  public constructor(params?: {\r\n    text?: string;\r\n    label?: string;\r\n    type?: string;\r\n    image?: string;\r\n  }) {\r\n    super();\r\n\r\n    this.setJwfStyle(\"TextBox\");\r\n    this.setAutoSize(true);\r\n    let client = this.getClient();\r\n    let node = document.createElement(\"div\");\r\n    client.appendChild(node);\r\n\r\n    let img = document.createElement(\"img\");\r\n    if (params && params.image) img.src = params.image;\r\n\r\n    node.appendChild(img);\r\n\r\n    let textArea = document.createElement(\"div\");\r\n    node.appendChild(textArea);\r\n\r\n    let nodeLabel = document.createElement(\"div\");\r\n    textArea.appendChild(nodeLabel);\r\n    this.nodeLabel = nodeLabel;\r\n    if (params && params.label) nodeLabel.textContent = params.label;\r\n\r\n    let nodeText = document.createElement(\"input\");\r\n    if (params && params.type) nodeText.type = params.type;\r\n    textArea.appendChild(nodeText);\r\n    this.nodeText = nodeText;\r\n\r\n    nodeText.addEventListener(\"keydown\", (e): void => {\r\n      if (e.keyCode == 13) this.callEvent(\"enter\", e);\r\n    });\r\n\r\n    if (params && params.text) this.setText(params.text);\r\n  }\r\n\r\n  public setText(text: string): void {\r\n    let nodeText = this.nodeText;\r\n    nodeText.value = text;\r\n    const parent = this.getParent();\r\n    if (parent) parent.layout();\r\n  }\r\n  public getText(): string {\r\n    return this.nodeText.value;\r\n  }\r\n  public setLabel(text: string): void {\r\n    let node = this.nodeLabel;\r\n    node.textContent = text;\r\n  }\r\n  public getLabel(): string {\r\n    return this.nodeLabel.textContent || \"\";\r\n  }\r\n  public getTextNode(): HTMLInputElement {\r\n    return this.nodeText;\r\n  }\r\n  public focus(): void {\r\n    this.nodeText.focus();\r\n  }\r\n}\r\n","import { BaseView, WINDOW_PARAMS, WINDOW_EVENT_MAP } from \"./BaseView\";\r\nimport \"../scss/TextArea.scss\";\r\n\r\nexport interface CustomEvent extends WINDOW_EVENT_MAP {\r\n  updateText: [];\r\n}\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class TextArea\r\n * @extends {BaseView}\r\n */\r\nexport class TextArea extends BaseView<CustomEvent> {\r\n  private textArea: HTMLTextAreaElement;\r\n  public constructor(params?: WINDOW_PARAMS) {\r\n    super(params);\r\n    this.setJwfStyle(\"TextArea\");\r\n    const client = this.getClient();\r\n    const textArea = document.createElement(\"textarea\");\r\n    this.textArea = textArea;\r\n    client.appendChild(textArea);\r\n    textArea.addEventListener(\"input\", (): void => {\r\n      this.callEvent(\"updateText\");\r\n    });\r\n  }\r\n  public setText(text: string): void {\r\n    this.textArea.value = text;\r\n  }\r\n  public getText(): string {\r\n    return this.textArea.value;\r\n  }\r\n}\r\n","/**\r\n *\r\n *\r\n */\r\n\r\nimport \"../scss/ColorPickerView.scss\";\r\nimport { WINDOW_EVENT_MAP, BaseView } from \"./BaseView\";\r\nimport { FrameWindow } from \"./FrameWindow\";\r\nimport { sprintf } from \"./Libs\";\r\n\r\nexport interface Color {\r\n  r: number;\r\n  g: number;\r\n  b: number;\r\n}\r\ninterface CustomEvent extends WINDOW_EVENT_MAP {\r\n  color: [Color];\r\n}\r\n\r\nexport class ColorView extends BaseView<CustomEvent> {\r\n  private triangleCanvas: HTMLCanvasElement;\r\n  private trianglePoinst: { x: number; y: number }[] = [];\r\n  private targetSize = 40;\r\n  private triangleSize: number = 1;\r\n  private canvasTarget: HTMLCanvasElement;\r\n  private canvasLevel: HTMLCanvasElement;\r\n  private color = { r: 255, g: 255, b: 255 };\r\n  private color2 = { r: 255, g: 255, b: 255 };\r\n  public constructor() {\r\n    super();\r\n    this.setSize(300, 300);\r\n    const client = this.getClient();\r\n    const targetSize = this.targetSize;\r\n\r\n    const triangleCanvas = document.createElement(\"canvas\");\r\n    this.triangleCanvas = triangleCanvas;\r\n    triangleCanvas.style.position = \"absolute\";\r\n    client.appendChild(triangleCanvas);\r\n\r\n    triangleCanvas.addEventListener(\"mousemove\", e => {\r\n      if (e.buttons == 0) return;\r\n      this.setTriangleColor(e);\r\n    });\r\n\r\n    const canvasTarget = document.createElement(\"canvas\");\r\n    this.canvasTarget = canvasTarget;\r\n    canvasTarget.style.position = \"absolute\";\r\n    client.appendChild(canvasTarget);\r\n\r\n    canvasTarget.addEventListener(\"click\", () => {\r\n      this.callEvent(\"color\", this.color2);\r\n    });\r\n\r\n    const canvasLevel = document.createElement(\"canvas\");\r\n    this.canvasLevel = canvasLevel;\r\n    canvasLevel.style.position = \"absolute\";\r\n    client.appendChild(canvasLevel);\r\n\r\n    canvasLevel.addEventListener(\"mousemove\", e => {\r\n      if (e.buttons == 0 || !(e.target instanceof HTMLCanvasElement)) return;\r\n      const rect = e.target.getBoundingClientRect();\r\n      const mouseY = e.clientY - rect.top;\r\n      const color = this.color;\r\n      const color2 = this.color2;\r\n      color2.r = this.getColorLevel(mouseY, color.r);\r\n      color2.g = this.getColorLevel(mouseY, color.g);\r\n      color2.b = this.getColorLevel(mouseY, color.b);\r\n      this.setTarget();\r\n    });\r\n\r\n    this.addEventListener(\"layouted\", () => {\r\n      const width = this.getClientWidth();\r\n      const height = this.getClientHeight();\r\n\r\n      canvasTarget.width = targetSize;\r\n      canvasTarget.height = targetSize;\r\n\r\n      canvasLevel.style.top = targetSize + \"px\";\r\n      canvasLevel.width = targetSize;\r\n      canvasLevel.height = height - targetSize;\r\n      canvasLevel.style.marginRight = \"2px\";\r\n\r\n      triangleCanvas.style.left = targetSize + \"px\";\r\n      triangleCanvas.width = width - targetSize;\r\n      triangleCanvas.height = height;\r\n\r\n      this.drawTriangle();\r\n      this.setLevel();\r\n    });\r\n  }\r\n  private getColorLevel(py: number, color: number) {\r\n    const length = this.canvasLevel.height / 2;\r\n    const level = ((py - length) / length) * 1.1;\r\n    let value: number;\r\n    if (level < 0) {\r\n      value = Math.floor(255 * -level + color * (1 + level));\r\n    } else {\r\n      value = Math.floor(color * (1 - level));\r\n    }\r\n    if (value < 0) value = 0;\r\n    else if (value > 255) value = 255;\r\n    return value;\r\n  }\r\n  private setTriangleColor(e: MouseEvent) {\r\n    if (!e.target) return;\r\n    const trianglePoinst = this.trianglePoinst;\r\n    const rect = (e.target as HTMLElement).getBoundingClientRect();\r\n    const mouseX = e.clientX - rect.left;\r\n    const mouseY = e.clientY - rect.top;\r\n    const r = this.getColor(\r\n      mouseX,\r\n      mouseY,\r\n      trianglePoinst[0].x,\r\n      trianglePoinst[0].y\r\n    );\r\n    const g = this.getColor(\r\n      mouseX,\r\n      mouseY,\r\n      trianglePoinst[1].x,\r\n      trianglePoinst[1].y\r\n    );\r\n    const b = this.getColor(\r\n      mouseX,\r\n      mouseY,\r\n      trianglePoinst[2].x,\r\n      trianglePoinst[2].y\r\n    );\r\n    this.setLevel(r, g, b);\r\n  }\r\n  private setTarget() {\r\n    const canvasTarget = this.canvasTarget;\r\n    const ctx = canvasTarget.getContext(\"2d\");\r\n    if (!ctx) return;\r\n    const color2 = this.color2;\r\n    ctx.fillStyle =\r\n      \"rgb(\" +\r\n      (255 - color2.r) +\r\n      \",\" +\r\n      (255 - color2.g) +\r\n      \",\" +\r\n      (255 - color2.b) +\r\n      \")\";\r\n    ctx.fillRect(0, 0, canvasTarget.width, canvasTarget.height);\r\n    ctx.fillStyle = \"rgb(\" + color2.r + \",\" + color2.g + \",\" + color2.b + \")\";\r\n    ctx.fillRect(2, 2, canvasTarget.width - 4, canvasTarget.height - 4);\r\n  }\r\n  private setLevel(r?: number, g?: number, b?: number) {\r\n    const color = this.color;\r\n    if (r === undefined || g === undefined || b === undefined) {\r\n      r = color.r;\r\n      g = color.g;\r\n      b = color.b;\r\n    } else {\r\n      this.color = { r, g, b };\r\n      this.color2 = { r, g, b };\r\n    }\r\n    const canvasLevel = this.canvasLevel;\r\n    const ctxLevel = canvasLevel.getContext(\"2d\");\r\n    if (!ctxLevel) return false;\r\n    const grad = ctxLevel.createLinearGradient(0, canvasLevel.height, 0, 0);\r\n    grad.addColorStop(0 + (1 - 1 / 1.1), \"rgb(0,0,0)\");\r\n    grad.addColorStop(0.5, \"rgb(\" + r + \",\" + g + \",\" + b + \")\");\r\n    grad.addColorStop(1 - (1 - 1 / 1.1), \"rgb(255,255,255)\");\r\n    ctxLevel.fillStyle = grad;\r\n    ctxLevel.fillRect(0, 0, canvasLevel.width, canvasLevel.height);\r\n\r\n    this.setTarget();\r\n  }\r\n  private getColor(px: number, py: number, cx: number, cy: number) {\r\n    let value = Math.floor(\r\n      (1 -\r\n        Math.sqrt(Math.pow(px - cx, 2) + Math.pow(py - cy, 2)) /\r\n          this.triangleSize) *\r\n        255 *\r\n        1.1\r\n    );\r\n    if (value < 0) value = 0;\r\n    else if (value > 255) value = 255;\r\n    return value;\r\n  }\r\n  private drawTriangle() {\r\n    const triangleCanvas = this.triangleCanvas;\r\n    const targetSize = this.targetSize;\r\n    //\r\n    let width = this.getClientWidth() - targetSize;\r\n    let height = this.getClientHeight();\r\n    //\r\n    triangleCanvas.width = width;\r\n    triangleCanvas.height = height;\r\n\r\n    const ctx = triangleCanvas.getContext(\"2d\");\r\n    if (!ctx) return;\r\n    ctx.clearRect(0, 0, width, height);\r\n    //\r\n    const triangle = Math.min(width, height) * 0.95;\r\n    this.triangleSize = triangle;\r\n    width = triangle;\r\n    height = triangle;\r\n\r\n    const x = (triangleCanvas.width - width) / 2;\r\n    const y = (triangleCanvas.height - height) / 2;\r\n    const trianglePoinst = [\r\n      { x: x + width / 2, y },\r\n      { x, y: y + height },\r\n      { x: x + width, y: y + height }\r\n    ];\r\n    this.trianglePoinst = trianglePoinst;\r\n    const color = [\r\n      [\"RGBA(255,0,0,255)\", \"RGBA(0,0,0,255)\"],\r\n      [\"RGBA(0,255,0,255)\", \"RGBA(0,0,0,255)\"],\r\n      [\"RGBA(0,0,255,255)\", \"RGBA(0,0,0,255)\"]\r\n    ];\r\n    ctx.globalCompositeOperation = \"lighter\";\r\n    for (let i = 0; i < 3; i++) {\r\n      const i0 = i % 3;\r\n      const i1 = (i + 1) % 3;\r\n      const i2 = (i + 2) % 3;\r\n      /*  */\r\n      const grad = ctx.createLinearGradient(\r\n        trianglePoinst[i0].x,\r\n        trianglePoinst[i0].y,\r\n        (trianglePoinst[i1].x + trianglePoinst[i2].x) / 2,\r\n        (trianglePoinst[i1].y + trianglePoinst[i2].y) / 2\r\n      );\r\n      grad.addColorStop(0, color[i][0]);\r\n      grad.addColorStop(1 / 1.1, color[i][1]);\r\n      ctx.fillStyle = grad;\r\n\r\n      ctx.beginPath();\r\n      ctx.moveTo(trianglePoinst[i0].x, trianglePoinst[i0].y);\r\n      ctx.lineTo(trianglePoinst[i1].x, trianglePoinst[i1].y);\r\n      ctx.lineTo(trianglePoinst[i2].x, trianglePoinst[i2].y);\r\n      ctx.closePath();\r\n      /*  */\r\n      ctx.fill();\r\n    }\r\n  }\r\n}\r\n\r\nexport class ColorPickerWindow extends FrameWindow<CustomEvent> {\r\n  private cell?: HTMLElement;\r\n  private colorsArea :HTMLElement;\r\n  private colorValues : Color[];\r\n  private inputs:HTMLInputElement[];\r\n  public getStrageName(name: string) {\r\n    return (location.hostname || \"\") + (location.pathname || \"\") + name;\r\n  }\r\n  public constructor() {\r\n    super();\r\n    this.setJwfStyle(\"ColorPickerWindow\");\r\n    this.setSize(400, 300);\r\n    this.setTitle(\"Color Picker\");\r\n    const colorView = new ColorView();\r\n    this.addChild(colorView, \"client\");\r\n\r\n    const colorValues = JSON.parse(\r\n      localStorage.getItem(this.getStrageName(\"Colors\")) || \"[]\"\r\n    );\r\n    this.colorValues = colorValues;\r\n    const colorSelector = new BaseView();\r\n    colorSelector.setJwfStyle(\"ColorSelector\");\r\n    colorSelector.setWidth(120);\r\n    this.addChild(colorSelector, \"left\");\r\n\r\n    const client = colorSelector.getClient();\r\n\r\n    const inputArea = document.createElement(\"div\");\r\n    let input = document.createElement(\"input\");\r\n    inputArea.appendChild(input);\r\n    input = document.createElement(\"input\");\r\n    inputArea.appendChild(input);\r\n    input = document.createElement(\"input\");\r\n    inputArea.appendChild(input);\r\n    client.appendChild(inputArea);\r\n    const inputs = (inputArea.childNodes as unknown) as HTMLInputElement[];\r\n    this.inputs = inputs;\r\n\r\n    const colorsArea = document.createElement(\"div\");\r\n    this.colorsArea = colorsArea;\r\n    colorsArea.dataset.type = \"colors\";\r\n    for (let i = 0; i < 40; i++) {\r\n      const cell = document.createElement(\"div\");\r\n      colorsArea.appendChild(cell);\r\n      const c = document.createElement(\"div\");\r\n      cell.appendChild(c);\r\n      if (colorValues[i]) c.style.backgroundColor = this.getRGB(colorValues[i]);\r\n      else c.style.backgroundColor = this.getRGB({r:255,g:255,b:255});\r\n\r\n      cell.addEventListener(\"click\", () => {\r\n        this.selectCell(i);\r\n        this.callEvent(\"color\",this.colorValues[i]);\r\n      });\r\n    }\r\n    client.appendChild(colorsArea);\r\n\r\n    this.selectCell(0);\r\n\r\n    colorView.addEventListener(\"color\", color => {\r\n      const cell = this.cell;\r\n      if(!cell)\r\n        return;\r\n      const c = cell.childNodes[0] as HTMLElement;\r\n      const index = cell.dataset.index as string;\r\n      colorValues[parseInt(index)] = color;\r\n      c.style.backgroundColor = this.getRGB(color);\r\n      localStorage.setItem(\r\n        this.getStrageName(\"Colors\"),\r\n        JSON.stringify(colorValues)\r\n      );\r\n      this.selectCell(parseInt(index));\r\n    });\r\n  }\r\n  public getRGB(color: Color) {\r\n    return sprintf(\"rgb(%d,%d,%d)\", color.r, color.g, color.b);\r\n  }\r\n  public selectCell(index: number) {\r\n    const colorsArea = this.colorsArea;\r\n    const cell = colorsArea.childNodes[index] as HTMLElement;\r\n    if(!cell)\r\n      return;\r\n    if(this.cell)\r\n      this.cell.dataset.active = \"false\";\r\n    cell.dataset.index = index.toString();\r\n    cell.dataset.active = \"true\";\r\n    this.cell = cell;\r\n\r\n    const color = this.colorValues[index];\r\n    const inputs = this.inputs;\r\n    if (color) {\r\n      inputs[0].value = color.r.toString();\r\n      inputs[1].value = color.g.toString();\r\n      inputs[2].value = color.b.toString();\r\n    } else {\r\n      inputs[0].value = \"255\";\r\n      inputs[1].value = \"255\";\r\n      inputs[2].value = \"255\";\r\n    }\r\n  }\r\n}\r\n","\r\nimport { Color, ColorPickerWindow } from \"../ColorPickerView\";\r\nimport { sprintf } from \"../Libs\";\r\n\r\nexport interface PanelCreateParam {\r\n  type?: string;\r\n  label: string;\r\n  value?: string | boolean | Color;\r\n  name?: string;\r\n  option?: {\r\n    label: string;\r\n    value?: string;\r\n  }[];\r\n  size?: number;\r\n  event?: (node?: HTMLElement,value?:unknown) => void;\r\n}\r\n\r\nexport class PanelControl {\r\n  public static setControlValue(\r\n    target: HTMLElement,\r\n    name: string,\r\n    value: string | number|boolean\r\n  ) {\r\n    const node = target.querySelector(`[name=\"${name}\"]`) as\r\n      | HTMLInputElement\r\n      | HTMLSelectElement;\r\n    if (!node) return;\r\n    if (node instanceof HTMLInputElement)\r\n      if (node.type === \"checkbox\") node.checked = !!value;\r\n    node.value = value.toString();\r\n  }\r\n  public static getControlValue(target: HTMLElement, name: string) {\r\n    const node = target.querySelector(`[name=\"${name}\"]`) as\r\n      | HTMLInputElement\r\n      | HTMLSelectElement;\r\n    if (!node) return null;\r\n    if (node instanceof HTMLInputElement)\r\n      if (node.type === \"checkbox\") return node.checked;\r\n    return node.value;\r\n  }\r\n  public static createControl(target: HTMLElement, param: PanelCreateParam) {\r\n    switch (param.type) {\r\n      default: {\r\n        let button = document.createElement(\"button\");\r\n        button.name = param.name || \"\";\r\n        button.innerText = param.label;\r\n        button.addEventListener(\"click\", () => {\r\n          if (param.event) param.event(button);\r\n        });\r\n        target.appendChild(button);\r\n        break;\r\n      }\r\n      case \"text\": {\r\n        const area = document.createElement(\"label\");\r\n        area.dataset.editControl = \"\";\r\n        target.appendChild(area);\r\n        const text = document.createTextNode(param.label);\r\n        area.appendChild(text);\r\n        break;\r\n      }\r\n      case \"check\":\r\n        {\r\n          const area = document.createElement(\"label\");\r\n          area.dataset.editControl = \"\";\r\n          target.appendChild(area);\r\n          const text = document.createTextNode(param.label);\r\n          area.appendChild(text);\r\n          let check = document.createElement(\"input\");\r\n          check.name = param.name || \"\";\r\n          check.type = \"checkbox\";\r\n          if (param.value) check.checked = !!param.value;\r\n          area.appendChild(check);\r\n        }\r\n        break;\r\n      case \"color\":\r\n        {\r\n          let button = document.createElement(\"button\");\r\n          button.name = param.name || \"\";\r\n          button.innerText = param.label;\r\n          target.appendChild(button);\r\n          let colorArea = document.createElement(\"div\");\r\n          colorArea.style.margin = \"0.2em\";\r\n          colorArea.style.width = \"1.5em\";\r\n          colorArea.style.height = \"1.5em\";\r\n          colorArea.style.userSelect = \"false\";\r\n          colorArea.style.border = \"solid 1px\";\r\n          target.appendChild(colorArea);\r\n\r\n          let value: Color = param.value as Color;\r\n          if (!value) value = { r: 255, g: 255, b: 255 };\r\n\r\n          const setColor = (color: Color) => {\r\n            colorArea.style.background = sprintf(\r\n              \"rgb(%d,%d,%d)\",\r\n              color.r,\r\n              color.g,\r\n              color.b\r\n            );\r\n          };\r\n\r\n          button.addEventListener(\"click\", () => {\r\n            const colorPicker = new ColorPickerWindow();\r\n            colorPicker.setPos();\r\n            colorPicker.addEventListener(\"color\", color => {\r\n              setColor(color);\r\n              value = color;\r\n            });\r\n          });\r\n          colorArea.addEventListener(\"click\", (e) => {\r\n            if(param.event)\r\n              param.event(colorArea,value);\r\n              e.preventDefault();\r\n          });\r\n          setColor(value);\r\n        }\r\n        break;\r\n      case \"input\": {\r\n        const area = document.createElement(\"label\");\r\n        area.dataset.editControl = \"\";\r\n        target.appendChild(area);\r\n        const text = document.createTextNode(param.label);\r\n        area.appendChild(text);\r\n        const input = document.createElement(\"input\");\r\n        input.name = param.name || \"\";\r\n        if (typeof param.value === \"string\") input.value = param.value;\r\n        if (param.size) input.size = param.size;\r\n        area.appendChild(input);\r\n        input.addEventListener(\"click\", () => {\r\n          if (param.event) param.event(input);\r\n        });\r\n        break;\r\n      }\r\n      case \"select\": {\r\n        const select = document.createElement(\"select\");\r\n        select.name = param.name || \"\";\r\n        //area.dataset.editControl = \"\";\r\n        target.appendChild(select);\r\n        const options = param.option;\r\n        if (options) {\r\n          for (const o of options) {\r\n            const option = document.createElement(\"option\");\r\n            option.label = o.label;\r\n            option.innerText = o.value || o.label;\r\n            select.appendChild(option);\r\n          }\r\n        }\r\n        select.addEventListener(\"change\", () => {\r\n          if (param.event) param.event(select);\r\n        });\r\n        break;\r\n      }\r\n    }\r\n  }\r\n}\r\n","// This file can be required in Browserify and Node.js for automatic polyfill\n// To use it:  require('es6-promise/auto');\n'use strict';\nmodule.exports = require('./').polyfill();\n","/*!\n * @overview es6-promise - a tiny implementation of Promises/A+.\n * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)\n * @license   Licensed under MIT license\n *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE\n * @version   v4.2.8+1e68dce6\n */\n","export function objectOrFunction(x) {\n  var type = typeof x;\n  return x !== null && (type === 'object' || type === 'function');\n}\n\nexport function isFunction(x) {\n  return typeof x === 'function';\n}\n\nexport function isMaybeThenable(x) {\n  return x !== null && typeof x === 'object';\n}\n\nvar _isArray = void 0;\nif (Array.isArray) {\n  _isArray = Array.isArray;\n} else {\n  _isArray = function (x) {\n    return Object.prototype.toString.call(x) === '[object Array]';\n  };\n}\n\nexport var isArray = _isArray;","var len = 0;\nvar vertxNext = void 0;\nvar customSchedulerFn = void 0;\n\nexport var asap = function asap(callback, arg) {\n  queue[len] = callback;\n  queue[len + 1] = arg;\n  len += 2;\n  if (len === 2) {\n    // If len is 2, that means that we need to schedule an async flush.\n    // If additional callbacks are queued before the queue is flushed, they\n    // will be processed by this flush that we are scheduling.\n    if (customSchedulerFn) {\n      customSchedulerFn(flush);\n    } else {\n      scheduleFlush();\n    }\n  }\n};\n\nexport function setScheduler(scheduleFn) {\n  customSchedulerFn = scheduleFn;\n}\n\nexport function setAsap(asapFn) {\n  asap = asapFn;\n}\n\nvar browserWindow = typeof window !== 'undefined' ? window : undefined;\nvar browserGlobal = browserWindow || {};\nvar BrowserMutationObserver = browserGlobal.MutationObserver || browserGlobal.WebKitMutationObserver;\nvar isNode = typeof self === 'undefined' && typeof process !== 'undefined' && {}.toString.call(process) === '[object process]';\n\n// test for web worker but not in IE10\nvar isWorker = typeof Uint8ClampedArray !== 'undefined' && typeof importScripts !== 'undefined' && typeof MessageChannel !== 'undefined';\n\n// node\nfunction useNextTick() {\n  // node version 0.10.x displays a deprecation warning when nextTick is used recursively\n  // see https://github.com/cujojs/when/issues/410 for details\n  return function () {\n    return process.nextTick(flush);\n  };\n}\n\n// vertx\nfunction useVertxTimer() {\n  if (typeof vertxNext !== 'undefined') {\n    return function () {\n      vertxNext(flush);\n    };\n  }\n\n  return useSetTimeout();\n}\n\nfunction useMutationObserver() {\n  var iterations = 0;\n  var observer = new BrowserMutationObserver(flush);\n  var node = document.createTextNode('');\n  observer.observe(node, { characterData: true });\n\n  return function () {\n    node.data = iterations = ++iterations % 2;\n  };\n}\n\n// web worker\nfunction useMessageChannel() {\n  var channel = new MessageChannel();\n  channel.port1.onmessage = flush;\n  return function () {\n    return channel.port2.postMessage(0);\n  };\n}\n\nfunction useSetTimeout() {\n  // Store setTimeout reference so es6-promise will be unaffected by\n  // other code modifying setTimeout (like sinon.useFakeTimers())\n  var globalSetTimeout = setTimeout;\n  return function () {\n    return globalSetTimeout(flush, 1);\n  };\n}\n\nvar queue = new Array(1000);\nfunction flush() {\n  for (var i = 0; i < len; i += 2) {\n    var callback = queue[i];\n    var arg = queue[i + 1];\n\n    callback(arg);\n\n    queue[i] = undefined;\n    queue[i + 1] = undefined;\n  }\n\n  len = 0;\n}\n\nfunction attemptVertx() {\n  try {\n    var vertx = Function('return this')().require('vertx');\n    vertxNext = vertx.runOnLoop || vertx.runOnContext;\n    return useVertxTimer();\n  } catch (e) {\n    return useSetTimeout();\n  }\n}\n\nvar scheduleFlush = void 0;\n// Decide what async method to use to triggering processing of queued callbacks:\nif (isNode) {\n  scheduleFlush = useNextTick();\n} else if (BrowserMutationObserver) {\n  scheduleFlush = useMutationObserver();\n} else if (isWorker) {\n  scheduleFlush = useMessageChannel();\n} else if (browserWindow === undefined && typeof require === 'function') {\n  scheduleFlush = attemptVertx();\n} else {\n  scheduleFlush = useSetTimeout();\n}","import { invokeCallback, subscribe, FULFILLED, REJECTED, noop, makePromise, PROMISE_ID } from './-internal';\n\nimport { asap } from './asap';\n\nexport default function then(onFulfillment, onRejection) {\n  var parent = this;\n\n  var child = new this.constructor(noop);\n\n  if (child[PROMISE_ID] === undefined) {\n    makePromise(child);\n  }\n\n  var _state = parent._state;\n\n\n  if (_state) {\n    var callback = arguments[_state - 1];\n    asap(function () {\n      return invokeCallback(_state, child, callback, parent._result);\n    });\n  } else {\n    subscribe(parent, child, onFulfillment, onRejection);\n  }\n\n  return child;\n}","import { noop, resolve as _resolve } from '../-internal';\n\n/**\n  `Promise.resolve` returns a promise that will become resolved with the\n  passed `value`. It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    resolve(1);\n  });\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.resolve(1);\n\n  promise.then(function(value){\n    // value === 1\n  });\n  ```\n\n  @method resolve\n  @static\n  @param {Any} value value that the returned promise will be resolved with\n  Useful for tooling.\n  @return {Promise} a promise that will become fulfilled with the given\n  `value`\n*/\nexport default function resolve(object) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (object && typeof object === 'object' && object.constructor === Constructor) {\n    return object;\n  }\n\n  var promise = new Constructor(noop);\n  _resolve(promise, object);\n  return promise;\n}","import { objectOrFunction, isFunction } from './utils';\n\nimport { asap } from './asap';\n\nimport originalThen from './then';\nimport originalResolve from './promise/resolve';\n\nexport var PROMISE_ID = Math.random().toString(36).substring(2);\n\nfunction noop() {}\n\nvar PENDING = void 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\n\nfunction selfFulfillment() {\n  return new TypeError(\"You cannot resolve a promise with itself\");\n}\n\nfunction cannotReturnOwn() {\n  return new TypeError('A promises callback cannot return that same promise.');\n}\n\nfunction tryThen(then, value, fulfillmentHandler, rejectionHandler) {\n  try {\n    then.call(value, fulfillmentHandler, rejectionHandler);\n  } catch (e) {\n    return e;\n  }\n}\n\nfunction handleForeignThenable(promise, thenable, then) {\n  asap(function (promise) {\n    var sealed = false;\n    var error = tryThen(then, thenable, function (value) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n      if (thenable !== value) {\n        resolve(promise, value);\n      } else {\n        fulfill(promise, value);\n      }\n    }, function (reason) {\n      if (sealed) {\n        return;\n      }\n      sealed = true;\n\n      reject(promise, reason);\n    }, 'Settle: ' + (promise._label || ' unknown promise'));\n\n    if (!sealed && error) {\n      sealed = true;\n      reject(promise, error);\n    }\n  }, promise);\n}\n\nfunction handleOwnThenable(promise, thenable) {\n  if (thenable._state === FULFILLED) {\n    fulfill(promise, thenable._result);\n  } else if (thenable._state === REJECTED) {\n    reject(promise, thenable._result);\n  } else {\n    subscribe(thenable, undefined, function (value) {\n      return resolve(promise, value);\n    }, function (reason) {\n      return reject(promise, reason);\n    });\n  }\n}\n\nfunction handleMaybeThenable(promise, maybeThenable, then) {\n  if (maybeThenable.constructor === promise.constructor && then === originalThen && maybeThenable.constructor.resolve === originalResolve) {\n    handleOwnThenable(promise, maybeThenable);\n  } else {\n    if (then === undefined) {\n      fulfill(promise, maybeThenable);\n    } else if (isFunction(then)) {\n      handleForeignThenable(promise, maybeThenable, then);\n    } else {\n      fulfill(promise, maybeThenable);\n    }\n  }\n}\n\nfunction resolve(promise, value) {\n  if (promise === value) {\n    reject(promise, selfFulfillment());\n  } else if (objectOrFunction(value)) {\n    var then = void 0;\n    try {\n      then = value.then;\n    } catch (error) {\n      reject(promise, error);\n      return;\n    }\n    handleMaybeThenable(promise, value, then);\n  } else {\n    fulfill(promise, value);\n  }\n}\n\nfunction publishRejection(promise) {\n  if (promise._onerror) {\n    promise._onerror(promise._result);\n  }\n\n  publish(promise);\n}\n\nfunction fulfill(promise, value) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n\n  promise._result = value;\n  promise._state = FULFILLED;\n\n  if (promise._subscribers.length !== 0) {\n    asap(publish, promise);\n  }\n}\n\nfunction reject(promise, reason) {\n  if (promise._state !== PENDING) {\n    return;\n  }\n  promise._state = REJECTED;\n  promise._result = reason;\n\n  asap(publishRejection, promise);\n}\n\nfunction subscribe(parent, child, onFulfillment, onRejection) {\n  var _subscribers = parent._subscribers;\n  var length = _subscribers.length;\n\n\n  parent._onerror = null;\n\n  _subscribers[length] = child;\n  _subscribers[length + FULFILLED] = onFulfillment;\n  _subscribers[length + REJECTED] = onRejection;\n\n  if (length === 0 && parent._state) {\n    asap(publish, parent);\n  }\n}\n\nfunction publish(promise) {\n  var subscribers = promise._subscribers;\n  var settled = promise._state;\n\n  if (subscribers.length === 0) {\n    return;\n  }\n\n  var child = void 0,\n      callback = void 0,\n      detail = promise._result;\n\n  for (var i = 0; i < subscribers.length; i += 3) {\n    child = subscribers[i];\n    callback = subscribers[i + settled];\n\n    if (child) {\n      invokeCallback(settled, child, callback, detail);\n    } else {\n      callback(detail);\n    }\n  }\n\n  promise._subscribers.length = 0;\n}\n\nfunction invokeCallback(settled, promise, callback, detail) {\n  var hasCallback = isFunction(callback),\n      value = void 0,\n      error = void 0,\n      succeeded = true;\n\n  if (hasCallback) {\n    try {\n      value = callback(detail);\n    } catch (e) {\n      succeeded = false;\n      error = e;\n    }\n\n    if (promise === value) {\n      reject(promise, cannotReturnOwn());\n      return;\n    }\n  } else {\n    value = detail;\n  }\n\n  if (promise._state !== PENDING) {\n    // noop\n  } else if (hasCallback && succeeded) {\n    resolve(promise, value);\n  } else if (succeeded === false) {\n    reject(promise, error);\n  } else if (settled === FULFILLED) {\n    fulfill(promise, value);\n  } else if (settled === REJECTED) {\n    reject(promise, value);\n  }\n}\n\nfunction initializePromise(promise, resolver) {\n  try {\n    resolver(function resolvePromise(value) {\n      resolve(promise, value);\n    }, function rejectPromise(reason) {\n      reject(promise, reason);\n    });\n  } catch (e) {\n    reject(promise, e);\n  }\n}\n\nvar id = 0;\nfunction nextId() {\n  return id++;\n}\n\nfunction makePromise(promise) {\n  promise[PROMISE_ID] = id++;\n  promise._state = undefined;\n  promise._result = undefined;\n  promise._subscribers = [];\n}\n\nexport { nextId, makePromise, noop, resolve, reject, fulfill, subscribe, publish, publishRejection, initializePromise, invokeCallback, FULFILLED, REJECTED, PENDING, handleMaybeThenable };","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { isArray, isMaybeThenable } from './utils';\nimport { noop, reject, fulfill, subscribe, FULFILLED, REJECTED, PENDING, handleMaybeThenable } from './-internal';\n\nimport then from './then';\nimport Promise from './promise';\nimport originalResolve from './promise/resolve';\nimport originalThen from './then';\nimport { makePromise, PROMISE_ID } from './-internal';\n\nfunction validationError() {\n  return new Error('Array Methods must be provided an Array');\n};\n\nvar Enumerator = function () {\n  function Enumerator(Constructor, input) {\n    this._instanceConstructor = Constructor;\n    this.promise = new Constructor(noop);\n\n    if (!this.promise[PROMISE_ID]) {\n      makePromise(this.promise);\n    }\n\n    if (isArray(input)) {\n      this.length = input.length;\n      this._remaining = input.length;\n\n      this._result = new Array(this.length);\n\n      if (this.length === 0) {\n        fulfill(this.promise, this._result);\n      } else {\n        this.length = this.length || 0;\n        this._enumerate(input);\n        if (this._remaining === 0) {\n          fulfill(this.promise, this._result);\n        }\n      }\n    } else {\n      reject(this.promise, validationError());\n    }\n  }\n\n  Enumerator.prototype._enumerate = function _enumerate(input) {\n    for (var i = 0; this._state === PENDING && i < input.length; i++) {\n      this._eachEntry(input[i], i);\n    }\n  };\n\n  Enumerator.prototype._eachEntry = function _eachEntry(entry, i) {\n    var c = this._instanceConstructor;\n    var resolve = c.resolve;\n\n\n    if (resolve === originalResolve) {\n      var _then = void 0;\n      var error = void 0;\n      var didError = false;\n      try {\n        _then = entry.then;\n      } catch (e) {\n        didError = true;\n        error = e;\n      }\n\n      if (_then === originalThen && entry._state !== PENDING) {\n        this._settledAt(entry._state, i, entry._result);\n      } else if (typeof _then !== 'function') {\n        this._remaining--;\n        this._result[i] = entry;\n      } else if (c === Promise) {\n        var promise = new c(noop);\n        if (didError) {\n          reject(promise, error);\n        } else {\n          handleMaybeThenable(promise, entry, _then);\n        }\n        this._willSettleAt(promise, i);\n      } else {\n        this._willSettleAt(new c(function (resolve) {\n          return resolve(entry);\n        }), i);\n      }\n    } else {\n      this._willSettleAt(resolve(entry), i);\n    }\n  };\n\n  Enumerator.prototype._settledAt = function _settledAt(state, i, value) {\n    var promise = this.promise;\n\n\n    if (promise._state === PENDING) {\n      this._remaining--;\n\n      if (state === REJECTED) {\n        reject(promise, value);\n      } else {\n        this._result[i] = value;\n      }\n    }\n\n    if (this._remaining === 0) {\n      fulfill(promise, this._result);\n    }\n  };\n\n  Enumerator.prototype._willSettleAt = function _willSettleAt(promise, i) {\n    var enumerator = this;\n\n    subscribe(promise, undefined, function (value) {\n      return enumerator._settledAt(FULFILLED, i, value);\n    }, function (reason) {\n      return enumerator._settledAt(REJECTED, i, reason);\n    });\n  };\n\n  return Enumerator;\n}();\n\nexport default Enumerator;\n;","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nimport { isFunction } from './utils';\nimport { noop, nextId, PROMISE_ID, initializePromise } from './-internal';\nimport { asap, setAsap, setScheduler } from './asap';\n\nimport all from './promise/all';\nimport race from './promise/race';\nimport Resolve from './promise/resolve';\nimport Reject from './promise/reject';\nimport then from './then';\n\nfunction needsResolver() {\n  throw new TypeError('You must pass a resolver function as the first argument to the promise constructor');\n}\n\nfunction needsNew() {\n  throw new TypeError(\"Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.\");\n}\n\n/**\n  Promise objects represent the eventual result of an asynchronous operation. The\n  primary way of interacting with a promise is through its `then` method, which\n  registers callbacks to receive either a promise's eventual value or the reason\n  why the promise cannot be fulfilled.\n\n  Terminology\n  -----------\n\n  - `promise` is an object or function with a `then` method whose behavior conforms to this specification.\n  - `thenable` is an object or function that defines a `then` method.\n  - `value` is any legal JavaScript value (including undefined, a thenable, or a promise).\n  - `exception` is a value that is thrown using the throw statement.\n  - `reason` is a value that indicates why a promise was rejected.\n  - `settled` the final resting state of a promise, fulfilled or rejected.\n\n  A promise can be in one of three states: pending, fulfilled, or rejected.\n\n  Promises that are fulfilled have a fulfillment value and are in the fulfilled\n  state.  Promises that are rejected have a rejection reason and are in the\n  rejected state.  A fulfillment value is never a thenable.\n\n  Promises can also be said to *resolve* a value.  If this value is also a\n  promise, then the original promise's settled state will match the value's\n  settled state.  So a promise that *resolves* a promise that rejects will\n  itself reject, and a promise that *resolves* a promise that fulfills will\n  itself fulfill.\n\n\n  Basic Usage:\n  ------------\n\n  ```js\n  let promise = new Promise(function(resolve, reject) {\n    // on success\n    resolve(value);\n\n    // on failure\n    reject(reason);\n  });\n\n  promise.then(function(value) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Advanced Usage:\n  ---------------\n\n  Promises shine when abstracting away asynchronous interactions such as\n  `XMLHttpRequest`s.\n\n  ```js\n  function getJSON(url) {\n    return new Promise(function(resolve, reject){\n      let xhr = new XMLHttpRequest();\n\n      xhr.open('GET', url);\n      xhr.onreadystatechange = handler;\n      xhr.responseType = 'json';\n      xhr.setRequestHeader('Accept', 'application/json');\n      xhr.send();\n\n      function handler() {\n        if (this.readyState === this.DONE) {\n          if (this.status === 200) {\n            resolve(this.response);\n          } else {\n            reject(new Error('getJSON: `' + url + '` failed with status: [' + this.status + ']'));\n          }\n        }\n      };\n    });\n  }\n\n  getJSON('/posts.json').then(function(json) {\n    // on fulfillment\n  }, function(reason) {\n    // on rejection\n  });\n  ```\n\n  Unlike callbacks, promises are great composable primitives.\n\n  ```js\n  Promise.all([\n    getJSON('/posts'),\n    getJSON('/comments')\n  ]).then(function(values){\n    values[0] // => postsJSON\n    values[1] // => commentsJSON\n\n    return values;\n  });\n  ```\n\n  @class Promise\n  @param {Function} resolver\n  Useful for tooling.\n  @constructor\n*/\n\nvar Promise = function () {\n  function Promise(resolver) {\n    this[PROMISE_ID] = nextId();\n    this._result = this._state = undefined;\n    this._subscribers = [];\n\n    if (noop !== resolver) {\n      typeof resolver !== 'function' && needsResolver();\n      this instanceof Promise ? initializePromise(this, resolver) : needsNew();\n    }\n  }\n\n  /**\n  The primary way of interacting with a promise is through its `then` method,\n  which registers callbacks to receive either a promise's eventual value or the\n  reason why the promise cannot be fulfilled.\n   ```js\n  findUser().then(function(user){\n    // user is available\n  }, function(reason){\n    // user is unavailable, and you are given the reason why\n  });\n  ```\n   Chaining\n  --------\n   The return value of `then` is itself a promise.  This second, 'downstream'\n  promise is resolved with the return value of the first promise's fulfillment\n  or rejection handler, or rejected if the handler throws an exception.\n   ```js\n  findUser().then(function (user) {\n    return user.name;\n  }, function (reason) {\n    return 'default name';\n  }).then(function (userName) {\n    // If `findUser` fulfilled, `userName` will be the user's name, otherwise it\n    // will be `'default name'`\n  });\n   findUser().then(function (user) {\n    throw new Error('Found user, but still unhappy');\n  }, function (reason) {\n    throw new Error('`findUser` rejected and we're unhappy');\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // if `findUser` fulfilled, `reason` will be 'Found user, but still unhappy'.\n    // If `findUser` rejected, `reason` will be '`findUser` rejected and we're unhappy'.\n  });\n  ```\n  If the downstream promise does not specify a rejection handler, rejection reasons will be propagated further downstream.\n   ```js\n  findUser().then(function (user) {\n    throw new PedagogicalException('Upstream error');\n  }).then(function (value) {\n    // never reached\n  }).then(function (value) {\n    // never reached\n  }, function (reason) {\n    // The `PedgagocialException` is propagated all the way down to here\n  });\n  ```\n   Assimilation\n  ------------\n   Sometimes the value you want to propagate to a downstream promise can only be\n  retrieved asynchronously. This can be achieved by returning a promise in the\n  fulfillment or rejection handler. The downstream promise will then be pending\n  until the returned promise is settled. This is called *assimilation*.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // The user's comments are now available\n  });\n  ```\n   If the assimliated promise rejects, then the downstream promise will also reject.\n   ```js\n  findUser().then(function (user) {\n    return findCommentsByAuthor(user);\n  }).then(function (comments) {\n    // If `findCommentsByAuthor` fulfills, we'll have the value here\n  }, function (reason) {\n    // If `findCommentsByAuthor` rejects, we'll have the reason here\n  });\n  ```\n   Simple Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let result;\n   try {\n    result = findResult();\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n  findResult(function(result, err){\n    if (err) {\n      // failure\n    } else {\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findResult().then(function(result){\n    // success\n  }, function(reason){\n    // failure\n  });\n  ```\n   Advanced Example\n  --------------\n   Synchronous Example\n   ```javascript\n  let author, books;\n   try {\n    author = findAuthor();\n    books  = findBooksByAuthor(author);\n    // success\n  } catch(reason) {\n    // failure\n  }\n  ```\n   Errback Example\n   ```js\n   function foundBooks(books) {\n   }\n   function failure(reason) {\n   }\n   findAuthor(function(author, err){\n    if (err) {\n      failure(err);\n      // failure\n    } else {\n      try {\n        findBoooksByAuthor(author, function(books, err) {\n          if (err) {\n            failure(err);\n          } else {\n            try {\n              foundBooks(books);\n            } catch(reason) {\n              failure(reason);\n            }\n          }\n        });\n      } catch(error) {\n        failure(err);\n      }\n      // success\n    }\n  });\n  ```\n   Promise Example;\n   ```javascript\n  findAuthor().\n    then(findBooksByAuthor).\n    then(function(books){\n      // found books\n  }).catch(function(reason){\n    // something went wrong\n  });\n  ```\n   @method then\n  @param {Function} onFulfilled\n  @param {Function} onRejected\n  Useful for tooling.\n  @return {Promise}\n  */\n\n  /**\n  `catch` is simply sugar for `then(undefined, onRejection)` which makes it the same\n  as the catch block of a try/catch statement.\n  ```js\n  function findAuthor(){\n  throw new Error('couldn't find that author');\n  }\n  // synchronous\n  try {\n  findAuthor();\n  } catch(reason) {\n  // something went wrong\n  }\n  // async with promises\n  findAuthor().catch(function(reason){\n  // something went wrong\n  });\n  ```\n  @method catch\n  @param {Function} onRejection\n  Useful for tooling.\n  @return {Promise}\n  */\n\n\n  Promise.prototype.catch = function _catch(onRejection) {\n    return this.then(null, onRejection);\n  };\n\n  /**\n    `finally` will be invoked regardless of the promise's fate just as native\n    try/catch/finally behaves\n  \n    Synchronous example:\n  \n    ```js\n    findAuthor() {\n      if (Math.random() > 0.5) {\n        throw new Error();\n      }\n      return new Author();\n    }\n  \n    try {\n      return findAuthor(); // succeed or fail\n    } catch(error) {\n      return findOtherAuther();\n    } finally {\n      // always runs\n      // doesn't affect the return value\n    }\n    ```\n  \n    Asynchronous example:\n  \n    ```js\n    findAuthor().catch(function(reason){\n      return findOtherAuther();\n    }).finally(function(){\n      // author was either found, or not\n    });\n    ```\n  \n    @method finally\n    @param {Function} callback\n    @return {Promise}\n  */\n\n\n  Promise.prototype.finally = function _finally(callback) {\n    var promise = this;\n    var constructor = promise.constructor;\n\n    if (isFunction(callback)) {\n      return promise.then(function (value) {\n        return constructor.resolve(callback()).then(function () {\n          return value;\n        });\n      }, function (reason) {\n        return constructor.resolve(callback()).then(function () {\n          throw reason;\n        });\n      });\n    }\n\n    return promise.then(callback, callback);\n  };\n\n  return Promise;\n}();\n\nPromise.prototype.then = then;\nexport default Promise;\nPromise.all = all;\nPromise.race = race;\nPromise.resolve = Resolve;\nPromise.reject = Reject;\nPromise._setScheduler = setScheduler;\nPromise._setAsap = setAsap;\nPromise._asap = asap;","import Enumerator from '../enumerator';\n\n/**\n  `Promise.all` accepts an array of promises, and returns a new promise which\n  is fulfilled with an array of fulfillment values for the passed promises, or\n  rejected with the reason of the first passed promise to be rejected. It casts all\n  elements of the passed iterable to promises as it runs this algorithm.\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = resolve(2);\n  let promise3 = resolve(3);\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // The array here would be [ 1, 2, 3 ];\n  });\n  ```\n\n  If any of the `promises` given to `all` are rejected, the first promise\n  that is rejected will be given as an argument to the returned promises's\n  rejection handler. For example:\n\n  Example:\n\n  ```javascript\n  let promise1 = resolve(1);\n  let promise2 = reject(new Error(\"2\"));\n  let promise3 = reject(new Error(\"3\"));\n  let promises = [ promise1, promise2, promise3 ];\n\n  Promise.all(promises).then(function(array){\n    // Code here never runs because there are rejected promises!\n  }, function(error) {\n    // error.message === \"2\"\n  });\n  ```\n\n  @method all\n  @static\n  @param {Array} entries array of promises\n  @param {String} label optional string for labeling the promise.\n  Useful for tooling.\n  @return {Promise} promise that is fulfilled when all `promises` have been\n  fulfilled, or rejected if any of them become rejected.\n  @static\n*/\nexport default function all(entries) {\n  return new Enumerator(this, entries).promise;\n}","import { isArray } from \"../utils\";\n\n/**\n  `Promise.race` returns a new promise which is settled in the same way as the\n  first passed promise to settle.\n\n  Example:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 2');\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // result === 'promise 2' because it was resolved before promise1\n    // was resolved.\n  });\n  ```\n\n  `Promise.race` is deterministic in that only the state of the first\n  settled promise matters. For example, even if other promises given to the\n  `promises` array argument are resolved, but the first settled promise has\n  become rejected before the other promises became fulfilled, the returned\n  promise will become rejected:\n\n  ```javascript\n  let promise1 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      resolve('promise 1');\n    }, 200);\n  });\n\n  let promise2 = new Promise(function(resolve, reject){\n    setTimeout(function(){\n      reject(new Error('promise 2'));\n    }, 100);\n  });\n\n  Promise.race([promise1, promise2]).then(function(result){\n    // Code here never runs\n  }, function(reason){\n    // reason.message === 'promise 2' because promise 2 became rejected before\n    // promise 1 became fulfilled\n  });\n  ```\n\n  An example real-world use case is implementing timeouts:\n\n  ```javascript\n  Promise.race([ajax('foo.json'), timeout(5000)])\n  ```\n\n  @method race\n  @static\n  @param {Array} promises array of promises to observe\n  Useful for tooling.\n  @return {Promise} a promise which settles in the same way as the first passed\n  promise to settle.\n*/\nexport default function race(entries) {\n  /*jshint validthis:true */\n  var Constructor = this;\n\n  if (!isArray(entries)) {\n    return new Constructor(function (_, reject) {\n      return reject(new TypeError('You must pass an array to race.'));\n    });\n  } else {\n    return new Constructor(function (resolve, reject) {\n      var length = entries.length;\n      for (var i = 0; i < length; i++) {\n        Constructor.resolve(entries[i]).then(resolve, reject);\n      }\n    });\n  }\n}","import { noop, reject as _reject } from '../-internal';\n\n/**\n  `Promise.reject` returns a promise rejected with the passed `reason`.\n  It is shorthand for the following:\n\n  ```javascript\n  let promise = new Promise(function(resolve, reject){\n    reject(new Error('WHOOPS'));\n  });\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  Instead of writing the above, your code now simply becomes the following:\n\n  ```javascript\n  let promise = Promise.reject(new Error('WHOOPS'));\n\n  promise.then(function(value){\n    // Code here doesn't run because the promise is rejected!\n  }, function(reason){\n    // reason.message === 'WHOOPS'\n  });\n  ```\n\n  @method reject\n  @static\n  @param {Any} reason value that the returned promise will be rejected with.\n  Useful for tooling.\n  @return {Promise} a promise rejected with the given `reason`.\n*/\nexport default function reject(reason) {\n  /*jshint validthis:true */\n  var Constructor = this;\n  var promise = new Constructor(noop);\n  _reject(promise, reason);\n  return promise;\n}","import Promise from './es6-promise/promise';\nimport polyfill from './es6-promise/polyfill';\n\n// Strange compat..\nPromise.polyfill = polyfill;\nPromise.Promise = Promise;\nexport default Promise;","/*global self*/\nimport Promise from './promise';\n\nexport default function polyfill() {\n  var local = void 0;\n\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n\n  var P = local.Promise;\n\n  if (P) {\n    var promiseToString = null;\n    try {\n      promiseToString = Object.prototype.toString.call(P.resolve());\n    } catch (e) {\n      // silently ignored\n    }\n\n    if (promiseToString === '[object Promise]' && !P.cast) {\n      return;\n    }\n  }\n\n  local.Promise = Promise;\n}","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","export * from \"./Adapter\";\r\nexport * from \"./Button\";\r\nexport * from \"./CalendarView\";\r\nexport * from \"./CheckBox\";\r\nexport * from \"./FrameWindow\";\r\nexport * from \"./Label\";\r\nexport * from \"./Libs\";\r\nexport * from \"./ListView\";\r\nexport * from \"./MessageBox\";\r\nexport * from \"./Panel\";\r\nexport * from \"./SelectBox\";\r\nexport * from \"./Splitter\";\r\nexport * from \"./TableFormView\";\r\nexport * from \"./TextBox\";\r\nexport * from \"./TextArea\";\r\nexport * from \"./TreeView\";\r\nexport * from \"./BaseView\";\r\nexport * from \"./WindowManager\";\r\nexport * from \"./ColorPickerView\";\r\nexport * from \"./TextEditor/TextEditWindow\";\r\nexport * from \"./TextEditor/PanelControl\";\r\n","interface FunctionData {\r\n  name: string;\r\n  params: unknown[];\r\n}\r\ninterface FunctionSet {\r\n  functions: FunctionData[];\r\n  promise: { [key: string]: Function };\r\n  array: boolean;\r\n}\r\n\r\ninterface AdapterFormat {\r\n  globalHash: string | null; //\r\n  sessionHash: string | null; //\r\n  functions: //\r\n  {\r\n    function: string; //\r\n    params: unknown[]; //\r\n  }[];\r\n}\r\n\r\nexport interface AdapterResult {\r\n  value: { [keys: string]: unknown } | null;\r\n  error: string | null;\r\n}\r\n\r\n/**\r\n *Ajax\r\n *\r\n * @export\r\n * @class Adapter\r\n */\r\nexport class Adapter {\r\n  private handle: number | null;\r\n  private scriptUrl: string;\r\n  private keyName: string;\r\n  private functionSet: FunctionSet[] = [];\r\n\r\n  /**\r\n   *Creates an instance of Adapter.\r\n   * @param {string} [scriptUrl] \r\n   * @param {string} [keyName] \r\n   * @memberof Adapter\r\n   */\r\n  public constructor(scriptUrl?: string, keyName?: string) {\r\n    this.scriptUrl = scriptUrl || \"./\";\r\n    this.keyName = (keyName || \"\") + \"Session\";\r\n    this.handle = null;\r\n  }\r\n  public getKeyName(): string {\r\n    return this.keyName;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} funcName (className.functionName)\r\n   * @param {...unknown[]} params \r\n   * @returns {Promise<never>}\r\n   * @memberof Adapter\r\n   */\r\n  public execAlone(funcName: string, ...params: unknown[]): Promise<never> {\r\n    const functionSet: FunctionSet = {\r\n      functions: [\r\n        {\r\n          name: funcName,\r\n          params: params\r\n        }\r\n      ],\r\n      promise: {},\r\n      array: false\r\n    };\r\n    const promise = new Promise((resolve, reject): void => {\r\n      functionSet.promise.resolve = resolve;\r\n      functionSet.promise.reject = reject;\r\n    });\r\n    this.send([functionSet]);\r\n    return promise as Promise<never>;\r\n  }\r\n\r\n  /**\r\n   *()\r\n   *\r\n   * @param {string} funcName\r\n   * @param {...unknown[]} params\r\n   * @returns {Promise<never>}\r\n   * @memberof Adapter\r\n   */\r\n  public execBinary(funcName: string, ...params: unknown[]): Promise<never> {\r\n    const functionSet: FunctionSet = {\r\n      functions: [\r\n        {\r\n          name: funcName,\r\n          params: params\r\n        }\r\n      ],\r\n      promise: {},\r\n      array: false\r\n    };\r\n    const promise = new Promise((resolve, reject): void => {\r\n      functionSet.promise.resolve = resolve;\r\n      functionSet.promise.reject = reject;\r\n    });\r\n    this.send([functionSet], true);\r\n    return promise as Promise<never>;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {FunctionData[][]} functions\r\n   * @returns {Promise<any>}\r\n   * @memberof Adapter\r\n   */\r\n  public exec(functions: FunctionData[][]): Promise<never[]>;\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} funcName \r\n   * @param {...unknown[]} params \r\n   * @returns {Promise<any>}\r\n   * @memberof Adapter\r\n   */\r\n  // eslint-disable-next-line no-dupe-class-members\r\n  public exec(funcName: string, ...params: unknown[]): Promise<never>;\r\n  // eslint-disable-next-line no-dupe-class-members\r\n  public exec(v1: FunctionData[][] | string, ...v2: unknown[]): Promise<never> {\r\n    let functionSet: FunctionSet;\r\n    if (Array.isArray(v1)) {\r\n      const functions: FunctionData[] = [];\r\n      for (let func of v1 as unknown[][]) {\r\n        functions.push({\r\n          name: func[0] as string,\r\n          params: func.slice(1)\r\n        });\r\n      }\r\n      functionSet = {\r\n        functions: functions,\r\n        promise: {},\r\n        array: true\r\n      };\r\n    } else {\r\n      functionSet = {\r\n        functions: [{ name: v1, params: v2 }],\r\n        promise: {},\r\n        array: false\r\n      };\r\n    }\r\n\r\n    const promise = new Promise((resolve, reject): void => {\r\n      functionSet.promise.resolve = resolve;\r\n      functionSet.promise.reject = reject;\r\n    });\r\n    this.functionSet.push(functionSet);\r\n    this.callSend();\r\n    return promise as Promise<never>;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @private\r\n   * @memberof Adapter\r\n   */\r\n  private callSend(): void {\r\n    if (!this.handle) {\r\n      this.handle = window.setTimeout((): void => {\r\n        this.handle = null;\r\n        this.send(this.functionSet);\r\n      }, 0);\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @private\r\n   * @param {FunctionSet[]} functionSet\r\n   * @param {boolean} [binary]\r\n   * @returns\r\n   * @memberof Adapter\r\n   */\r\n  private async send(functionSet: FunctionSet[], binary?: boolean) {\r\n    const globalHash = localStorage.getItem(this.keyName);\r\n    const sessionHash = sessionStorage.getItem(this.keyName);\r\n    const params: AdapterFormat = {\r\n      globalHash: globalHash,\r\n      sessionHash: sessionHash,\r\n      functions: []\r\n    };\r\n\r\n    this.functionSet = [];\r\n    for (let funcs of functionSet) {\r\n      for (let func of funcs.functions)\r\n        params.functions.push({\r\n          function: func.name,\r\n          params: func.params\r\n        });\r\n    }\r\n\r\n    const res = (await Adapter.sendJsonAsync(\r\n      this.scriptUrl + \"?cmd=exec\",\r\n      params,\r\n      undefined,\r\n      binary\r\n    )) as {\r\n      globalHash: string;\r\n      sessionHash: string;\r\n      results: AdapterResult[];\r\n    } | null;\r\n\r\n    if (res === null) {\r\n      for (let funcs of functionSet) {\r\n        // eslint-disable-next-line no-console\r\n        console.error(\"\");\r\n        funcs.promise.reject(\"\");\r\n      }\r\n      return;\r\n    }\r\n    //\r\n    if (binary) {\r\n      for (let funcs of functionSet) {\r\n        funcs.promise.resolve(res);\r\n      }\r\n      return;\r\n    }\r\n    //\r\n    if (res.globalHash) localStorage.setItem(this.keyName, res.globalHash);\r\n    if (res.sessionHash) sessionStorage.setItem(this.keyName, res.sessionHash);\r\n\r\n    const results = res.results;\r\n    let index = 0;\r\n    for (let funcs of functionSet) {\r\n      const length = funcs.functions.length;\r\n      if (funcs.array) {\r\n        const values = [];\r\n        for (let i = index; i < length; i++) {\r\n          if (results[i].error) {\r\n            // eslint-disable-next-line no-console\r\n            console.error(results[i].error);\r\n            funcs.promise.reject(results[i].error);\r\n            break;\r\n          }\r\n          values.push(results[i].value);\r\n        }\r\n        funcs.promise.resolve(values);\r\n      } else {\r\n        const result = results[index];\r\n        // eslint-disable-next-line no-console\r\n        if (result.error) console.error(result.error);\r\n        else funcs.promise.resolve(result.value);\r\n      }\r\n      index += length;\r\n    }\r\n  }\r\n\r\n  /**\r\n   *JsonPromise\r\n   *\r\n   * @static\r\n   * @param {string} url\r\n   * @param {unknown} [data]\r\n   * @param {{ [key: string]: string }} [headers]\r\n   * @param {boolean} [binary]\r\n   * @returns {Promise<unknown>}\r\n   * @memberof Adapter\r\n   */\r\n  public static sendJsonAsync(\r\n    url: string,\r\n    data?: unknown,\r\n    headers?: { [key: string]: string },\r\n    binary?: boolean\r\n  ): Promise<unknown> {\r\n    return new Promise((resolve): void => {\r\n      if (binary) {\r\n        Adapter.sendJsonToBinary(\r\n          url,\r\n          data,\r\n          (value: unknown): void => {\r\n            resolve(value);\r\n          },\r\n          headers\r\n        );\r\n      } else {\r\n        Adapter.sendJson(\r\n          url,\r\n          data,\r\n          (value: unknown): void => {\r\n            resolve(value);\r\n          },\r\n          headers\r\n        );\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   *Json\r\n   *\r\n   * @private\r\n   * @static\r\n   * @param {string} url\r\n   * @param {unknown} data\r\n   * @param {Function} proc\r\n   * @param {{ [key: string]: string }} [headers]\r\n   * @returns {void}\r\n   * @memberof Adapter\r\n   */\r\n  private static sendJson(\r\n    url: string,\r\n    data: unknown,\r\n    proc: Function,\r\n    headers?: { [key: string]: string }\r\n  ): void {\r\n    const req = new XMLHttpRequest();\r\n\r\n    //JSON\r\n    var jsonFlag = false;\r\n    try {\r\n      req.responseType = \"json\";\r\n    } catch (e) {\r\n      jsonFlag = true;\r\n    }\r\n    if (proc == null) {\r\n      req.open(\"POST\", url, false);\r\n      return JSON.parse(req.responseText);\r\n    } else {\r\n      req.onreadystatechange = function(): void {\r\n        if (req.readyState == 4) {\r\n          var obj = null;\r\n          try {\r\n            if (jsonFlag)\r\n              //JSON\r\n              obj = JSON.parse(req.response);\r\n            else obj = req.response;\r\n          } catch (e) {\r\n            proc(null);\r\n            return;\r\n          }\r\n          proc(obj);\r\n        }\r\n      };\r\n    }\r\n    req.open(\"POST\", url, true);\r\n    req.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    if (headers) {\r\n      for (let index in headers) {\r\n        const value = sessionStorage.getItem(headers[index]);\r\n        if (value) req.setRequestHeader(index, value);\r\n      }\r\n    }\r\n    req.send(data == null ? null : JSON.stringify(data));\r\n  }\r\n\r\n  /**\r\n   *Jsonblob\r\n   *\r\n   * @private\r\n   * @static\r\n   * @param {string} url\r\n   * @param {unknown} data\r\n   * @param {Function} proc\r\n   * @param {{ [key: string]: string }} [headers]\r\n   * @returns {void}\r\n   * @memberof Adapter\r\n   */\r\n  private static sendJsonToBinary(\r\n    url: string,\r\n    data: unknown,\r\n    proc: Function,\r\n    headers?: { [key: string]: string }\r\n  ): void {\r\n    const req = new XMLHttpRequest();\r\n    req.responseType = \"blob\";\r\n    if (proc == null) {\r\n      req.open(\"POST\", url, false);\r\n      return JSON.parse(req.responseText);\r\n    } else {\r\n      req.onreadystatechange = function(): void {\r\n        if (req.readyState == 4) {\r\n          proc(req.response);\r\n        }\r\n      };\r\n    }\r\n    req.open(\"POST\", url, true);\r\n    req.setRequestHeader(\"Content-Type\", \"application/json\");\r\n    if (headers) {\r\n      for (let index in headers) {\r\n        const value = sessionStorage.getItem(headers[index]);\r\n        if (value) req.setRequestHeader(index, value);\r\n      }\r\n    }\r\n    req.send(data == null ? null : JSON.stringify(data));\r\n  }\r\n\r\n  /**\r\n   *\r\n   *URL\r\n   *\r\n   * @param {Blob} buffer\r\n   * @param {string} funcName\r\n   * @param {...unknown[]} params\r\n   * @returns\r\n   * @memberof Adapter\r\n   */\r\n  public upload(buffer: Blob, funcName: string, ...params: unknown[]) {\r\n    return new Promise((resolve, reject) => {\r\n      //\r\n      const globalHash = localStorage.getItem(this.keyName);\r\n      const sessionHash = sessionStorage.getItem(this.keyName);\r\n      const adapterFormat: AdapterFormat = {\r\n        globalHash: globalHash,\r\n        sessionHash: sessionHash,\r\n        functions: [\r\n          {\r\n            function: funcName,\r\n            params\r\n          }\r\n        ]\r\n      };\r\n      const proc = (res: {\r\n        globalHash: string;\r\n        sessionHash: string;\r\n        results: AdapterResult[];\r\n      }) => {\r\n        if (res == null) {\r\n          // eslint-disable-next-line no-console\r\n          console.error(\"\");\r\n          reject(\"\");\r\n        } else {\r\n          if (res.globalHash)\r\n            localStorage.setItem(this.keyName, res.globalHash);\r\n          if (res.sessionHash)\r\n            sessionStorage.setItem(this.keyName, res.sessionHash);\r\n          if (res.results && res.results.length) {\r\n            const result = res.results[0];\r\n            if (result.error) reject(result.error);\r\n            else resolve(result.value);\r\n          } else {\r\n            resolve(null);\r\n          }\r\n        }\r\n      };\r\n      //\r\n      Adapter.sendFile(this.scriptUrl + \"?cmd=upload\", buffer, proc, {\r\n        params: JSON.stringify(adapterFormat)\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @static\r\n   * @param {string} url\r\n   * @param {Blob} buffer\r\n   * @param {(result: never) => void} proc\r\n   * @param {({ [key: string]: string | number })} params\r\n   * @returns\r\n   * @memberof Adapter\r\n   */\r\n  public static sendFile(\r\n    url: string,\r\n    buffer: Blob,\r\n    proc: (result: never) => void,\r\n    params: { [key: string]: string | number }\r\n  ) {\r\n    //GET\r\n    let urlParam = \"\";\r\n    if (params) {\r\n      for (const key of Object.keys(params)) {\r\n        if (urlParam.length) urlParam += \"&\";\r\n        urlParam +=\r\n          encodeURIComponent(key) + \"=\" + encodeURIComponent(params[key]);\r\n      }\r\n      url += url.indexOf(\"?\") >= 0 ? \"&\" : \"?\";\r\n      url += urlParam;\r\n    }\r\n    //\r\n    const req = new XMLHttpRequest();\r\n    try {\r\n      req.open(\"POST\", url, true);\r\n      req.setRequestHeader(\"Content-Type\", \"application/octet-stream\");\r\n      req.send(buffer);\r\n    } catch (e) {\r\n      alert(e);\r\n      return null;\r\n    }\r\n    req.onreadystatechange = () => {\r\n      if (req.readyState == 4) {\r\n        proc(JSON.parse(req.response) as never);\r\n      }\r\n    };\r\n\r\n    return req;\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./Window.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nvar getUrl = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL___0___ = getUrl(require(\"./images/min.svg\"));\nvar ___CSS_LOADER_URL___1___ = getUrl(require(\"./images/max.svg\"));\nvar ___CSS_LOADER_URL___2___ = getUrl(require(\"./images/close.svg\"));\nvar ___CSS_LOADER_URL___3___ = getUrl(require(\"./images/normal.svg\"));\n// Module\nexports.push([module.id, \"[data-jwf=\\\"Window\\\"]{box-sizing:border-box}[data-jwf=\\\"Window\\\"][data-jwf-visible=\\\"false\\\"]{display:none}[data-jwf=\\\"Window\\\"]:not([data-jwf-type=\\\"Frame\\\"]){overflow:hidden}[data-jwf=\\\"Window\\\"][data-jwf-type=\\\"Frame\\\"]:not([data-jwf-stat=\\\"maximize\\\"]){border-radius:10px 10px 0px 0px;border:solid 1px;box-shadow:10px 10px 10px rgba(0,0,0,0.4)}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"border\\\"]{position:absolute;user-select:none}[data-jwf=\\\"Window\\\"][data-jwf-stat=\\\"maximize\\\"]>[data-jwf-type=\\\"border\\\"]{display:none;box-sizing:border-box}[data-jwf=\\\"Window\\\"][data-jwf-active=\\\"true\\\"]>[data-jwf-type=\\\"title\\\"]{background-color:#57d;color:white}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]{border-radius:10px 10px 0px 0px;display:flex;position:absolute;cursor:move;background-color:#abe;overflow:hidden}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"] [data-jwf-type=\\\"text\\\"]{flex:1;overflow:hidden;font-family:\\\"Trebuchet MS\\\", \\\"Lucida Sans Unicode\\\", \\\"Lucida Grande\\\", \\\"Lucida Sans\\\", Arial, sans-serif;padding:0px 0.5em;align-items:center;display:flex;white-space:nowrap}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"]{display:inline-block;cursor:default;background-size:100% 100%}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"]:hover{background-color:rgba(0,0,0,0.2)}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"][data-jwf-kind=\\\"min\\\"]{background-image:url(\" + ___CSS_LOADER_URL___0___ + \")}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"][data-jwf-kind=\\\"restore\\\"]{background-image:url(\" + ___CSS_LOADER_URL___0___ + \")}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"][data-jwf-kind=\\\"max\\\"]{background-image:url(\" + ___CSS_LOADER_URL___1___ + \")}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"][data-jwf-kind=\\\"close\\\"]{background-image:url(\" + ___CSS_LOADER_URL___2___ + \")}[data-jwf=\\\"Window\\\"]>[data-jwf-type=\\\"title\\\"]>[data-jwf-type=\\\"icon\\\"][data-jwf-kind=\\\"normal\\\"]{background-image:url(\" + ___CSS_LOADER_URL___3___ + \")}[data-jwf-scale=\\\"auto\\\"]{white-space:normal}[data-jwf-client=true]{background:whitesmoke}[data-jwf-type=\\\"client\\\"]{position:absolute;overflow:hidden;top:0px;right:0px;bottom:0px;left:0px}@keyframes JWFminimize{100%{height:0px}}@keyframes JWFrestore{0%{height:0px}}@keyframes JWFmaximize{10%{transform:scale(0)}100%{transform:scale(1)}}@keyframes JWFmaxrestore{0%{transform:scale(2)}100%{transform:scale(1)}}@keyframes JWFclose{100%{opacity:0;transform:scale(0)}}@keyframes JWFFrameShow{0%{opacity:0;transform:scale(0)}100%{opacity:1;transform:scale(1)}}\\n\", \"\"]);\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxMC4wMDAxO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCgkuc3Qxe2ZpbGw6bm9uZTt9DQo8L3N0eWxlPg0KPHRpdGxlPm1pbjwvdGl0bGU+DQo8bGluZSBjbGFzcz0ic3QwIiB4MT0iMjcuMSIgeTE9IjI3LjkiIHgyPSIxMDEuOSIgeTI9IjI3LjkiLz4NCjxyZWN0IGNsYXNzPSJzdDEiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxMi41MDAyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDt9DQoJLnN0MXtmaWxsOm5vbmU7fQ0KPC9zdHlsZT4NCjx0aXRsZT5tYXg8L3RpdGxlPg0KPHJlY3QgeD0iMTkiIHk9IjE5IiBjbGFzcz0ic3QwIiB3aWR0aD0iOTAiIGhlaWdodD0iOTAiLz4NCjxyZWN0IGNsYXNzPSJzdDEiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxMC4wNTkyO3N0cm9rZS1saW5lY2FwOnJvdW5kO3N0cm9rZS1saW5lam9pbjpyb3VuZDt9DQoJLnN0MXtmaWxsOm5vbmU7fQ0KPC9zdHlsZT4NCjx0aXRsZT5jbG9zZTwvdGl0bGU+DQo8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMjUuNCwxMDFsNzUuNC03NS40TDI1LjQsMTAxeiIvPg0KPGxpbmUgY2xhc3M9InN0MCIgeDE9IjI0LjgiIHkxPSIyNSIgeDI9IjEwMS4xIiB5Mj0iMTAxLjMiLz4NCjxyZWN0IGNsYXNzPSJzdDEiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDo0O3N0cm9rZS1saW5lam9pbjpyb3VuZDt9DQoJLnN0MXtmaWxsOm5vbmU7fQ0KPC9zdHlsZT4NCjx0aXRsZT5ub3JtYWw8L3RpdGxlPg0KPHJlY3QgeD0iMzcuOCIgeT0iMTgiIGNsYXNzPSJzdDAiIHdpZHRoPSI3MC4yIiBoZWlnaHQ9IjcyLjQiLz4NCjxyZWN0IHg9IjIyLjYiIHk9IjMwLjUiIGNsYXNzPSJzdDAiIHdpZHRoPSI2OC40IiBoZWlnaHQ9IjcwLjYiLz4NCjxyZWN0IGNsYXNzPSJzdDEiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./Button.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"Button\\\"]{background-color:transparent;text-align:center}[data-jwf-style=\\\"Button\\\"]>div{margin:2px;display:inline-block;cursor:pointer;white-space:nowrap;user-select:none;border-width:1px;border-style:solid;border-color:gainsboro dimgrey dimgrey gainsboro;border-radius:10px;color:white;background-image:linear-gradient(120deg, rgba(156,159,161,0.9) 0%, #74757a 100%)}[data-jwf-style=\\\"Button\\\"]>div:hover,[data-jwf-style=\\\"Button\\\"]>div:focus{background-image:linear-gradient(120deg, rgba(108,155,194,0.9) 0%, #6275df 100%);font-weight:bold}[data-jwf-style=\\\"Button\\\"]>div:active{border-style:inset}[data-jwf-style=\\\"Button\\\"]>div>span{display:block;padding:2px 8px;white-space:nowrap}[data-jwf-style=\\\"Button\\\"]>div>img{height:100%;width:100%}\\n\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./CalendarView.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"CalendarView\\\"]>table{user-select:none;table-layout:fixed;border-collapse:collapse;width:100%;height:100%}[data-jwf-style=\\\"CalendarView\\\"]>table tr:first-child{background-color:#ffe0d8}[data-jwf-style=\\\"CalendarView\\\"]>table tr:first-child td:nth-child(odd){text-align:center;cursor:pointer;background-color:#c3d7d8}[data-jwf-style=\\\"CalendarView\\\"]>table tr:first-child td:nth-child(even){text-align:center}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(2) td{border:2px solid #aaaaaa;background-color:#eeeeee;vertical-align:middle;text-align:center}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(2) td:first-child{color:red}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(2) td:last-child{color:blue}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(n+3) td[data-select=\\\"true\\\"] div:nth-child(3){top:0px;left:0px;margin:1px;box-sizing:border-box;position:absolute;width:calc(100% - 2px);height:calc(100% - 2px);border:#7567eb solid;z-index:100}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(n+3) td{position:relative;border:2px solid #aaaaaa;background-color:antiquewhite;text-align:right}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(n+3) td:hover{background-color:rgba(200,200,200,0.3)}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(n+3) td div:nth-child(1){padding-right:0.2em;font-size:0.7em}[data-jwf-style=\\\"CalendarView\\\"]>table tr:nth-child(n+3) td div:nth-child(2){font-size:0.6em;font-weight:bold;color:red;background-color:#ffb398;vertical-align:middle;text-align:center;overflow:hidden;white-space:nowrap;height:1.2em}[data-jwf-style=\\\"CalendarView\\\"] .CellBody{box-sizing:border-box;position:relative;width:100%;height:100%}[data-jwf-style=\\\"CalendarView\\\"] .CellBody#now{border:#7567eb solid}[data-jwf-style=\\\"CalendarView\\\"] .GUICalendar .Cell#Holiday .DayText{background-color:#fda787}[data-jwf-style=\\\"CalendarView\\\"] .GUICalendar .Cell:first-child .Day{color:red}[data-jwf-style=\\\"CalendarView\\\"] .GUICalendar .Cell:last-child .Day{color:red}[data-jwf-style=\\\"CalendarView\\\"] .GUICalendar .Cell#Holiday .Day{color:red}\\n\", \"\"]);\n","import { BaseView } from \"./BaseView\";\r\nimport \"../scss/CheckBox.scss\";\r\n\r\nexport class CheckBox extends BaseView {\r\n  private nodeText: HTMLSpanElement;\r\n  private nodeCheck: HTMLInputElement;\r\n  public constructor(params?: { text?: string; checked?: boolean }) {\r\n    super();\r\n\r\n    this.setJwfStyle(\"CheckBox\");\r\n    this.setAutoSize(true);\r\n\r\n    const client = this.getClient();\r\n\r\n    const node = document.createElement(\"div\");\r\n    client.appendChild(node);\r\n\r\n    const textArea = document.createElement(\"label\");\r\n    node.appendChild(textArea);\r\n\r\n    const nodeCheck = document.createElement(\"input\");\r\n    this.nodeCheck = nodeCheck;\r\n    nodeCheck.type = \"checkbox\";\r\n    textArea.appendChild(nodeCheck);\r\n    if (params && params.checked != null) nodeCheck.checked = params.checked;\r\n\r\n    const nodeText = document.createElement(\"span\");\r\n    this.nodeText = nodeText;\r\n    textArea.appendChild(nodeText);\r\n\r\n    if (params && params.text) this.setText(params.text);\r\n  }\r\n  public isCheck(): boolean {\r\n    return this.nodeCheck.checked;\r\n  }\r\n  public setCheck(check: boolean): void {\r\n    this.nodeCheck.checked = check;\r\n  }\r\n  public setText(text: string): void {\r\n    const nodeText = this.nodeText;\r\n    nodeText.textContent = text;\r\n  }\r\n  public getText(): string | null {\r\n    const nodeText = this.nodeText;\r\n    return nodeText.textContent;\r\n  }\r\n\r\n  public getTextNode(): HTMLSpanElement {\r\n    return this.nodeText;\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./CheckBox.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"CheckBox\\\"]>div{display:flex;white-space:nowrap}[data-jwf-style=\\\"CheckBox\\\"]>div>label:hover{background-color:rgba(186,190,245,0.274)}\\n\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./Label.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"Label\\\"]>div{display:flex;overflow:visible;background-color:transparent}[data-jwf-style=\\\"Label\\\"]>div>span{white-space:nowrap}\\n\", \"\"]);\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\nimport {\r\n  BaseView,\r\n  JWFEvent,\r\n  MovePoint,\r\n  WINDOW_PARAMS,\r\n  WINDOW_EVENT_MAP,\r\n  MoveElement\r\n} from \"./BaseView\";\r\nimport { WindowManager } from \"./WindowManager\";\r\nimport \"../scss/ListView.scss\";\r\n\r\nexport interface LISTVIEW_EVENT_ITEM_CLICK {\r\n  itemIndex: number;\r\n  subItemIndex: number;\r\n  event: MouseEvent;\r\n}\r\nexport interface LISTVIEW_EVENT_DRAG_START {\r\n  itemIndex: number;\r\n  subItemIndex: number;\r\n  event: DragEvent;\r\n}\r\nexport interface ListViewEventMap extends WINDOW_EVENT_MAP {\r\n  itemClick: [LISTVIEW_EVENT_ITEM_CLICK];\r\n  itemDblClick: [LISTVIEW_EVENT_ITEM_CLICK];\r\n  itemDragStart: [LISTVIEW_EVENT_DRAG_START];\r\n}\r\n/**\r\n *ListView\r\n *\r\n * @export\r\n * @class ListView\r\n * @extends {BaseView}\r\n */\r\nexport class ListView extends BaseView<ListViewEventMap> {\r\n  private headers: HTMLElement;\r\n  private resizers: HTMLElement;\r\n  private itemArea: HTMLElement;\r\n  private overIndex: number = -1;\r\n  private lastIndex: number = 0;\r\n  private selectIndexes: number[] = [];\r\n  private sortIndex: number = -1;\r\n  private sortVector: boolean = false;\r\n  private columnWidth: number[] = [];\r\n  private columnAutoIndex: number = -1;\r\n  private areaWidth: number = 0;\r\n\r\n  /**\r\n   *Creates an instance of ListView.\r\n   * @param {*} [params] \r\n   * @memberof ListView\r\n   */\r\n  public constructor(params?: WINDOW_PARAMS) {\r\n    super(params);\r\n    const that = this;\r\n    var client = this.getClient();\r\n    client.dataset.jwfStyle = \"ListView\";\r\n\r\n    var headerBack = document.createElement(\"div\");\r\n    headerBack.dataset.kind = \"ListHeaderBack\";\r\n    client.appendChild(headerBack);\r\n\r\n    var headerArea = document.createElement(\"div\");\r\n    headerArea.dataset.kind = \"ListHeaderArea\";\r\n    client.appendChild(headerArea);\r\n\r\n    var resizers = document.createElement(\"div\");\r\n    this.resizers = resizers;\r\n    resizers.dataset.kind = \"ListResizers\";\r\n    headerArea.appendChild(resizers);\r\n\r\n    var headers = document.createElement(\"div\");\r\n    this.headers = headers;\r\n    headers.dataset.kind = \"ListHeaders\";\r\n    headerArea.appendChild(headers);\r\n\r\n    var itemArea = document.createElement(\"div\");\r\n    itemArea.dataset.kind = \"ListItemArea\";\r\n    this.itemArea = itemArea;\r\n    client.appendChild(itemArea);\r\n\r\n    client.addEventListener(\"scroll\", function(): void {\r\n      itemArea.style.left = this.scrollLeft + \"px\";\r\n      if (itemArea.childElementCount) {\r\n        let column = itemArea.childNodes[0] as HTMLElement;\r\n        column.style.marginLeft = -this.scrollLeft + \"px\";\r\n        headerBack.style.marginLeft = this.scrollLeft + \"px\";\r\n      }\r\n    });\r\n\r\n    client.addEventListener(\"dragover\", function(e): void {\r\n      e.preventDefault();\r\n    });\r\n    client.addEventListener(\"drop\", function(e): void {\r\n      that.callEvent(\"itemDrop\", {\r\n        itemIndex: -1,\r\n        subItemIndex: -1,\r\n        event: e\r\n      });\r\n      e.preventDefault();\r\n    });\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index\r\n   * @param {number} size\r\n   * @memberof ListView\r\n   */\r\n  public setColumnWidth(index: number, size: number): void {\r\n    this.columnWidth[index] = size;\r\n    (this.headers.children[index] as HTMLElement).style.width = size + \"px\";\r\n    this.resize();\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} col \r\n   * @param {('left'|'right'|'center')} style \r\n   * @memberof ListView\r\n   */\r\n  public setColumnStyle(col: number, style: \"left\" | \"right\" | \"center\"): void {\r\n    let columns = this.itemArea.childNodes as NodeListOf<HTMLElement>;\r\n    let column = columns[col];\r\n    column.style.justifyContent = style;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {(('left' | 'right' | 'center')[])} styles \r\n   * @memberof ListView\r\n   */\r\n  public setColumnStyles(styles: (\"left\" | \"right\" | \"center\")[]): void {\r\n    let columns = this.itemArea.childNodes as NodeListOf<\r\n      HTMLElement & { vector: typeof styles[0] }\r\n    >;\r\n    for (let i = 0, l = styles.length; i < l; i++) {\r\n      let column = columns[i];\r\n      column.vector = styles[i];\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {(string|(string|[string,number])[])} labels  | [,,] | [[,],[,],]\r\n   * @param {number} [size] \r\n   * @memberof ListView\r\n   */\r\n  public addHeader(\r\n    label: string | (string | [string, number])[],\r\n    size?: number\r\n  ): void {\r\n    var headers = this.headers;\r\n\r\n    let labels: (string | [string, number])[] = [];\r\n    if (label instanceof Array) labels = label;\r\n    else labels = [label];\r\n\r\n    for (let i = 0, l = labels.length; i < l; i++) {\r\n      let label = labels[i];\r\n      let text: string;\r\n      let width = size;\r\n      if (label instanceof Array) {\r\n        text = label[0];\r\n        width = label[1];\r\n      } else {\r\n        text = label;\r\n      }\r\n\r\n      var index = headers.childElementCount;\r\n      var header = document.createElement(\"div\");\r\n      headers.appendChild(header);\r\n      header.textContent = text;\r\n      if (width != null) {\r\n        this.columnWidth[index] = width;\r\n        header.style.width = width + \"px\";\r\n      } else {\r\n        this.columnWidth[index] = header.offsetWidth;\r\n      }\r\n\r\n      let that = this;\r\n      //\r\n      header.addEventListener(\"click\", function(): void {\r\n        let j;\r\n        for (j = 0; j < headers.childElementCount; j++) {\r\n          if (headers.childNodes[j] === this) break;\r\n        }\r\n        let sort = true;\r\n        if (that.sortIndex === j) sort = !that.sortVector;\r\n        that.sortItem(j, sort);\r\n      });\r\n\r\n      var itemArea = this.itemArea;\r\n      var column = document.createElement(\"div\");\r\n      column.dataset.kind = \"ListColumn\";\r\n      this.itemArea.appendChild(column);\r\n\r\n      //\r\n      var resizers = this.resizers;\r\n      let resize: MoveElement = document.createElement(\"div\");\r\n      resize.dataset.index = index.toString();\r\n      resizers.appendChild(resize);\r\n      WindowManager.enableMove(resize);\r\n      resize.addEventListener(\"move\", function(\r\n        this: HTMLElement,\r\n        e: JWFEvent\r\n      ): void {\r\n        const index = this.dataset.index ? parseInt(this.dataset.index) : 0;\r\n        let p = e.params as MovePoint;\r\n        let x = p.nodePoint.x + p.nowPoint.x - p.basePoint.x;\r\n        let h = headers.childNodes[index] as HTMLElement;\r\n        let width = x - h.offsetLeft;\r\n        h.style.width = width + \"px\";\r\n        that.columnWidth[index] = width;\r\n\r\n        for (\r\n          let i = index, length = resizers.childElementCount;\r\n          i < length;\r\n          i++\r\n        ) {\r\n          let node = headers.children[i] as HTMLElement;\r\n          var r = resizers.childNodes[i] as HTMLElement;\r\n          r.style.left = node.offsetLeft + node.offsetWidth + \"px\";\r\n\r\n          let column = itemArea.children[i] as HTMLElement;\r\n          column.style.width =\r\n            node.clientLeft + node.offsetWidth - column.clientLeft + \"px\";\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} [index] \r\n   * @param {boolean} [order]  true: false:\r\n   * @memberof ListView\r\n   */\r\n  public sortItem(index?: number, order?: boolean): void {\r\n    this.clearSelectItem();\r\n\r\n    if (index != null) {\r\n      this.sortIndex = index;\r\n      order = order == null ? true : order;\r\n      this.sortVector = order;\r\n      var headers = this.headers;\r\n      for (let i = 0, length = headers.childElementCount; i < length; i++) {\r\n        let node = headers.childNodes[i] as HTMLElement;\r\n        if (index === i) node.dataset.sort = order ? \"asc\" : \"desc\";\r\n        else node.dataset.sort = \"\";\r\n        // eslint-disable-next-line no-self-assign\r\n        node.className = node.className; //IE11\r\n      }\r\n    }\r\n\r\n    index = this.sortIndex;\r\n    order = this.sortVector;\r\n    let columns = this.itemArea.childNodes;\r\n    let column = columns[index];\r\n    let items: NodeListOf<ChildNode & { keyValue?: number | string }> =\r\n      column.childNodes;\r\n    //\r\n    let sortList = [];\r\n    for (let i = 0, length = items.length; i < length; i++) {\r\n      sortList.push(i);\r\n    }\r\n    sortList.sort(function(a, b): number {\r\n      let v1 = typeof items[a].keyValue || items[a].textContent || \"\";\r\n      let v2 = typeof items[b].keyValue || items[b].textContent || \"\";\r\n      return (v1 > v2 ? 1 : -1) * (order ? 1 : -1);\r\n    });\r\n    //\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i] as HTMLElement;\r\n      //\r\n      let items = [];\r\n      while (column.childElementCount) {\r\n        items.push(column.childNodes[0]);\r\n        column.removeChild(column.childNodes[0]);\r\n      }\r\n      //\r\n      for (let j = 0, length = sortList.length; j < length; j++) {\r\n        column.appendChild(items[sortList[j]]);\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {(number | number[])} index \r\n   * @memberof ListView\r\n   */\r\n  public selectItem(index: number | number[]): void {\r\n    this.clearSelectItem();\r\n    this.addSelectItem(index);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof ListView\r\n   */\r\n  public clearSelectItem(): void {\r\n    let columns = this.itemArea.childNodes;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i];\r\n      for (let j = 0, l = this.selectIndexes.length; j < l; j++) {\r\n        let node = column.childNodes[this.selectIndexes[j]] as HTMLElement;\r\n        node.dataset.itemSelect = \"false\";\r\n        // eslint-disable-next-line no-self-assign\r\n        node.className = node.className; //IE11\r\n      }\r\n    }\r\n    this.selectIndexes = [];\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {(number | number[])} index \r\n   * @memberof ListView\r\n   */\r\n  public addSelectItem(index: number | number[]): void {\r\n    let indexes = (index instanceof Array ? index : [index]) as number[];\r\n    Array.prototype.push.apply(this.selectIndexes, indexes);\r\n\r\n    let columns = this.itemArea.childNodes;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i];\r\n\r\n      for (let j = 0, l = this.selectIndexes.length; j < l; j++) {\r\n        let node = column.childNodes[this.selectIndexes[j]] as HTMLElement;\r\n        node.dataset.itemSelect = \"true\";\r\n        // eslint-disable-next-line no-self-assign\r\n        node.className = node.className; //IE11\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {(number | number[])} index \r\n   * @memberof ListView\r\n   */\r\n  public delSelectItem(index: number | number[]): void {\r\n    let indexes = (typeof index === \"object\" ? index : [index]) as number[];\r\n    let columns = this.itemArea.childNodes;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i];\r\n\r\n      for (let j = 0, l = indexes.length; j < l; j++) {\r\n        let node = column.childNodes[indexes[j]] as HTMLElement;\r\n        node.dataset.itemSelect = \"false\";\r\n        // eslint-disable-next-line no-self-assign\r\n        node.className = node.className; //IE11\r\n      }\r\n    }\r\n    let newIndexes = [];\r\n    for (let j = 0, l = this.selectIndexes.length; j < l; j++) {\r\n      let index = this.selectIndexes[j];\r\n      if (indexes.indexOf(index) < 0) newIndexes.push(index);\r\n    }\r\n    this.selectIndexes = newIndexes;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {number} \r\n   * @memberof ListView\r\n   */\r\n  public getItemCount(): number {\r\n    if (this.itemArea.childElementCount === 0) return 0;\r\n    return (this.itemArea.childNodes[0] as HTMLElement).childElementCount;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @returns {boolean}\r\n   * @memberof ListView\r\n   */\r\n  public isSelectItem(index: number): boolean {\r\n    return this.selectIndexes.indexOf(index) >= 0;\r\n  }\r\n  private static getIndexOfNode(node: HTMLElement): number {\r\n    if (node.parentNode)\r\n      return ([] as HTMLElement[]).slice\r\n        .call(node.parentNode.childNodes)\r\n        .indexOf(node);\r\n    return -1;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof ListView\r\n   */\r\n  public clearItem(): void {\r\n    this.selectIndexes = [];\r\n    let columns = this.itemArea.childNodes;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i] as HTMLElement;\r\n      while (column.childElementCount) column.removeChild(column.childNodes[0]);\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row\r\n   * @param {number} col\r\n   * @returns\r\n   * @memberof ListView\r\n   */\r\n  public getCell(\r\n    row: number,\r\n    col: number\r\n  ): HTMLElement & { value?: unknown } | null {\r\n    let columns = this.itemArea.childNodes;\r\n    let column = columns[col];\r\n    if (column == null) return null;\r\n    return column.childNodes[row] as HTMLElement;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @param {*} value \r\n   * @memberof ListView\r\n   */\r\n  public setItemValue(index: number, value: unknown): void {\r\n    let cell = this.getCell(index, 0);\r\n    if (cell) cell.value = value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index \r\n   * @returns \r\n   * @memberof ListView\r\n   * @returns {string} \r\n   */\r\n  public getItemValue(index: number): unknown {\r\n    let cell = this.getCell(index, 0);\r\n    if (cell) return cell.value;\r\n    return null;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {unknown[]}\r\n   * @memberof ListView\r\n   */\r\n  public getItemValues(): unknown[] {\r\n    const count = this.getItemCount();\r\n    let values = [];\r\n    for (let i = 0; i < count; i++) {\r\n      values.push(this.getCell(i, 0));\r\n    }\r\n    return values;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row \r\n   * @param {number} col \r\n   * @returns {string} \r\n   * @memberof ListView\r\n   */\r\n  public getItemText(row: number, col: number): string | null {\r\n    let cell = this.getCell(row, col);\r\n    if (cell) return cell.textContent;\r\n    return null;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {number} (-1)\r\n   * @memberof ListView\r\n   */\r\n  public getSelectItem(): number {\r\n    for (let index of this.selectIndexes) {\r\n      return index;\r\n    }\r\n    return -1;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {unknown[]} \r\n   * @memberof ListView\r\n   */\r\n  public getSelectValues(): unknown[] {\r\n    let values = [];\r\n    for (let index of this.selectIndexes) {\r\n      values.push(this.getItemValue(index));\r\n    }\r\n    return values;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row\r\n   * @returns\r\n   * @memberof ListView\r\n   */\r\n  public getLineCells(row: number): HTMLElement[] {\r\n    let cells: HTMLElement[] = [];\r\n    let columns = this.itemArea.childNodes;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i] as HTMLElement;\r\n      cells.push(column.childNodes[row] as HTMLElement);\r\n    }\r\n    return cells;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   *\r\n   * @param {(string|(string|HTMLElement)[])} value \r\n   * @returns\r\n   * @memberof ListView\r\n   */\r\n  public addItem(\r\n    value: string | number | HTMLElement | ((string | number | HTMLElement)[]),\r\n    itemValue?: unknown\r\n  ): number {\r\n    const vector: { [key: string]: string } = {\r\n      left: \"flex-start\",\r\n      center: \"center\",\r\n      right: \"flex-end\"\r\n    };\r\n    let that = this;\r\n    let columns = this.itemArea.childNodes as NodeListOf<HTMLElement>;\r\n    for (let i = 0, length = columns.length; i < length; i++) {\r\n      let column = columns[i] as HTMLElement & { vector?: string };\r\n      let cell = document.createElement(\"div\");\r\n      cell.draggable = true;\r\n      cell.dataset.kind = \"ListCell\";\r\n\r\n      if (column.vector) cell.style.justifyContent = vector[column.vector];\r\n      column.appendChild(cell);\r\n      cell.addEventListener(\"mouseover\", function(): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        for (let i = 0, length = columns.length; i < length; i++) {\r\n          let column = columns[i];\r\n          if (\r\n            that.overIndex != null &&\r\n            that.overIndex >= 0 &&\r\n            that.overIndex < column.childElementCount\r\n          ) {\r\n            let node = column.childNodes[that.overIndex] as HTMLElement;\r\n            node.dataset.itemHover = \"false\";\r\n            // eslint-disable-next-line no-self-assign\r\n            node.className = node.className; //IE\r\n          }\r\n          let node2 = column.childNodes[index] as HTMLElement;\r\n          node2.dataset.itemHover = \"true\";\r\n          // eslint-disable-next-line no-self-assign\r\n          node2.className = node2.className; //IE\r\n        }\r\n        that.overIndex = index;\r\n      });\r\n      cell.addEventListener(\"dragstart\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let index2 = ListView.getIndexOfNode(this.parentNode as HTMLElement);\r\n        that.callEvent(\"itemDragStart\", {\r\n          itemIndex: index,\r\n          subItemIndex: index2,\r\n          event: e\r\n        });\r\n      });\r\n      cell.addEventListener(\"dragleave\", function(): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let cells = that.getLineCells(index);\r\n        for (let cell of cells) {\r\n          cell.dataset.drag = \"\";\r\n          // eslint-disable-next-line no-self-assign\r\n          cell.className = cell.className; //IE\r\n        }\r\n      });\r\n      cell.addEventListener(\"dragenter\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let cells = that.getLineCells(index);\r\n        for (let cell of cells) {\r\n          cell.dataset.drag = \"over\";\r\n          // eslint-disable-next-line no-self-assign\r\n          cell.className = cell.className; //IE\r\n        }\r\n        e.preventDefault();\r\n      });\r\n      cell.addEventListener(\"dragover\", function(e): void {\r\n        e.preventDefault();\r\n      });\r\n      cell.addEventListener(\"drop\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let index2 = ListView.getIndexOfNode(this.parentNode as HTMLElement);\r\n        let cells = that.getLineCells(index);\r\n        for (let cell of cells) {\r\n          cell.dataset.drag = \"over\";\r\n          // eslint-disable-next-line no-self-assign\r\n          cell.className = cell.className; //IE\r\n        }\r\n        that.callEvent(\"itemDrop\", {\r\n          itemIndex: index,\r\n          subItemIndex: index2,\r\n          event: e\r\n        });\r\n        e.preventDefault();\r\n      });\r\n      cell.addEventListener(\"dragstart\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let index2 = ListView.getIndexOfNode(this.parentNode as HTMLElement);\r\n        that.callEvent(\"itemDragStart\", {\r\n          itemIndex: index,\r\n          subItemIndex: index2,\r\n          event: e\r\n        });\r\n      });\r\n      cell.addEventListener(\"click\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let index2 = ListView.getIndexOfNode(this.parentNode as HTMLElement);\r\n        if (e.ctrlKey) {\r\n          if (!that.isSelectItem(index)) that.addSelectItem(index);\r\n          else that.delSelectItem(index);\r\n        } else if (e.shiftKey) {\r\n          let indexes = [] as number[];\r\n          let s = Math.min(that.lastIndex, index);\r\n          let e = Math.max(that.lastIndex, index);\r\n          for (let i = s; i <= e; i++) indexes.push(i);\r\n          that.selectItem(indexes);\r\n        } else that.selectItem(index);\r\n        that.lastIndex = index;\r\n\r\n        that.callEvent(\"itemClick\", {\r\n          itemIndex: index,\r\n          subItemIndex: index2,\r\n          event: e\r\n        });\r\n      });\r\n      cell.addEventListener(\"dblclick\", function(e): void {\r\n        let index = ListView.getIndexOfNode(this);\r\n        let index2 = ListView.getIndexOfNode(this.parentNode as HTMLElement);\r\n        that.callEvent(\"itemDblClick\", {\r\n          itemIndex: index,\r\n          subItemIndex: index2,\r\n          event: e\r\n        });\r\n      });\r\n    }\r\n    if (columns.length === 0) return -1;\r\n    let index = columns[0].childNodes.length - 1;\r\n    if (value instanceof Array) {\r\n      for (let i = 0, l = value.length; i < l; i++) {\r\n        this.setItem(index, i, value[i]);\r\n      }\r\n    } else this.setItem(index, 0, value);\r\n    if (itemValue) this.setItemValue(index, itemValue);\r\n\r\n    if (this.areaWidth !== this.itemArea.clientWidth) {\r\n      this.areaWidth = this.itemArea.clientWidth;\r\n      this.resize();\r\n    }\r\n    return index;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row \r\n   * @param {number} column \r\n   * @param {*} value \r\n   * @returns\r\n   * @memberof ListView\r\n   */\r\n  public setSortKey(row: number, column: number, value: unknown): boolean {\r\n    let c = this.itemArea.childNodes[column];\r\n    if (c == null) return false;\r\n    let r = c.childNodes[row] as ChildNode & { keyValue?: unknown };\r\n    if (r == null) return false;\r\n    r.keyValue = value;\r\n    return true;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row \r\n   * @param {unknown[]} values \r\n   * @memberof ListView\r\n   */\r\n  public setSortKeys(row: number, values: unknown[]): void {\r\n    for (let i = 0, l = values.length; i < l; i++) {\r\n      let c = this.itemArea.childNodes[i];\r\n      if (c == null) break;\r\n      let r = c.childNodes[row] as ChildNode & { keyValue?: unknown };\r\n      if (r == null) break;\r\n      r.keyValue = values[i];\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} row \r\n   * @param {number} column \r\n   * @param {(string|HTMLElement)} value \r\n   * @returns\r\n   * @memberof ListView\r\n   */\r\n  public setItem(\r\n    row: number,\r\n    column: number,\r\n    value: string | number | HTMLElement\r\n  ): boolean {\r\n    let c = this.itemArea.childNodes[column];\r\n    if (c == null) return false;\r\n    let r = c.childNodes[row];\r\n    if (r == null) return false;\r\n    if (!(value instanceof HTMLElement)) {\r\n      var item = document.createElement(\"div\");\r\n      if (value != null) item.textContent = value.toString();\r\n      r.appendChild(item);\r\n    } else {\r\n      r.appendChild(value);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   *\r\n   *\r\n   * @protected\r\n   * @memberof ListView\r\n   */\r\n  protected resize(): void {\r\n    var headers = this.headers;\r\n    var resizers = this.resizers;\r\n    var itemArea = this.itemArea;\r\n    var lmitWidth = itemArea.clientWidth;\r\n    for (let i = 0, length = headers.childNodes.length; i < length; i++) {\r\n      lmitWidth -= this.columnWidth[i];\r\n    }\r\n    const autoIndex = this.columnAutoIndex;\r\n    for (let i = 0, length = headers.childNodes.length; i < length; i++) {\r\n      let node = headers.childNodes[i] as HTMLElement;\r\n      let resize = resizers.childNodes[i] as HTMLElement;\r\n      let column = itemArea.children[i] as HTMLElement;\r\n      let width = this.columnWidth[i];\r\n      if (autoIndex === i || (autoIndex === -1 && i === length - 1))\r\n        width += lmitWidth;\r\n      node.style.width = width + \"px\";\r\n      resize.style.left =\r\n        node.offsetLeft + width - resize.offsetWidth / 2 + \"px\";\r\n      column.style.width = width + \"px\";\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} flag\r\n   * @memberof ListView\r\n   */\r\n  public onLayout(flag: boolean): void {\r\n    super.onLayout(flag);\r\n    this.resize();\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./ListView.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"ListView\\\"]{user-select:none;overflow-x:auto !important}[data-jwf-style=\\\"ListView\\\"] img{height:90%}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderBack\\\"]{position:absolute;height:30px;width:100%;min-width:100%;background-image:linear-gradient(180deg, rgba(144,197,240,0.9) 0%, rgba(63,164,201,0.9) 50%, rgba(100,122,221,0.9) 100%)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]{position:relative;right:0px;left:0px;height:30px}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListResizers\\\"]{overflow:hidden;position:absolute;pointer-events:none;height:100%;width:100%}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListResizers\\\"] div{position:absolute;width:10px;height:100%;cursor:ew-resize;pointer-events:all}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListHeaders\\\"]{display:flex;align-items:center;height:100%;flex-grow:0;flex-shrink:0;overflow-x:visible}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListHeaders\\\"]>div{box-sizing:border-box;display:flex;border:#2e629e 1px;border-style:none solid none solid;justify-content:center;align-items:center;width:80px;flex-grow:0;flex-shrink:0;overflow:hidden;white-space:nowrap}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListHeaders\\\"]>div:hover{background-color:rgba(255,255,255,0.1)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListHeaders\\\"]>div[data-sort=\\\"asc\\\"]{border-top:1px rgba(255,100,100,0.8) double}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListHeaderArea\\\"]>[data-kind=\\\"ListHeaders\\\"]>div[data-sort=\\\"desc\\\"]{border-bottom:1px rgba(255,100,100,0.8) double}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"]{white-space:nowrap;position:relative;display:flex;height:calc(100% - 30px);overflow-y:auto;overflow-x:hidden;width:100%}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]{flex-grow:0;flex-shrink:0;height:100%}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"]{padding:2px;display:flex;flex-wrap:nowrap;align-items:center;border:transparent solid 1px;border-left:rgba(158,155,153,0.2) solid 1px;border-bottom:rgba(158,155,153,0.5) solid 1px;height:30px;overflow:hidden;white-space:nowrap;transition:0.1s}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"]:nth-child(odd){background-color:rgba(63,164,201,0.2)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"]:nth-child(even){background-color:rgba(63,201,183,0.2)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-hover=\\\"true\\\"]:nth-child(odd),[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-drag=\\\"over\\\"]:nth-child(odd){background-color:rgba(63,164,201,0.4)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-hover=\\\"true\\\"]:nth-child(even),[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-drag=\\\"over\\\"]:nth-child(even){background-color:rgba(63,201,183,0.4)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-select=\\\"true\\\"]:nth-child(odd){background-color:rgba(64,160,250,0.6)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-select=\\\"true\\\"]:nth-child(even){background-color:rgba(58,180,200,0.6)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-hover=\\\"true\\\"][data-item-select=\\\"true\\\"]:nth-child(odd){background-color:rgba(64,160,250,0.7)}[data-jwf-style=\\\"ListView\\\"]>[data-kind=\\\"ListItemArea\\\"] [data-kind=\\\"ListColumn\\\"]>[data-kind=\\\"ListCell\\\"][data-item-hover=\\\"true\\\"][data-item-select=\\\"true\\\"]:nth-child(even){background-color:rgba(58,180,200,0.7)}@keyframes nsDrawerShow{0%{transform:translateY(-100%)}100%{transform:translateY(0)}}@keyframes nsDrawerClose{0%{transform:translateY(0)}100%{transform:translateY(-100%)}}@keyframes snDrawerShow{0%{transform:translateY(100%)}100%{transform:translateY(0)}}@keyframes snDrawerClose{0%{transform:translateY(0)}100%{transform:translateY(100%)}}@keyframes weDrawerShow{0%{transform:translateX(-100%)}100%{transform:translateX(0)}}@keyframes weDrawerClose{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}@keyframes ewDrawerShow{0%{transform:translateX(100%)}100%{transform:translateX(0)}}@keyframes ewDrawerClose{0%{transform:translateX(0)}100%{transform:translateX(100%)}}[data-kind=\\\"Drawer\\\"]{background-color:rgba(240,240,240,0.6)}[data-kind=\\\"DrawerItem\\\"]{cursor:pointer;display:flex;align-items:center;margin:0.2em;margin-bottom:0.5em;padding:0.5em;height:2em}[data-kind=\\\"DrawerItem\\\"]>[data-kind=\\\"DrawerIcon\\\"]{background-size:100% 100%;height:100%;width:1.3em;margin-right:0.4em}[data-kind=\\\"DrawerItem\\\"]>[data-kind=\\\"DrawerText\\\"]{flex:1;font-size:2em}[data-kind=\\\"DrawerItem\\\"]:hover{background-color:#eeeeee;color:#5c6bb6}\\n\", \"\"]);\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\nimport { WINDOW_EVENT_MAP, BaseView } from \"./BaseView\";\r\nimport { Button } from \"./Button\";\r\nimport { FrameWindow } from \"./FrameWindow\";\r\nimport \"../scss/MessageBox.scss\";\r\n\r\nexport interface MessageBoxEventMap extends WINDOW_EVENT_MAP {\r\n  buttonClick: [unknown];\r\n}\r\nexport class MessageBox extends FrameWindow<MessageBoxEventMap> {\r\n  private label: BaseView;\r\n  public constructor(\r\n    title: string,\r\n    msg: string,\r\n    buttons?: [string, unknown][]\r\n  ) {\r\n    super();\r\n    this.setJwfStyle(\"MessageBox\");\r\n    this.setSize(300, 200);\r\n    this.setPos();\r\n    this.setTitle(title);\r\n    this.active();\r\n    this.setPadding(10, 10, 10, 10);\r\n\r\n    const label = new BaseView();\r\n    this.label = label;\r\n    label.setJwfStyle(\"MessageBoxLabel\");\r\n    this.addChild(label, \"client\");\r\n    if (msg) label.getClient().innerText = msg;\r\n    const that = this;\r\n    if (!buttons) {\r\n      buttons = [[\"OK\", true]];\r\n    }\r\n    for (let i = buttons.length - 1; i >= 0; i--) {\r\n      const buttonData = buttons[i];\r\n      const b = new Button(buttonData[0], buttonData[1]);\r\n      b.setAlign(\"center\");\r\n      this.addChild(b, \"bottom\");\r\n      b.addEventListener(\r\n        \"buttonClick\",\r\n        function(this: Button): void {\r\n          that.callEvent(\"buttonClick\", this.getValue());\r\n          that.close();\r\n        }.bind(b)\r\n      );\r\n    }\r\n  }\r\n  public setText(text: string): void {\r\n    this.label.getClient().innerText = text;\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./MessageBox.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"MessageBoxLabel\\\"]{display:flex;align-items:center;justify-content:center}\\n\", \"\"]);\n","import \"../scss/Panel.scss\";\r\nimport { BaseView } from \"./BaseView\";\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class Panel\r\n * @extends {BaseView}\r\n */\r\nexport class Panel extends BaseView {\r\n  public constructor() {\r\n    super();\r\n    this.setJwfStyle(\"Panel\");\r\n    this.setHeight(40);\r\n    this.setPadding(2);\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./Panel.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"Panel\\\"]{box-sizing:border-box;user-select:none;background-color:darkgrey;border-color:lightgray dimgrey dimgrey lightgray}\\n\", \"\"]);\n","import { BaseView } from \"./BaseView\";\r\nimport \"../scss/SelectBox.scss\";\r\n\r\nexport class SelectBox extends BaseView {\r\n  private select: HTMLSelectElement;\r\n  public constructor(option: {\r\n    name?: string;\r\n    options: { label: string; value: string | number | boolean }[];\r\n    event?: { [key: string]: () => void };\r\n  }) {\r\n    super();\r\n\r\n    this.setJwfStyle(\"SelectBox\");\r\n    this.setSize(80, 0);\r\n    this.setAutoSize(true);\r\n\r\n    let node = this.getClient();\r\n    let select = document.createElement(\"select\");\r\n    this.select = select;\r\n    select.name = name;\r\n\r\n    const options = option.options;\r\n    for (const o of options) {\r\n      const opNode = document.createElement(\"option\");\r\n      opNode.textContent = o.label;\r\n      opNode.value = o.value as string;\r\n      select.appendChild(opNode);\r\n    }\r\n    node.appendChild(select);\r\n    const event = option.event;\r\n    if (event) {\r\n      for (const key of Object.keys(event)) {\r\n        const proc = event[key as keyof typeof event];\r\n        select.addEventListener(key, proc);\r\n      }\r\n    }\r\n  }\r\n  public getValue() {\r\n    return this.select.value;\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./SelectBox.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"SelectBox\\\"]{border-radius:5%}[data-jwf-style=\\\"SelectBox\\\"] select{display:block;height:100%}\\n\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./Splitter.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nvar getUrl = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL___0___ = getUrl(require(\"./images/menu.svg\"));\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"SplitterView\\\"]{display:flex}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"ew\\\"]{align-items:center}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"ew\\\"] [data-kind=\\\"SplitterMenu\\\"]{right:0}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"we\\\"]{align-items:center}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"ns\\\"]{justify-content:center}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"sn\\\"]{justify-content:center}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"sn\\\"] [data-kind=\\\"SplitterMenu\\\"]{bottom:0}[data-jwf-style=\\\"SplitterView\\\"] [data-jwf-style=\\\"Splitter\\\"]{background-color:#aaaaaa;border:outset 2px #b8b7b7;user-select:none}[data-jwf-style=\\\"SplitterView\\\"] [data-kind=\\\"SplitterMenu\\\"]{position:absolute;background-color:rgba(255,255,255,0.4);opacity:0.8;background-repeat:no-repeat;width:32px;height:32px;margin:24px;cursor:pointer;background-size:100% 100%;background-image:url(\" + ___CSS_LOADER_URL___0___ + \");border-radius:10%;flex-grow:0;flex-shrink:0;z-index:100}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"ns\\\"] [data-jwf-style=\\\"Splitter\\\"],[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"sn\\\"] [data-jwf-style=\\\"Splitter\\\"]{cursor:ns-resize}[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"we\\\"] [data-jwf-style=\\\"Splitter\\\"],[data-jwf-style=\\\"SplitterView\\\"][data-splitter-type=\\\"ew\\\"] [data-jwf-style=\\\"Splitter\\\"]{cursor:ew-resize}\\n\", \"\"]);\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDpub25lO30NCgkuc3Qxe2ZpbGw6IzRCNEI0Qjt9DQo8L3N0eWxlPg0KPHJlY3QgY2xhc3M9InN0MCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiLz4NCjx0aXRsZT5tZW51PC90aXRsZT4NCjxyZWN0IHg9IjE1LjciIHk9IjE2IiBjbGFzcz0ic3QxIiB3aWR0aD0iOTYuMyIgaGVpZ2h0PSIxNiIvPg0KPHJlY3QgY2xhc3M9InN0MCIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiLz4NCjxyZWN0IHg9IjE1LjciIHk9Ijk2IiBjbGFzcz0ic3QxIiB3aWR0aD0iOTYuMyIgaGVpZ2h0PSIxNiIvPg0KPHJlY3QgeD0iMTUuNyIgeT0iNTYiIGNsYXNzPSJzdDEiIHdpZHRoPSI5Ni4zIiBoZWlnaHQ9IjE2Ii8+DQo8L3N2Zz4NCg==\"","/* eslint-disable @typescript-eslint/class-name-casing */\r\n/* eslint-disable @typescript-eslint/interface-name-prefix */\r\nimport { BaseView, WINDOW_PARAMS, WINDOW_EVENT_MAP } from \"./BaseView\";\r\nimport { CalendarView } from \"./CalendarView\";\r\nimport \"../scss/TableFormView.scss\";\r\n\r\nexport interface ITEM_OPTION {\r\n  label?: string;\r\n  type?:\r\n    | \"date\"\r\n    | \"string\"\r\n    | \"textarea\"\r\n    | \"password\"\r\n    | \"number\"\r\n    | \"checkbox\"\r\n    | \"select\"\r\n    | \"submit\"\r\n    | \"image\";\r\n  name?: string;\r\n  value?: string | number | boolean | Date;\r\n  link?: string;\r\n  image?: string;\r\n  image_width?: string;\r\n  styles?: { [key: string]: string };\r\n  events?: { [key: string]: () => void };\r\n  options?: {\r\n    name: string;\r\n    value: string | number;\r\n  }[];\r\n}\r\nexport interface TableFormViewMap extends WINDOW_EVENT_MAP {\r\n  itemChange: [FormInputElement];\r\n}\r\n\r\nexport type FormInputElement = (\r\n  | HTMLTextAreaElement\r\n  | HTMLInputElement\r\n  | HTMLSelectElement\r\n  | HTMLImageElement) & {\r\n  value?: string;\r\n  type2?: string;\r\n  value2?: Date | undefined;\r\n};\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class TableFormView\r\n * @extends {BaseView}\r\n */\r\nexport class TableFormView extends BaseView<TableFormViewMap> {\r\n  private items: HTMLDivElement;\r\n  private footer: HTMLDivElement;\r\n  public constructor(params?: WINDOW_PARAMS) {\r\n    super(params);\r\n    this.setJwfStyle(\"TableFormView\");\r\n\r\n    const clientArea = document.createElement(\"div\");\r\n    this.getClient().appendChild(clientArea);\r\n\r\n    const table = document.createElement(\"div\");\r\n    clientArea.appendChild(table);\r\n\r\n    const items = document.createElement(\"div\");\r\n    this.items = items;\r\n    table.appendChild(items);\r\n\r\n    const footer = document.createElement(\"div\");\r\n    this.footer = footer;\r\n    clientArea.appendChild(footer);\r\n  }\r\n  public addItem(params: ITEM_OPTION | ITEM_OPTION[]): HTMLElement | null {\r\n    //\r\n    if (Array.isArray(params)) {\r\n      for (const item of params) this.addItem(item);\r\n      return null;\r\n    }\r\n\r\n    if (params.type === \"submit\") {\r\n      const button = document.createElement(\"button\");\r\n      if (params.label) button.textContent = params.label;\r\n      if (params.name) button.name = params.name;\r\n      this.footer.appendChild(button);\r\n      if (params.events) {\r\n        const events = params.events;\r\n        for (const key in events) {\r\n          button.addEventListener(key, events[key]);\r\n        }\r\n      }\r\n      return button;\r\n    } else {\r\n      const that = this;\r\n      const row = document.createElement(\r\n        params.type === \"checkbox\" ? \"label\" : \"div\"\r\n      );\r\n\r\n      const label = document.createElement(\"div\");\r\n      row.appendChild(label);\r\n      if (params.label) label.innerText = params.label;\r\n      const data = document.createElement(\"div\");\r\n      row.appendChild(data);\r\n\r\n      if (params.events) {\r\n        const events = params.events;\r\n        for (const key in events) {\r\n          data.addEventListener(key, events[key]);\r\n        }\r\n      }\r\n\r\n      let input: FormInputElement;\r\n      let tag: HTMLDivElement | HTMLAnchorElement;\r\n      let date: Date;\r\n      switch (params.type) {\r\n        case \"date\":\r\n          input = document.createElement(\"input\");\r\n          input.type2 = params.type;\r\n          input.readOnly = true;\r\n          input.type = \"text\";\r\n          input.size = 14;\r\n          input.name = params.name || \"\";\r\n          date = new Date(params.value as string);\r\n          input.value = params.value ? date.toLocaleDateString() : \"-\";\r\n          input.value2 = date;\r\n          data.appendChild(input);\r\n          input.addEventListener(\r\n            \"click\",\r\n            (): void => {\r\n              const calendar = new CalendarView({ frame: true });\r\n              calendar.setPos();\r\n              if (input instanceof HTMLInputElement && input.value2)\r\n                calendar.setSelect(input.value2, true);\r\n              calendar.addEventListener(\r\n                \"date\",\r\n                (e): void => {\r\n                  input.value = e.date.toLocaleDateString();\r\n                  if (input instanceof HTMLInputElement) input.value2 = e.date;\r\n                  calendar.close();\r\n                  this.callEvent(\"itemChange\", input);\r\n                }\r\n              );\r\n            }\r\n          );\r\n          break;\r\n        case \"number\":\r\n          input = document.createElement(\"input\");\r\n          input.type2 = params.type;\r\n          input.type = \"number\";\r\n          input.name = params.name || \"\";\r\n          input.value = params.value\r\n            ? (parseInt(params.value.toString()).toString() as string)\r\n            : \"\";\r\n          data.appendChild(input);\r\n          break;\r\n        case \"image\":\r\n          input = document.createElement(\"img\");\r\n          if (params.image) input.src = params.image;\r\n          input.type2 = params.type;\r\n          input.name = params.name || \"\";\r\n          if (params.image_width) input.style.width = params.image_width;\r\n          data.appendChild(input);\r\n          break;\r\n        case \"textarea\":\r\n          input = document.createElement(\"textarea\");\r\n          input.type2 = params.type;\r\n          input.name = params.name || \"\";\r\n          input.value = (params.value as string) || \"\";\r\n          if (params.styles) {\r\n            const styles = params.styles;\r\n            for (const key of Object.keys(styles)) {\r\n              input.style.setProperty(key,styles[key]);\r\n            }\r\n          }\r\n          data.appendChild(input);\r\n          break;\r\n        case \"string\":\r\n        case \"password\":\r\n          input = document.createElement(\"input\");\r\n          input.type2 = params.type;\r\n          input.type = params.type === \"string\" ? \"text\" : \"password\";\r\n          input.name = params.name || \"\";\r\n          input.value = (params.value as string) || \"\";\r\n          data.appendChild(input);\r\n          break;\r\n        case \"checkbox\":\r\n          input = document.createElement(\"input\");\r\n          input.type2 = params.type;\r\n          input.type = \"checkbox\";\r\n          input.name = params.name || \"\";\r\n          input.checked = params.value == true;\r\n          data.appendChild(input);\r\n          break;\r\n        case \"select\":\r\n          input = document.createElement(\"select\");\r\n          input.type2 = params.type;\r\n          input.name = params.name || \"\";\r\n          input.addEventListener(\"change\", function(): void {\r\n            that.callEvent(\"itemChange\", this);\r\n          });\r\n\r\n          if (params.options) {\r\n            for (const o of params.options) {\r\n              const option = document.createElement(\"option\");\r\n              option.textContent = o.name;\r\n              option.value = o.value as string;\r\n              input.appendChild(option);\r\n            }\r\n          }\r\n          data.appendChild(input);\r\n\r\n          break;\r\n        default:\r\n          if (params.link) {\r\n            tag = document.createElement(\"a\");\r\n            tag.target = \"_blank\";\r\n            tag.href = params.link;\r\n          } else {\r\n            tag = document.createElement(\"div\");\r\n          }\r\n          if (params.image) {\r\n            const image = document.createElement(\"img\");\r\n            image.src = params.image;\r\n            if (params.image_width) image.style.width = params.image_width;\r\n            tag.appendChild(image);\r\n          } else {\r\n            tag.innerText = params.value as string;\r\n          }\r\n          data.appendChild(tag);\r\n          break;\r\n      }\r\n\r\n      this.items.appendChild(row);\r\n      return row;\r\n    }\r\n  }\r\n  public getItem(name: string): HTMLElement | null {\r\n    const node = this.getClient().querySelector(\r\n      `[name=\"${name}\"]`\r\n    ) as HTMLElement | null;\r\n    return node;\r\n  }\r\n  public getParams(): { [key: string]: string | number | boolean | undefined } {\r\n    const values: { [key: string]: string | number | boolean | undefined } = {};\r\n    const nodes = this.items.querySelectorAll(\"select,input,img,textarea\");\r\n    for (let length = nodes.length, i = 0; i < length; ++i) {\r\n      const v = nodes[i] as FormInputElement;\r\n      if (v instanceof HTMLSelectElement) {\r\n        const name = v.name;\r\n        const value = v.value;\r\n        values[name] = value;\r\n      } else if (v instanceof HTMLInputElement) {\r\n        const vnode = v as HTMLInputElement & { value2?: typeof values[0] };\r\n        const name = v.name;\r\n        let value;\r\n        switch (v.type2) {\r\n          case \"checkbox\":\r\n            value = v.checked;\r\n            break;\r\n          case \"number\":\r\n            value = parseInt(v.value);\r\n            break;\r\n          case \"date\":\r\n            if (v.value2) value = new Date(v.value2).toDateString();\r\n            break;\r\n          default:\r\n            value = vnode.value2 ? vnode.value2 : v.value;\r\n            break;\r\n        }\r\n        values[name] = value;\r\n      } else if (v instanceof HTMLImageElement) {\r\n        values[v.name] = v.value;\r\n      } else if (v instanceof HTMLTextAreaElement) {\r\n        values[v.name] = v.value;\r\n      }\r\n    }\r\n    return values;\r\n  }\r\n  public setParams(params: { [key: string]: string | number | boolean }): void {\r\n    const nodes = this.items.querySelectorAll(\"select,input,textarea\");\r\n    for (let length = nodes.length, i = 0; i < length; ++i) {\r\n      const v = nodes[i] as (HTMLInputElement | HTMLSelectElement|HTMLTextAreaElement) & {\r\n        type2?: string;\r\n        value2?: Date | undefined;\r\n      };\r\n      if (v instanceof HTMLSelectElement || v instanceof HTMLTextAreaElement) {\r\n        const value = params[v.name];\r\n        if (value != null) v.value = value.toString();\r\n      } else if (v instanceof HTMLInputElement) {\r\n        const value = params[v.name];\r\n        if (value != null) {\r\n          switch (v.type2) {\r\n            case \"checkbox\":\r\n              v.checked = value as boolean;\r\n              break;\r\n            case \"number\":\r\n              v.value = parseInt(value as string).toString();\r\n              break;\r\n            case \"date\":\r\n              v.value = new Date(value.toString()).toLocaleDateString();\r\n              v.value2 = new Date(value.toString());\r\n              break;\r\n            default:\r\n              v.value = value.toString();\r\n              break;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./TableFormView.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"TableFormView\\\"]>div{display:flex;flex-direction:column;width:100%}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child{overflow:auto;flex:1;justify-content:space-between}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div:hover{cursor:default}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div{width:100%;box-sizing:border-box;display:table;border-spacing:0 0.1em;border-collapse:separate}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>:hover{background:#aabbee}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>div,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>label{margin:0.1em;background:rgba(100,100,100,0.5);display:table-row}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>div>div,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>label>div{vertical-align:middle;display:table-cell;padding:0.2em 0.3em}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>div>div:first-child,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>label>div:first-child{white-space:nowrap}[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>div>div textarea,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>div>div input,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>label>div textarea,[data-jwf-style=\\\"TableFormView\\\"]>div>div:first-child>div>label>div input{min-width:95%}[data-jwf-style=\\\"TableFormView\\\"]>div>div:nth-child(2){display:flex;flex-direction:column;justify-content:center;padding:0.1em}\\n\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./TextBox.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"TextBox\\\"]>div{display:flex;padding:0.1em}[data-jwf-style=\\\"TextBox\\\"]>div>img{height:1.8em}[data-jwf-style=\\\"TextBox\\\"]>div>div{flex:1;position:relative}[data-jwf-style=\\\"TextBox\\\"]>div>div>input{user-select:all;position:absolute;background-color:rgba(219,238,253,0.5);color:black;min-height:2em;padding:0.2em;border:solid 1px;width:100%}[data-jwf-style=\\\"TextBox\\\"]>div>div>div{color:rgba(0,0,0,0.8);white-space:nowrap;position:absolute;padding:0.2em}\\n\", \"\"]);\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./TextArea.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"TextArea\\\"] textarea{background:transparent;width:100%;height:100%}\\n\", \"\"]);\n","/* eslint-disable @typescript-eslint/class-name-casing */\r\nimport { BaseView, WINDOW_EVENT_MAP, WINDOW_PARAMS } from \"./BaseView\";\r\nimport \"../scss/TreeView.scss\";\r\n\r\nexport interface TREEVIEW_EVENT_SELECT {\r\n  item: TreeItem;\r\n  user: boolean;\r\n}\r\nexport interface TREEVIEW_EVENT_DROP {\r\n  item: TreeItem;\r\n  srcValue?: unknown;\r\n  event: DragEvent;\r\n}\r\nexport interface TREEVIEW_EVENT_DRAG_START {\r\n  item: TreeItem;\r\n  event: DragEvent;\r\n}\r\nexport interface TREEVIEW_EVENT_OPEN {\r\n  item: TreeItem;\r\n  opened: boolean;\r\n}\r\nexport interface TreeViewEventMap extends WINDOW_EVENT_MAP {\r\n  itemOver: [{ event: MouseEvent; item: TreeItem }];\r\n  itemOpen: [TREEVIEW_EVENT_OPEN];\r\n  itemSelect: [TREEVIEW_EVENT_SELECT];\r\n  itemDblClick: [TREEVIEW_EVENT_SELECT];\r\n  itemDrop: [TREEVIEW_EVENT_DROP];\r\n  itemDragStart: [TREEVIEW_EVENT_DRAG_START];\r\n}\r\ntype TreeItemElement = HTMLDivElement & {\r\n  treeItem?: TreeItem;\r\n};\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class TreeItem\r\n */\r\nexport class TreeItem {\r\n  private hNode: TreeItemElement;\r\n  private childNode: HTMLElement;\r\n  private opened: boolean = true;\r\n  private body: HTMLElement;\r\n  private value: unknown;\r\n  private keys: { [key: string]: unknown } = {};\r\n  /**\r\n   *Creates an instance of TreeItem.\r\n   * @param {string} [label]\r\n   * @param {boolean} [opened]\r\n   * @memberof TreeItem\r\n   */\r\n  public constructor(label?: string, opened?: boolean) {\r\n    let hNode = document.createElement(\"div\") as TreeItemElement;\r\n    this.hNode = hNode;\r\n    hNode.treeItem = this;\r\n    hNode.dataset.kind = \"TreeItem\";\r\n    let row1 = document.createElement(\"div\");\r\n    row1.dataset.kind = \"TreeRow\";\r\n    hNode.appendChild(row1);\r\n    row1.addEventListener(\r\n      \"click\",\r\n      (): void => {\r\n        this.selectItem(false, true);\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"dblclick\",\r\n      (): void => {\r\n        const treeView = this.getTreeView();\r\n        if (treeView)\r\n          treeView.callEvent(\"itemDblClick\", { item: this, user: true });\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"dragstart\",\r\n      (e): void => {\r\n        const treeView = this.getTreeView();\r\n        if (treeView) {\r\n          if (e.dataTransfer) {\r\n            e.dataTransfer.setData(\r\n              \"text/plain\",\r\n              JSON.stringify({ itemValue: this.getItemValue() })\r\n            );\r\n          }\r\n          treeView.callEvent(\"itemDragStart\", { item: this, event: e });\r\n        }\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"dragleave\",\r\n      (): void => {\r\n        row1.dataset.drag = \"\";\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"dragenter\",\r\n      (e): void => {\r\n        row1.dataset.drag = \"over\";\r\n        e.preventDefault();\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"mouseover\",\r\n      (e): void => {\r\n        const treeView = this.getTreeView();\r\n        if (treeView) treeView.callEvent(\"itemOver\", { event: e, item: this });\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"dragover\",\r\n      (e): void => {\r\n        e.preventDefault();\r\n      }\r\n    );\r\n    row1.addEventListener(\r\n      \"drop\",\r\n      (e): void => {\r\n        const treeView = this.getTreeView();\r\n        if (treeView) {\r\n          let value: unknown = undefined;\r\n          if (e.dataTransfer) {\r\n            try {\r\n              const v = JSON.parse(e.dataTransfer.getData(\"text/plain\"));\r\n              if (v && v.itemValue) value = v.itemValue;\r\n            } catch (e) {\r\n              //\r\n            }\r\n          }\r\n\r\n          treeView.callEvent(\"itemDrop\", {\r\n            event: e,\r\n            item: this,\r\n            srcValue: value\r\n          });\r\n        }\r\n        row1.dataset.drag = \"\";\r\n        e.preventDefault();\r\n      }\r\n    );\r\n    let icon = document.createElement(\"div\");\r\n    icon.dataset.kind = \"TreeIcon\";\r\n    row1.appendChild(icon);\r\n    icon.addEventListener(\r\n      \"click\",\r\n      (e): void => {\r\n        this.openItem(!this.opened, true);\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n      }\r\n    );\r\n\r\n    let body = document.createElement(\"div\");\r\n    body.dataset.kind = \"TreeBody\";\r\n    this.body = body;\r\n    row1.appendChild(body);\r\n    body.textContent = label != null ? label : \"\";\r\n    body.draggable = true;\r\n\r\n    let row2 = document.createElement(\"div\");\r\n    row2.dataset.kind = \"TreeRow\";\r\n    hNode.appendChild(row2);\r\n    let child = document.createElement(\"div\");\r\n    this.childNode = child;\r\n    child.dataset.kind = \"TreeChild\";\r\n    row2.appendChild(child);\r\n\r\n    this.openItem(opened ? true : false);\r\n  }\r\n  public isOpened(): boolean {\r\n    return this.opened;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {HTMLElement}\r\n   * @memberof TreeItem\r\n   */\r\n  public getNode(): HTMLElement {\r\n    return this.hNode;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {HTMLElement}\r\n   * @memberof TreeItem\r\n   */\r\n  public getBody(): HTMLElement {\r\n    return this.body;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} name\r\n   * @param {*} value\r\n   * @memberof TreeItem\r\n   */\r\n  public setKey(name: string, value: unknown): void {\r\n    this.keys[name] = value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} name\r\n   * @returns\r\n   * @memberof TreeItem\r\n   */\r\n  public getKey(name: string): unknown {\r\n    return this.keys[name];\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} [label] \r\n   * @param {boolean} [opened] \r\n   * @returns {TreeItem} \r\n   * @memberof TreeItem\r\n   */\r\n  public addItem(\r\n    label?: string | [string, unknown],\r\n    opened?: boolean\r\n  ): TreeItem {\r\n    let name: string;\r\n    let value = null;\r\n    if (label instanceof Array) {\r\n      name = label[0];\r\n      value = label[1];\r\n    } else {\r\n      name = label || \"\";\r\n    }\r\n    let item = new TreeItem(name, opened);\r\n    if (value != null) item.setItemValue(value);\r\n    this.childNode.appendChild(item.getNode());\r\n    this.openItem(this.opened, false);\r\n    return item;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof TreeItem\r\n   */\r\n  public clearItem(): void {\r\n    let childs = this.childNode.childNodes;\r\n    while (childs.length) {\r\n      this.childNode.removeChild(childs[0]);\r\n    }\r\n    this.openItem(this.opened);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof TreeItem\r\n   */\r\n  public removeItem(): void {\r\n    let treeView = this.getTreeView();\r\n    if (treeView && this !== treeView.getRootItem() && this.hNode.parentNode)\r\n      this.hNode.parentNode.removeChild(this.hNode);\r\n  }\r\n  public moveItem(vector: number): boolean {\r\n    const parent = this.getParentItem();\r\n    if (parent === null) return false;\r\n    const childs = parent.childNode.childNodes as NodeListOf<TreeItemElement>;\r\n    var count = childs.length;\r\n    for (var i = 0; i < count; i++) {\r\n      if (childs[i].treeItem === this) {\r\n        if (vector < 0) {\r\n          if (i === 0) return false;\r\n          parent.childNode.insertBefore(this.getNode(), childs[i - 1]);\r\n        } else {\r\n          if (i === childs.length - 1) return false;\r\n          parent.childNode.insertBefore(childs[i + 1], this.getNode());\r\n        }\r\n        break;\r\n      }\r\n    }\r\n    return true;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {number}\r\n   * @memberof TreeItem\r\n   */\r\n  public getChildCount(): number {\r\n    return this.childNode.childNodes.length;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   * @memberof TreeItem\r\n   */\r\n  public setItemValue(value: unknown): void {\r\n    this.value = value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {*}\r\n   * @memberof TreeItem\r\n   */\r\n  public getItemValue(): unknown {\r\n    return this.value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {string} value\r\n   * @memberof TreeItem\r\n   */\r\n  public setItemText(value: string): void {\r\n    this.body.textContent = value;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {string}\r\n   * @memberof TreeItem\r\n   */\r\n  public getItemText(): string {\r\n    return this.body.textContent || \"\";\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {number} index\r\n   * @returns {TreeItem}\r\n   * @memberof TreeItem\r\n   */\r\n  public getChildItem(index: number): TreeItem {\r\n    const node = this.childNode.childNodes[index] as TreeItemElement;\r\n    return node.treeItem as TreeItem;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof TreeItem\r\n   */\r\n  public getTreeLevel(){\r\n    let parent:TreeItem|null = this;\r\n    let i = 0;\r\n    while((parent = parent.getParentItem()))\r\n      i++;\r\n    return i;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {TreeItem}\r\n   * @memberof TreeItem\r\n   */\r\n  public getParentItem(): TreeItem | null {\r\n    let parent: HTMLElement = this.hNode.parentNode as HTMLElement;\r\n    if (!parent) return null;\r\n    parent = parent.parentNode as HTMLElement;\r\n    if (!parent) return null;\r\n    parent = parent.parentNode as HTMLElement;\r\n    if (parent && parent.dataset.kind === \"TreeItem\") {\r\n      const treeNode = parent as TreeItemElement;\r\n      return treeNode.treeItem ? treeNode.treeItem : null;\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} value\r\n   * @returns {TreeItem}\r\n   * @memberof TreeItem\r\n   */\r\n  public findItemFromValue(value: unknown): TreeItem | null {\r\n    if (this.getItemValue() == value) return this;\r\n    const nodes = this.childNode.childNodes;\r\n    const count = nodes.length;\r\n    for (let i = 0; i < count; i++) {\r\n      const node = nodes[i] as TreeItemElement;\r\n      const child = node.treeItem;\r\n      if (child) {\r\n        const f = child.findItemFromValue(value);\r\n        if (f != null) return f;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {boolean} opened\r\n   * @param {boolean} [anime]\r\n   * @memberof TreeItem\r\n   */\r\n  public openItem(opened: boolean, anime?: boolean): void {\r\n    const hNode = this.hNode;\r\n    let flag = this.opened !== opened;\r\n    this.opened = opened;\r\n    if (this.getChildCount() == 0) {\r\n      hNode.dataset.stat = \"alone\";\r\n    } else {\r\n      this.hNode.dataset.stat = opened ? \"open\" : \"close\";\r\n      if (opened) {\r\n        const items = hNode.querySelectorAll(\r\n          \"[data-kind=TreeItem][data-stat=open] > [data-kind=TreeRow]:nth-child(2) > [data-kind=TreeChild] > [data-kind=TreeItem]\"\r\n        );\r\n        for (let i = 0; i < items.length; i++) {\r\n          const n = items[i] as HTMLElement;\r\n          if (anime) {\r\n            n.style.animation = flag ? \"treeOpen 0.3s ease 0s 1 normal\" : \"\";\r\n          } else {\r\n            n.style.animation = \"\";\r\n          }\r\n          n.style.display = \"block\";\r\n        }\r\n      } else {\r\n        const items = this.childNode.querySelectorAll(\"[data-kind=TreeItem]\");\r\n        for (let i = 0; i < items.length; i++) {\r\n          const n = items[i] as HTMLElement;\r\n          if (anime) {\r\n            n.style.animation = flag ? \"treeClose 0.8s ease 0s 1 forwards\" : \"\";\r\n          } else {\r\n            n.style.display = \"none\";\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (flag) {\r\n      let treeView = this.getTreeView();\r\n      if (treeView)\r\n        treeView.callEvent(\"itemOpen\", { item: this, opened: opened });\r\n    }\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof TreeItem\r\n   */\r\n  public selectItem(scroll?: boolean, user?: boolean): void {\r\n    let treeView = this.getTreeView();\r\n    if (treeView) treeView.selectItem(this, scroll, user);\r\n  }\r\n  /**\r\n   *TreeView\r\n   *\r\n   * @returns {TreeView}\r\n   * @memberof TreeItem\r\n   */\r\n  public getTreeView(): TreeView | null {\r\n    let node: HTMLElement | null = this.hNode;\r\n    while (node && node.dataset.jwfStyle !== \"TreeView\")\r\n      node = node.parentElement;\r\n    if (node) {\r\n      const treeView = (node as HTMLElement & { treeView?: TreeView }).treeView;\r\n      return treeView ? treeView : null;\r\n    }\r\n    return null;\r\n  }\r\n}\r\n\r\n/**\r\n *TreeView\r\n *\r\n * @export\r\n * @class TreeView\r\n * @extends {BaseView}\r\n */\r\nexport class TreeView<\r\n  T extends TreeViewEventMap = TreeViewEventMap\r\n> extends BaseView<T> {\r\n  private mRootItem: TreeItem;\r\n  private mSelectItem: TreeItem | null = null;\r\n  /**\r\n   *Creates an instance of TreeView.\r\n   * @memberof TreeView\r\n   */\r\n  public constructor(params?: WINDOW_PARAMS) {\r\n    super(params);\r\n    let client = this.getClient() as HTMLDivElement & {\r\n      treeView?: TreeView;\r\n    };\r\n    client.dataset.jwfStyle = \"TreeView\";\r\n    client.treeView = this;\r\n\r\n    let item = new TreeItem(\"root\", true);\r\n    this.mRootItem = item;\r\n    client.appendChild(item.getNode());\r\n  }\r\n\r\n  /**\r\n   * \r\n   *\r\n   * @param {*} value\r\n   * @returns {TreeItem}\r\n   * @memberof TreeView\r\n   */\r\n  public findItemFromValue(value: unknown): TreeItem | null {\r\n    return this.mRootItem.findItemFromValue(value);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns {TreeItem}\r\n   * @memberof TreeView\r\n   */\r\n  public getRootItem(): TreeItem {\r\n    return this.mRootItem;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {*} [label]\r\n   * @param {boolean} [opened]\r\n   * @returns {TreeItem}\r\n   * @memberof TreeView\r\n   */\r\n  public addItem(\r\n    label?: string | [string, unknown],\r\n    opened?: boolean\r\n  ): TreeItem {\r\n    return this.mRootItem.addItem(label, opened);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @memberof TreeView\r\n   */\r\n  public clearItem(): void {\r\n    this.mRootItem.clearItem();\r\n    this.mRootItem.setItemText(\"root\");\r\n    this.mRootItem.setItemValue(null);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @param {TreeItem} item \r\n   * @memberof TreeView\r\n   */\r\n  public selectItem(item: TreeItem, scroll?: boolean, user?: boolean): void {\r\n    const that = this;\r\n    function animationEnd(this: HTMLElement): void {\r\n      this.removeEventListener(\"animationend\", animationEnd);\r\n      const client = that.getClient();\r\n      const scrollTop = item.getNode().offsetTop - that.getClientHeight() / 2;\r\n      if (client.scrollTo) client.scrollTo({top:scrollTop,behavior: \"smooth\"});\r\n      else client.scrollTop = scrollTop;\r\n    }\r\n\r\n    if (this.mSelectItem !== item) {\r\n      if (this.mSelectItem) this.mSelectItem.getNode().dataset.select = \"false\";\r\n      item.getNode().dataset.select = \"true\";\r\n      this.mSelectItem = item;\r\n\r\n      let parent: TreeItem | null = item;\r\n      while ((parent = parent.getParentItem())) {\r\n        parent.openItem(true, user);\r\n      }\r\n      item.openItem(true, user);\r\n    }\r\n    if (scroll) {\r\n      const client = that.getClient();\r\n      client.scrollIntoView({behavior: \"smooth\"});\r\n      const scrollTop = item.getNode().offsetTop - that.getClientHeight() / 2;\r\n      if (client.scrollTo) client.scrollTo({top:scrollTop,behavior: \"smooth\"});\r\n      else client.scrollTop = scrollTop;\r\n      item.getNode().addEventListener(\"animationend\", animationEnd);\r\n    }\r\n    this.callEvent(\"itemSelect\", { item, user: !!user });\r\n  }\r\n  /**\r\n   * \r\n   *\r\n   * @param {*} value\r\n   * @memberof TreeView\r\n   */\r\n  public selectItemFromValue(\r\n    value: unknown,\r\n    scroll?: boolean,\r\n    user?: boolean\r\n  ): void {\r\n    let item = this.mRootItem.findItemFromValue(value);\r\n    if (item) item.selectItem(scroll, user);\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns \r\n   * @memberof TreeView\r\n   */\r\n  public getSelectItem(): TreeItem | null {\r\n    return this.mSelectItem;\r\n  }\r\n  /**\r\n   *\r\n   *\r\n   * @returns\r\n   * @memberof TreeView\r\n   */\r\n  public getSelectItemValue(): unknown {\r\n    if (!this.mSelectItem) return null;\r\n    return this.mSelectItem.getItemValue();\r\n  }\r\n  public getTreeStat(): {\r\n    [key: string]: boolean;\r\n  } {\r\n    const treeStat: { [key: string]: boolean } = {};\r\n    const getStat = (item: TreeItem): void => {\r\n      if (item.getItemValue() != null)\r\n        treeStat[\r\n          (item.getItemValue() as string | number | object).toString()\r\n        ] = item.isOpened();\r\n      const count = item.getChildCount();\r\n      for (let i = 0; i < count; i++) {\r\n        getStat(item.getChildItem(i));\r\n      }\r\n    };\r\n    getStat(this.getRootItem());\r\n    return treeStat;\r\n  }\r\n  public setTreeStat(treeStat: { [key: string]: boolean }): void {\r\n    for (const value of Object.keys(treeStat)) {\r\n      const item = this.findItemFromValue(value);\r\n      if (item) {\r\n        item.openItem(treeStat[value], false);\r\n      }\r\n    }\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./TreeView.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Imports\nvar getUrl = require(\"../node_modules/css-loader/dist/runtime/getUrl.js\");\nvar ___CSS_LOADER_URL___0___ = getUrl(require(\"./images/tclose.svg\"));\nvar ___CSS_LOADER_URL___1___ = getUrl(require(\"./images/topen.svg\"));\nvar ___CSS_LOADER_URL___2___ = getUrl(require(\"./images/talone.svg\"));\n// Module\nexports.push([module.id, \"@keyframes treeOpen{0%{margin-top:-1.5em;opacity:0.2}100%{margin-top:0%}}@keyframes treeClose{0%{margin-top:0;opacity:0.6}90%{margin-top:-2em;opacity:0.6}100%{margin-top:-100%;transform:scaleY(0);opacity:0;visibility:hidden}}[data-jwf-style=\\\"TreeView\\\"]{overflow:auto !important;user-select:none}[data-jwf-style=\\\"TreeView\\\"]>[data-kind=\\\"TreeItem\\\"]{padding-left:0em}[data-kind=\\\"TreeRow\\\"]{display:flex}[data-kind=\\\"TreeRow\\\"]:first-child:hover{border-bottom:black 1px solid}[data-kind=\\\"TreeRow\\\"][data-drag=\\\"over\\\"]{background-color:rgba(80,233,149,0.2)}[data-kind=\\\"TreeRow\\\"]:first-child{cursor:pointer}[data-kind=\\\"TreeRow\\\"]:nth-child(2)>[data-kind=\\\"TreeChild\\\"]{overflow:hidden}[data-kind=\\\"TreeChild\\\"]{flex:1}[data-kind=\\\"TreeBody\\\"]{flex:1}[data-kind=\\\"TreeIcon\\\"]{background-repeat:no-repeat;width:16px;height:16px;margin:2px;vertical-align:middle;cursor:default;background-size:100% 100%;background-image:url(\" + ___CSS_LOADER_URL___0___ + \");flex-grow:0;flex-shrink:0}[data-kind=\\\"TreeItem\\\"]{padding-left:1em;display:flex;flex-direction:column;flex:1}[data-kind=\\\"TreeItem\\\"][data-stat=\\\"close\\\"]>[data-kind=\\\"TreeRow\\\"]>[data-kind=\\\"TreeIcon\\\"]{background-image:url(\" + ___CSS_LOADER_URL___0___ + \")}[data-kind=\\\"TreeItem\\\"][data-stat=\\\"open\\\"]>[data-kind=\\\"TreeRow\\\"]>[data-kind=\\\"TreeIcon\\\"]{background-image:url(\" + ___CSS_LOADER_URL___1___ + \")}[data-kind=\\\"TreeItem\\\"][data-stat=\\\"alone\\\"]>[data-kind=\\\"TreeRow\\\"]>[data-kind=\\\"TreeIcon\\\"]{background-image:url(\" + ___CSS_LOADER_URL___2___ + \")}[data-kind=\\\"TreeItem\\\"][data-select=\\\"true\\\"]>[data-kind=\\\"TreeRow\\\"]:first-child{background-color:rgba(80,80,233,0.2);flex:1}\\n\", \"\"]);\n","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCgkuc3Qxe2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NC4wNTU0O3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCgkuc3Qye2ZpbGw6bm9uZTt9DQo8L3N0eWxlPg0KPHRpdGxlPnRjbG9zZTwvdGl0bGU+DQo8cmVjdCB4PSI2LjYiIHk9IjcuMSIgY2xhc3M9InN0MCIgd2lkdGg9IjExNC4zIiBoZWlnaHQ9IjExNC4zIi8+DQo8cGF0aCBkPSJNMTE4LjksOS4xdjExMC4zSDguNlY5LjFIMTE4LjkgTTEyMi45LDUuMUg0LjZ2MTE4LjRoMTE4LjRWNS4xeiIvPg0KPGxpbmUgY2xhc3M9InN0MSIgeDE9IjEzLjkiIHkxPSI2NC40IiB4Mj0iMTEzLjYiIHkyPSI2NC40Ii8+DQo8bGluZSBjbGFzcz0ic3QxIiB4MT0iNjMuOSIgeTE9IjExLjkiIHgyPSI2My45IiB5Mj0iMTE0LjgiLz4NCjxyZWN0IGNsYXNzPSJzdDIiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCgkuc3Qxe2ZpbGw6bm9uZTtzdHJva2U6IzAwMDAwMDtzdHJva2Utd2lkdGg6NC4wNTU0O3N0cm9rZS1taXRlcmxpbWl0OjEwO30NCgkuc3Qye2ZpbGw6bm9uZTt9DQo8L3N0eWxlPg0KPHRpdGxlPnRvcGVuPC90aXRsZT4NCjxyZWN0IHg9IjYuNiIgeT0iNy4xIiBjbGFzcz0ic3QwIiB3aWR0aD0iMTE0LjMiIGhlaWdodD0iMTE0LjMiLz4NCjxwYXRoIGQ9Ik0xMTguOSw5LjF2MTEwLjNIOC42VjkuMUgxMTguOSBNMTIyLjksNS4xSDQuNnYxMTguNGgxMTguNFY1LjF6Ii8+DQo8bGluZSBjbGFzcz0ic3QxIiB4MT0iMTMuOSIgeTE9IjY0LjQiIHgyPSIxMTMuNiIgeTI9IjY0LjQiLz4NCjxyZWN0IGNsYXNzPSJzdDIiIHdpZHRoPSIxMjgiIGhlaWdodD0iMTI4Ii8+DQo8L3N2Zz4NCg==\"","module.exports = \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i44Os44Kk44Ok44O8XzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCINCgkgeT0iMHB4IiB3aWR0aD0iMTI4cHgiIGhlaWdodD0iMTI4cHgiIHZpZXdCb3g9IjAgMCAxMjggMTI4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMjggMTI4OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZmlsbDojRkZGRkZGO30NCgkuc3Qxe2ZpbGw6bm9uZTt9DQoJLnN0MntmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjQuMDU1NDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9DQo8L3N0eWxlPg0KPHRpdGxlPnRhbG9uZTwvdGl0bGU+DQo8cmVjdCB4PSI2LjYiIHk9IjcuMSIgY2xhc3M9InN0MCIgd2lkdGg9IjExNC4zIiBoZWlnaHQ9IjExNC4zIi8+DQo8cGF0aCBkPSJNMTE4LjksOS4xdjExMC4zSDguNlY5LjFIMTE4LjkgTTEyMi45LDUuMUg0LjZ2MTE4LjRoMTE4LjRWNS4xeiIvPg0KPHJlY3QgY2xhc3M9InN0MSIgd2lkdGg9IjEyOCIgaGVpZ2h0PSIxMjgiLz4NCjxyZWN0IHg9IjU2LjUiIHk9IjU3LjMiIGNsYXNzPSJzdDIiIHdpZHRoPSIxMy44IiBoZWlnaHQ9IjEzLjgiLz4NCjwvc3ZnPg0K\"","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./ColorPickerView.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]{display:flex;flex-direction:column;align-content:center}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>[data-type=colors]{border:solid 1px;margin:0.1em;display:flex;overflow:auto;flex-wrap:wrap;justify-content:flex-start}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>[data-type=colors]>div{display:flex;cursor:pointer;padding:1px;margin:0.1em;width:1.2em;height:1.2em;border:solid 2px}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>[data-type=colors]>div[data-active=true]{border-color:red}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>[data-type=colors]>div>div{flex:1}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>div{flex-direction:row;display:flex;justify-content:space-between}[data-jwf-style=\\\"ColorPickerWindow\\\"] [data-jwf-style=\\\"ColorSelector\\\"]>div>input{flex-grow:1;width:3ex;margin:0.1em}\\n\", \"\"]);\n","import \"../../scss/TextEditWindow.scss\";\r\nimport { EditableView } from \"./EditableView\";\r\nimport { PanelCreateParam } from \"./PanelControl\";\r\nimport { FrameWindow } from \"../FrameWindow\";\r\nimport { TimerProc } from \"../Libs\";\r\nimport { TextArea } from \"../TextArea\";\r\nimport { Splitter } from \"../Splitter\";\r\n\r\n/**\r\n *\r\n *\r\n * @export\r\n * @class TextEditWindow\r\n * @extends {JWF.FrameWindow}\r\n */\r\nexport class TextEditWindow extends FrameWindow {\r\n  private htmlTimer: TimerProc;\r\n  private textTimer: TimerProc;\r\n  private editableView:EditableView;\r\n  private textArea:TextArea;\r\n\r\n  public constructor() {\r\n    super();\r\n\r\n    this.setJwfStyle(\"TextEditWindow\");\r\n    this.setSize(800, 600);\r\n\r\n    const splitter = new Splitter();\r\n    this.addChild(splitter, \"client\");\r\n    splitter.setSplitterPos(600);\r\n    this.setPos();\r\n\r\n    const editableView = new EditableView();\r\n    this.editableView = editableView;\r\n    splitter.addChild(0, editableView, \"client\");\r\n    editableView.addEventListener(\"updateText\", () => {\r\n      this.htmlTimer.call();\r\n    });\r\n\r\n    const textArea = new TextArea();\r\n    this.textArea = textArea;\r\n    splitter.addChild(1, textArea, \"client\");\r\n    textArea.addEventListener(\"updateText\", () => {\r\n      this.textTimer.call();\r\n    });\r\n\r\n    //\r\n    this.htmlTimer = new TimerProc(() => {\r\n      textArea.setText(editableView.getHtml());\r\n    }, 500);\r\n    this.textTimer = new TimerProc(() => {\r\n      editableView.setHtml(textArea.getText());\r\n    }, 500);\r\n  }\r\n  public setHtml(value:string){\r\n    this.textArea.setText(value);\r\n    this.editableView.setHtml(value);\r\n  }\r\n  public getHtml(){\r\n    return this.textArea.getText();\r\n  }\r\n  public createControl(param:PanelCreateParam){\r\n     this.editableView.createControl(param);\r\n  }\r\n  public getEditableView(){\r\n    return this.editableView;\r\n  }\r\n  public insertNode(node: HTMLElement) {\r\n    this.editableView.insertNode(node);\r\n  }\r\n  public setRange(){\r\n    this.editableView.setRange();\r\n  }\r\n}\r\n","var content = require(\"!!../node_modules/css-loader/dist/cjs.js!../node_modules/sass-loader/dist/cjs.js!./TextEditWindow.scss\");\n\nif (typeof content === 'string') {\n  content = [[module.id, content, '']];\n}\n\nvar options = {}\n\noptions.insert = \"head\";\noptions.singleton = false;\n\nvar update = require(\"!../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\")(content, options);\n\nif (content.locals) {\n  module.exports = content.locals;\n}\n","exports = module.exports = require(\"../node_modules/css-loader/dist/runtime/api.js\")(false);\n// Module\nexports.push([module.id, \"[data-jwf-style=\\\"TextEditWindow\\\"]{background-color:rgba(255,255,255,0.8) !important}[data-jwf-style=\\\"TextEditWindow\\\"] [data-jwf-style=\\\"Panel\\\"]{display:flex;padding:0.2em;align-items:center}[data-jwf-style=\\\"TextEditWindow\\\"] [data-jwf-style=\\\"Panel\\\"]>*{height:100%;border-radius:0.3em;display:flex;align-items:center}[data-jwf-style=\\\"TextEditWindow\\\"] label[data-edit-control]{margin:0.1em;box-sizing:border-box;padding:0.2em;background-color:rgba(255,255,255,0.8)}[data-jwf-style=\\\"TextEditWindow\\\"] .code,[data-jwf-style=\\\"TextEditWindow\\\"] .code2{background-color:rgba(0,100,0,0.1);overflow:auto;display:block;border:dashed rgba(0,0,0,0.05);font-size:110%;font-weight:bold;padding:0.5em !important;white-space:nowrap;font-family:MeiryoKe_Gothic, \\\"Ricty Diminished\\\", \\\"Osaka\\\", \\\"Osaka-\\\", Osaka-mono, \\\" \\\",\\r \\\"MS Gothic\\\", \\\"Courier New\\\", Courier, Monaco, Menlo, Consolas, \\\"Lucida Console\\\", monospace}[data-jwf-style=\\\"EditableView\\\"]{display:flex;flex-direction:column}[data-jwf-style=\\\"EditableView\\\"]>:nth-child(1){display:flex;flex-wrap:wrap;background-color:rgba(0,0,0,0.2)}[data-jwf-style=\\\"EditableView\\\"]>:nth-child(1) *{box-sizing:border-box;height:2.5em;border-radius:0.3em;display:flex;align-items:center}[data-jwf-style=\\\"EditableView\\\"]>:nth-child(2){flex:1;overflow:auto;padding:0.2em}\\n\", \"\"]);\n","import { TextInputWindow } from \"./TextInputWindow\";\r\nimport { PanelControl, PanelCreateParam } from \"./PanelControl\";\r\nimport { WINDOW_EVENT_MAP, BaseView } from \"../BaseView\";\r\n\r\nexport interface CustomEvent extends WINDOW_EVENT_MAP {\r\n  updateText: [];\r\n  insertFile: [{ fileList: FileList; enter: boolean }];\r\n}\r\n\r\nexport class EditableView extends BaseView<CustomEvent> {\r\n  private htmlArea: HTMLDivElement;\r\n  private panel?: HTMLElement;\r\n  private keepRange?: Range;\r\n  public constructor() {\r\n    super();\r\n    this.setJwfStyle(\"EditableView\");\r\n    this.addPanel();\r\n    const htmlArea = document.createElement(\"div\");\r\n    this.htmlArea = htmlArea;\r\n    htmlArea.contentEditable = \"true\";\r\n    htmlArea.style.width = \"100%\";\r\n    htmlArea.style.height = \"100%\";\r\n    this.getClient().appendChild(htmlArea);\r\n    htmlArea.addEventListener(\"paste\", e => {\r\n      if (!e.clipboardData) return;\r\n      if (e.clipboardData.files.length) {\r\n        const params = { fileList: e.clipboardData.files, enter: false };\r\n        this.callEvent(\"insertFile\", params);\r\n        if (!params.enter) this.insertImage(e.clipboardData.files);\r\n      } else {\r\n        let text = e.clipboardData.getData(\"text/plain\");\r\n        text = text.replace(/([\"&'<>\\n\\t ])/g, ch => {\r\n          const convert = {\r\n            '\"': \"&quot;\",\r\n            \"&\": \"&amp;\",\r\n            \"'\": \"&#39;\",\r\n            \"<\": \"&lt;\",\r\n            \">\": \"&gt;\",\r\n            \"\\n\": \"<br>\",\r\n            \" \": \"&nbsp;\",\r\n            \"\\t\": \"&nbsp;&nbsp;&nbsp;&nbsp;\"\r\n          };\r\n          return convert[ch as keyof typeof convert];\r\n        });\r\n        document.execCommand(\"insertHtml\", false, text);\r\n      }\r\n      e.preventDefault();\r\n      this.callEvent(\"updateText\");\r\n    });\r\n    htmlArea.addEventListener(\"input\", () => {\r\n      this.callEvent(\"updateText\");\r\n    });\r\n    htmlArea.addEventListener(\"blur\", () => {\r\n      const select = document.getSelection();\r\n      if (!select) return;\r\n      this.keepRange = select.getRangeAt(0);\r\n    });\r\n    //\r\n    htmlArea.ondragover = function(e) {\r\n      e.preventDefault();\r\n    };\r\n    htmlArea.addEventListener(\"drop\", e => {\r\n      if (e.dataTransfer) {\r\n        const params = { fileList: e.dataTransfer.files, enter: false };\r\n        this.callEvent(\"insertFile\", params);\r\n      }\r\n      e.preventDefault();\r\n    });\r\n  }\r\n  public insertImage(files: FileList) {\r\n    //DataURL\r\n    for (let i = 0; i < files.length; i++) {\r\n      const file = files[i];\r\n      if (file.type.indexOf(\"image\") != -1) {\r\n        const reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = () => {\r\n          document.execCommand(\"insertImage\", false, reader.result as string);\r\n          this.callEvent(\"updateText\");\r\n        };\r\n      }\r\n    }\r\n  }\r\n  public insertNode(node: HTMLElement) {\r\n    document.execCommand(\"insertHTML\", false, node.outerHTML);\r\n  }\r\n  public getHtml() {\r\n    return this.htmlArea.innerHTML;\r\n  }\r\n  public setHtml(value: string) {\r\n    this.htmlArea.innerHTML = value;\r\n  }\r\n  private addPanel() {\r\n    const client = this.getClient();\r\n    const panel = document.createElement(\"div\");\r\n    this.panel = panel;\r\n    client.appendChild(panel);\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        document.execCommand(\"removeFormat\");\r\n        this.callEvent(\"updateText\");\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      type: \"color\",\r\n      value:{r:0,g:0,b:0},\r\n      event: node => {\r\n        if (node && node.style.background) {\r\n          this.setRange();\r\n          document.execCommand(\"foreColor\", false, node.style.background);\r\n        }\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      value:{r:200,g:200,b:200},\r\n      type: \"color\",\r\n      event: node => {\r\n        if (node && node.style.background) {\r\n          this.setRange();\r\n          document.execCommand(\"backColor\", false, node.style.background);\r\n        }\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        document.execCommand(\"bold\");\r\n        this.callEvent(\"updateText\");\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        document.execCommand(\"italic\");\r\n        this.callEvent(\"updateText\");\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        document.execCommand(\"underline\");\r\n        this.callEvent(\"updateText\");\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        document.execCommand(\"strikeThrough\");\r\n        this.callEvent(\"updateText\");\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      type: \"select\",\r\n      label: \"\",\r\n      option: [\r\n        { label: \"\" },\r\n        { label: \"1\" },\r\n        { label: \"2\" },\r\n        { label: \"3\" },\r\n        { label: \"4\" },\r\n        { label: \"5\" },\r\n        { label: \"6\" },\r\n        { label: \"7\" }\r\n      ],\r\n      event: node => {\r\n        const select = node as HTMLSelectElement;\r\n        if (select.value !== \"\") {\r\n          document.execCommand(\"fontSize\", false, select.value as string);\r\n          this.callEvent(\"updateText\");\r\n          select.value = \"\";\r\n        }\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"\",\r\n      event: () => {\r\n        this.createLink();\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"CODE\",\r\n      event: () => {\r\n        this.setPGCode();\r\n      }\r\n    });\r\n    PanelControl.createControl(panel, {\r\n      label: \"PLAIN\",\r\n      event: () => {\r\n        this.setPGCode(true);\r\n      }\r\n    });\r\n  }\r\n  public createControl(param: PanelCreateParam) {\r\n    if (this.panel) PanelControl.createControl(this.panel, param);\r\n  }\r\n  public setPGCode(plain?: boolean) {\r\n    const select = document.getSelection();\r\n    if (!select) return;\r\n    const range = select.getRangeAt(0);\r\n    const text = select.toString().replace(/[\"&'<>\\n]/g, function(ch) {\r\n      const convert = {\r\n        \"</div>\": \"<br>\\n\",\r\n        \"\\n\": \"<br>\\n\",\r\n        '\"': \"&quot;\",\r\n        \"&\": \"&amp;\",\r\n        \"'\": \"&#39;\",\r\n        \"<\": \"&lt;\",\r\n        \">\": \"&gt;\"\r\n      };\r\n      return convert[ch as keyof typeof convert];\r\n    });\r\n    range.deleteContents();\r\n    range.insertNode(\r\n      range.createContextualFragment(\r\n        `<br><div class='code${plain ? 2 : \"\"}'>${text}</div><br>`\r\n      )\r\n    );\r\n    this.callEvent(\"updateText\");\r\n  }\r\n  public createLink() {\r\n    const select = document.getSelection();\r\n    if (!select) return;\r\n    const range = select.getRangeAt(0);\r\n    const input = new TextInputWindow({\r\n      title: \"\",\r\n      message: \"\",\r\n      label: \"URL\",\r\n      event: value => {\r\n        select.removeAllRanges();\r\n        select.addRange(range);\r\n        document.execCommand(\"createLink\", undefined, value);\r\n        if (select.anchorNode && select.anchorNode.parentElement) {\r\n          const parent = select.anchorNode.parentElement as HTMLAnchorElement;\r\n          parent.target = \"_blank\";\r\n        }\r\n        input.close();\r\n      }\r\n    });\r\n  }\r\n  public setRange() {\r\n    if (this.keepRange) {\r\n      const select = document.getSelection();\r\n      if (!select) return;\r\n      select.removeAllRanges();\r\n      select.addRange(this.keepRange);\r\n    }\r\n  }\r\n}\r\n","import { FrameWindow } from \"../FrameWindow\";\r\nimport { TextBox } from \"../TextBox\";\r\nimport { Label } from \"../Label\";\r\nimport { Button } from \"../Button\";\r\n\r\nexport class TextInputWindow extends FrameWindow {\r\n  private msg:Label\r\n  private text:TextBox;\r\n  public constructor(params: {\r\n    title?: string;\r\n    message?: string;\r\n    label?: string;\r\n    value?: string;\r\n    event?: (value: string) => void;\r\n  }) {\r\n    super();\r\n    this.setSize(300, 180);\r\n    this.setPos();\r\n    this.setPadding(10);\r\n    if (params.title) this.setTitle(params.title);\r\n    const msg = new Label(params.label || \"\");\r\n    this.msg = msg;\r\n    this.addChild(msg, \"top\");\r\n\r\n    const text = new TextBox({\r\n      label: params.value || \"\",\r\n      text: params.value || \"\"\r\n    });\r\n    this.text = text;\r\n    text.addEventListener(\"enter\", () => {\r\n      if (params.event) params.event(text.getText());\r\n    });\r\n    this.addChild(text, \"top\");\r\n\r\n    const okButton = new Button(\"OK\");\r\n    this.addChild(okButton, \"top\");\r\n    okButton.addEventListener(\"buttonClick\", async () => {\r\n      if (params.event) params.event(text.getText());\r\n    });\r\n    const cancelButton = new Button(\"Cancel\");\r\n    this.addChild(cancelButton, \"top\");\r\n    cancelButton.addEventListener(\"buttonClick\", () => {\r\n      this.close();\r\n    });\r\n    this.addEventListener(\"layouted\", () => {\r\n      text.focus();\r\n    });\r\n    this.active();\r\n  }\r\n  public setMessage(message:string):void{\r\n    this.msg.setText(message);\r\n  }\r\n  public getValue(){\r\n    return this.text.getText();\r\n  }\r\n}\r\n"],"sourceRoot":""}